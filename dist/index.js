/*! For license information please see index.js.LICENSE.txt */
(()=>{var e,t,r={32:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0;const s=r(7355),a=r(8157);var o=r(8157);function i(e,t,r,o){return(0,a.default)(48,s.default,e,t,r,o)}Object.defineProperty(t,"DNS",{enumerable:!0,get:function(){return o.DNS}}),Object.defineProperty(t,"URL",{enumerable:!0,get:function(){return o.URL}}),i.DNS=a.DNS,i.URL=a.URL,t.default=i},96:(e,t,r)=>{e.exports=a,a.sync=function(e,t){return o(s.statSync(e),t)};var s=r(9896);function a(e,t,r){s.stat(e,function(e,s){r(e,!e&&o(s,t))})}function o(e,t){return e.isFile()&&function(e,t){var r=e.mode,s=e.uid,a=e.gid,o=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),i=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),n=parseInt("100",8),c=parseInt("010",8);return r&parseInt("001",8)||r&c&&a===i||r&n&&s===o||r&(n|c)&&0===o}(e,t)}},181:e=>{"use strict";e.exports=require("buffer")},246:e=>{"use strict";e.exports=function(e,t,r){var s,a=" ",o=e.level,i=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(i||""),h=e.opts.$data&&n&&n.$data;h?(a+=" var schema"+o+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",s="schema"+o):s=n;var p="maximum"==t,f=p?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[f],v=e.opts.$data&&m&&m.$data,g=p?"<":">",y=p?">":"<",_=void 0;if(!h&&"number"!=typeof n&&void 0!==n)throw new Error(t+" must be number");if(!v&&void 0!==m&&"number"!=typeof m&&"boolean"!=typeof m)throw new Error(f+" must be number or boolean");if(v){var b,S=e.util.getData(m.$data,i,e.dataPathArr),w="exclusive"+o,P="exclType"+o,E="exclIsNumber"+o,x="' + "+(C="op"+o)+" + '";a+=" var schemaExcl"+o+" = "+S+"; ",a+=" var "+w+"; var "+P+" = typeof "+(S="schemaExcl"+o)+"; if ("+P+" != 'boolean' && "+P+" != 'undefined' && "+P+" != 'number') { ",_=f,(b=b||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(_||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: '"+f+" should be boolean' "),e.opts.verbose&&(a+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var R=a;a=b.pop(),!e.compositeRule&&d?e.async?a+=" throw new ValidationError(["+R+"]); ":a+=" validate.errors = ["+R+"]; return false; ":a+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else if ( ",h&&(a+=" ("+s+" !== undefined && typeof "+s+" != 'number') || "),a+=" "+P+" == 'number' ? ( ("+w+" = "+s+" === undefined || "+S+" "+g+"= "+s+") ? "+u+" "+y+"= "+S+" : "+u+" "+y+" "+s+" ) : ( ("+w+" = "+S+" === true) ? "+u+" "+y+"= "+s+" : "+u+" "+y+" "+s+" ) || "+u+" !== "+u+") { var op"+o+" = "+w+" ? '"+g+"' : '"+g+"='; ",void 0===n&&(_=f,l=e.errSchemaPath+"/"+f,s=S,h=v)}else if(x=g,(E="number"==typeof m)&&h){var C="'"+x+"'";a+=" if ( ",h&&(a+=" ("+s+" !== undefined && typeof "+s+" != 'number') || "),a+=" ( "+s+" === undefined || "+m+" "+g+"= "+s+" ? "+u+" "+y+"= "+m+" : "+u+" "+y+" "+s+" ) || "+u+" !== "+u+") { "}else E&&void 0===n?(w=!0,_=f,l=e.errSchemaPath+"/"+f,s=m,y+="="):(E&&(s=Math[p?"min":"max"](m,n)),m===(!E||s)?(w=!0,_=f,l=e.errSchemaPath+"/"+f,y+="="):(w=!1,x+="=")),C="'"+x+"'",a+=" if ( ",h&&(a+=" ("+s+" !== undefined && typeof "+s+" != 'number') || "),a+=" "+u+" "+y+" "+s+" || "+u+" !== "+u+") { ";return _=_||t,(b=b||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(_||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { comparison: "+C+", limit: "+s+", exclusive: "+w+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be "+x+" ",a+=h?"' + "+s:s+"'"),e.opts.verbose&&(a+=" , schema:  ",a+=h?"validate.schema"+c:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ",R=a,a=b.pop(),!e.compositeRule&&d?e.async?a+=" throw new ValidationError(["+R+"]); ":a+=" validate.errors = ["+R+"]; return false; ":a+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",d&&(a+=" else { "),a}},393:e=>{"use strict";e.exports=function(e,t,r){var s=" ",a=e.schema[t],o=e.errSchemaPath+"/"+t,i=(e.opts.allErrors,e.util.toQuotedString(a));return!0===e.opts.$comment?s+=" console.log("+i+");":"function"==typeof e.opts.$comment&&(s+=" self._opts.$comment("+i+", "+e.util.toQuotedString(o)+", validate.root.schema);"),s}},438:(e,t,r)=>{e.exports=o,o.sync=function(e,t){return a(s.statSync(e),e,t)};var s=r(9896);function a(e,t,r){return!(!e.isSymbolicLink()&&!e.isFile())&&function(e,t){var r=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!r)return!0;if(-1!==(r=r.split(";")).indexOf(""))return!0;for(var s=0;s<r.length;s++){var a=r[s].toLowerCase();if(a&&e.substr(-a.length).toLowerCase()===a)return!0}return!1}(t,r)}function o(e,t,r){s.stat(e,function(s,o){r(s,!s&&a(o,e,t))})}},443:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamableHTTPClientTransport=t.StreamableHTTPError=void 0;const s=r(1294),a=r(3661),o=r(3205),i={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2};class n extends Error{constructor(e,t){super(`Streamable HTTP error: ${t}`),this.code=e}}t.StreamableHTTPError=n,t.StreamableHTTPClientTransport=class{constructor(e,t){var r;this._url=e,this._resourceMetadataUrl=void 0,this._requestInit=null==t?void 0:t.requestInit,this._authProvider=null==t?void 0:t.authProvider,this._sessionId=null==t?void 0:t.sessionId,this._reconnectionOptions=null!==(r=null==t?void 0:t.reconnectionOptions)&&void 0!==r?r:i}async _authThenStart(){var e;if(!this._authProvider)throw new a.UnauthorizedError("No auth provider");let t;try{t=await(0,a.auth)(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl})}catch(t){throw null===(e=this.onerror)||void 0===e||e.call(this,t),t}if("AUTHORIZED"!==t)throw new a.UnauthorizedError;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var e;const t={};if(this._authProvider){const e=await this._authProvider.tokens();e&&(t.Authorization=`Bearer ${e.access_token}`)}this._sessionId&&(t["mcp-session-id"]=this._sessionId),this._protocolVersion&&(t["mcp-protocol-version"]=this._protocolVersion);const r=this._normalizeHeaders(null===(e=this._requestInit)||void 0===e?void 0:e.headers);return new Headers({...t,...r})}async _startOrAuthSse(e){var t,r;const{resumptionToken:s}=e;try{const r=await this._commonHeaders();r.set("Accept","text/event-stream"),s&&r.set("last-event-id",s);const a=await fetch(this._url,{method:"GET",headers:r,signal:null===(t=this._abortController)||void 0===t?void 0:t.signal});if(!a.ok){if(401===a.status&&this._authProvider)return await this._authThenStart();if(405===a.status)return;throw new n(a.status,`Failed to open SSE stream: ${a.statusText}`)}this._handleSseStream(a.body,e)}catch(e){throw null===(r=this.onerror)||void 0===r||r.call(this,e),e}}_getNextReconnectionDelay(e){const t=this._reconnectionOptions.initialReconnectionDelay,r=this._reconnectionOptions.reconnectionDelayGrowFactor,s=this._reconnectionOptions.maxReconnectionDelay;return Math.min(t*Math.pow(r,e),s)}_normalizeHeaders(e){return e?e instanceof Headers?Object.fromEntries(e.entries()):Array.isArray(e)?Object.fromEntries(e):{...e}:{}}_scheduleReconnection(e,t=0){var r;const s=this._reconnectionOptions.maxRetries;if(s>0&&t>=s)return void(null===(r=this.onerror)||void 0===r||r.call(this,new Error(`Maximum reconnection attempts (${s}) exceeded.`)));const a=this._getNextReconnectionDelay(t);setTimeout(()=>{this._startOrAuthSse(e).catch(r=>{var s;null===(s=this.onerror)||void 0===s||s.call(this,new Error(`Failed to reconnect SSE stream: ${r instanceof Error?r.message:String(r)}`)),this._scheduleReconnection(e,t+1)})},a)}_handleSseStream(e,t){if(!e)return;const{onresumptiontoken:r,replayMessageId:a}=t;let i;(async()=>{var t,n,c,l;try{const c=e.pipeThrough(new TextDecoderStream).pipeThrough(new o.EventSourceParserStream).getReader();for(;;){const{value:e,done:o}=await c.read();if(o)break;if(e.id&&(i=e.id,null==r||r(e.id)),!e.event||"message"===e.event)try{const r=s.JSONRPCMessageSchema.parse(JSON.parse(e.data));void 0!==a&&(0,s.isJSONRPCResponse)(r)&&(r.id=a),null===(t=this.onmessage)||void 0===t||t.call(this,r)}catch(e){null===(n=this.onerror)||void 0===n||n.call(this,e)}}}catch(e){if(null===(c=this.onerror)||void 0===c||c.call(this,new Error(`SSE stream disconnected: ${e}`)),this._abortController&&!this._abortController.signal.aborted&&void 0!==i)try{this._scheduleReconnection({resumptionToken:i,onresumptiontoken:r,replayMessageId:a},0)}catch(e){null===(l=this.onerror)||void 0===l||l.call(this,new Error(`Failed to reconnect: ${e instanceof Error?e.message:String(e)}`))}}})()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new a.UnauthorizedError("No auth provider");if("AUTHORIZED"!==await(0,a.auth)(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl}))throw new a.UnauthorizedError("Failed to authorize")}async close(){var e,t;null===(e=this._abortController)||void 0===e||e.abort(),null===(t=this.onclose)||void 0===t||t.call(this)}async send(e,t){var r,o,i;try{const{resumptionToken:i,onresumptiontoken:c}=t||{};if(i)return void this._startOrAuthSse({resumptionToken:i,replayMessageId:(0,s.isJSONRPCRequest)(e)?e.id:void 0}).catch(e=>{var t;return null===(t=this.onerror)||void 0===t?void 0:t.call(this,e)});const l=await this._commonHeaders();l.set("content-type","application/json"),l.set("accept","application/json, text/event-stream");const d={...this._requestInit,method:"POST",headers:l,body:JSON.stringify(e),signal:null===(r=this._abortController)||void 0===r?void 0:r.signal},u=await fetch(this._url,d),h=u.headers.get("mcp-session-id");if(h&&(this._sessionId=h),!u.ok){if(401===u.status&&this._authProvider){if(this._resourceMetadataUrl=(0,a.extractResourceMetadataUrl)(u),"AUTHORIZED"!==await(0,a.auth)(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl}))throw new a.UnauthorizedError;return this.send(e)}const t=await u.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${u.status}): ${t}`)}if(202===u.status)return void((0,s.isInitializedNotification)(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(e=>{var t;return null===(t=this.onerror)||void 0===t?void 0:t.call(this,e)}));const p=(Array.isArray(e)?e:[e]).filter(e=>"method"in e&&"id"in e&&void 0!==e.id).length>0,f=u.headers.get("content-type");if(p)if(null==f?void 0:f.includes("text/event-stream"))this._handleSseStream(u.body,{onresumptiontoken:c});else{if(!(null==f?void 0:f.includes("application/json")))throw new n(-1,`Unexpected content type: ${f}`);{const e=await u.json(),t=Array.isArray(e)?e.map(e=>s.JSONRPCMessageSchema.parse(e)):[s.JSONRPCMessageSchema.parse(e)];for(const e of t)null===(o=this.onmessage)||void 0===o||o.call(this,e)}}}catch(e){throw null===(i=this.onerror)||void 0===i||i.call(this,e),e}}get sessionId(){return this._sessionId}async terminateSession(){var e,t;if(this._sessionId)try{const t=await this._commonHeaders(),r={...this._requestInit,method:"DELETE",headers:t,signal:null===(e=this._abortController)||void 0===e?void 0:e.signal},s=await fetch(this._url,r);if(!s.ok&&405!==s.status)throw new n(s.status,`Failed to terminate session: ${s.statusText}`);this._sessionId=void 0}catch(e){throw null===(t=this.onerror)||void 0===t||t.call(this,e),e}}setProtocolVersion(e){this._protocolVersion=e}get protocolVersion(){return this._protocolVersion}}},458:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateV1State=void 0;const s=r(9942),a=r(3202),o={};function i(e,t,r){return e.msecs??=-1/0,e.nsecs??=0,t===e.msecs?(e.nsecs++,e.nsecs>=1e4&&(e.node=void 0,e.nsecs=0)):t>e.msecs?e.nsecs=0:t<e.msecs&&(e.node=void 0),e.node||(e.node=r.slice(10,16),e.node[0]|=1,e.clockseq=16383&(r[8]<<8|r[9])),e.msecs=t,e}function n(e,t,r,s,a,o,i=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(o){if(i<0||i+16>o.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`)}else o=new Uint8Array(16),i=0;t??=Date.now(),r??=0,s??=16383&(e[8]<<8|e[9]),a??=e.slice(10,16);const n=(1e4*(268435455&(t+=122192928e5))+r)%4294967296;o[i++]=n>>>24&255,o[i++]=n>>>16&255,o[i++]=n>>>8&255,o[i++]=255&n;const c=t/4294967296*1e4&268435455;o[i++]=c>>>8&255,o[i++]=255&c,o[i++]=c>>>24&15|16,o[i++]=c>>>16&255,o[i++]=s>>>8|128,o[i++]=255&s;for(let e=0;e<6;++e)o[i++]=a[e];return o}t.updateV1State=i,t.default=function(e,t,r){let c;const l=e?._v6??!1;if(e){const t=Object.keys(e);1===t.length&&"_v6"===t[0]&&(e=void 0)}if(e)c=n(e.random??e.rng?.()??(0,s.default)(),e.msecs,e.nsecs,e.clockseq,e.node,t,r);else{const e=Date.now(),a=(0,s.default)();i(o,e,a),c=n(a,o.msecs,o.nsecs,l?void 0:o.clockseq,l?void 0:o.node,t,r)}return t??(0,a.unsafeStringify)(c)}},491:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.discriminatedUnion=t.date=t.boolean=t.bigint=t.array=t.any=t.coerce=t.ZodFirstPartyTypeKind=t.late=t.ZodSchema=t.Schema=t.ZodReadonly=t.ZodPipeline=t.ZodBranded=t.BRAND=t.ZodNaN=t.ZodCatch=t.ZodDefault=t.ZodNullable=t.ZodOptional=t.ZodTransformer=t.ZodEffects=t.ZodPromise=t.ZodNativeEnum=t.ZodEnum=t.ZodLiteral=t.ZodLazy=t.ZodFunction=t.ZodSet=t.ZodMap=t.ZodRecord=t.ZodTuple=t.ZodIntersection=t.ZodDiscriminatedUnion=t.ZodUnion=t.ZodObject=t.ZodArray=t.ZodVoid=t.ZodNever=t.ZodUnknown=t.ZodAny=t.ZodNull=t.ZodUndefined=t.ZodSymbol=t.ZodDate=t.ZodBoolean=t.ZodBigInt=t.ZodNumber=t.ZodString=t.ZodType=void 0,t.NEVER=t.void=t.unknown=t.union=t.undefined=t.tuple=t.transformer=t.symbol=t.string=t.strictObject=t.set=t.record=t.promise=t.preprocess=t.pipeline=t.ostring=t.optional=t.onumber=t.oboolean=t.object=t.number=t.nullable=t.null=t.never=t.nativeEnum=t.nan=t.map=t.literal=t.lazy=t.intersection=t.instanceof=t.function=t.enum=t.effect=void 0,t.datetimeRegex=O,t.custom=Pe;const s=r(8651),a=r(9317),o=r(3368),i=r(819),n=r(2034);class c{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const l=(e,t)=>{if((0,i.isValid)(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new s.ZodError(e.common.issues);return this._error=t,this._error}}};function d(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:s,description:a}=e;if(t&&(r||s))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(t,a)=>{const{message:o}=e;return"invalid_enum_value"===t.code?{message:o??a.defaultError}:void 0===a.data?{message:o??s??a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:o??r??a.defaultError}},description:a}}class u{get description(){return this._def.description}_getType(e){return(0,n.getParsedType)(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:(0,n.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new i.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:(0,n.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if((0,i.isAsync)(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,n.getParsedType)(e)},s=this._parseSync({data:e,path:r.path,parent:r});return l(r,s)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,n.getParsedType)(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:t});return(0,i.isValid)(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>(0,i.isValid)(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,n.getParsedType)(e)},s=this._parse({data:e,path:r.path,parent:r}),a=await((0,i.isAsync)(s)?s:Promise.resolve(s));return l(r,a)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,a)=>{const o=e(t),i=()=>a.addIssue({code:s.ZodIssueCode.custom,...r(t)});return"undefined"!=typeof Promise&&o instanceof Promise?o.then(e=>!!e||(i(),!1)):!!o||(i(),!1)})}refinement(e,t){return this._refinement((r,s)=>!!e(r)||(s.addIssue("function"==typeof t?t(r,s):t),!1))}_refinement(e){return new pe({schema:this,typeName:Ee.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return fe.create(this,this._def)}nullable(){return me.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return K.create(this)}promise(){return he.create(this,this._def)}or(e){return G.create([this,e],this._def)}and(e){return te.create(this,e,this._def)}transform(e){return new pe({...d(this._def),schema:this,typeName:Ee.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new ve({...d(this._def),innerType:this,defaultValue:t,typeName:Ee.ZodDefault})}brand(){return new _e({typeName:Ee.ZodBranded,type:this,...d(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new ge({...d(this._def),innerType:this,catchValue:t,typeName:Ee.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return be.create(this,e)}readonly(){return Se.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}t.ZodType=u,t.Schema=u,t.ZodSchema=u;const h=/^c[^\s-]{8,}$/i,p=/^[0-9a-z]+$/,f=/^[0-9A-HJKMNP-TV-Z]{26}$/i,m=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,v=/^[a-z0-9_-]{21}$/i,g=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,y=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,_=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let b;const S=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,w=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,P=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,E=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,x=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,R=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,C="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",T=new RegExp(`^${C}$`);function I(e){let t="[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function k(e){return new RegExp(`^${I(e)}$`)}function O(e){let t=`${C}T${I(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function z(e,t){return!("v4"!==t&&t||!S.test(e))||!("v6"!==t&&t||!P.test(e))}function N(e,t){if(!g.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const s=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(s));return!("object"!=typeof a||null===a||"typ"in a&&"JWT"!==a?.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function j(e,t){return!("v4"!==t&&t||!w.test(e))||!("v6"!==t&&t||!E.test(e))}class A extends u{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==n.ZodParsedType.string){const t=this._getOrReturnCtx(e);return(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.string,received:t.parsedType}),i.INVALID}const t=new i.ParseStatus;let r;for(const a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{code:s.ZodIssueCode.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("max"===a.kind)e.data.length>a.value&&(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{code:s.ZodIssueCode.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("length"===a.kind){const o=e.data.length>a.value,n=e.data.length<a.value;(o||n)&&(r=this._getOrReturnCtx(e,r),o?(0,i.addIssueToContext)(r,{code:s.ZodIssueCode.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):n&&(0,i.addIssueToContext)(r,{code:s.ZodIssueCode.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),t.dirty())}else if("email"===a.kind)_.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{validation:"email",code:s.ZodIssueCode.invalid_string,message:a.message}),t.dirty());else if("emoji"===a.kind)b||(b=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),b.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{validation:"emoji",code:s.ZodIssueCode.invalid_string,message:a.message}),t.dirty());else if("uuid"===a.kind)m.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{validation:"uuid",code:s.ZodIssueCode.invalid_string,message:a.message}),t.dirty());else if("nanoid"===a.kind)v.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{validation:"nanoid",code:s.ZodIssueCode.invalid_string,message:a.message}),t.dirty());else if("cuid"===a.kind)h.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{validation:"cuid",code:s.ZodIssueCode.invalid_string,message:a.message}),t.dirty());else if("cuid2"===a.kind)p.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{validation:"cuid2",code:s.ZodIssueCode.invalid_string,message:a.message}),t.dirty());else if("ulid"===a.kind)f.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{validation:"ulid",code:s.ZodIssueCode.invalid_string,message:a.message}),t.dirty());else if("url"===a.kind)try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{validation:"url",code:s.ZodIssueCode.invalid_string,message:a.message}),t.dirty()}else"regex"===a.kind?(a.regex.lastIndex=0,a.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{validation:"regex",code:s.ZodIssueCode.invalid_string,message:a.message}),t.dirty())):"trim"===a.kind?e.data=e.data.trim():"includes"===a.kind?e.data.includes(a.value,a.position)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{code:s.ZodIssueCode.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),t.dirty()):"toLowerCase"===a.kind?e.data=e.data.toLowerCase():"toUpperCase"===a.kind?e.data=e.data.toUpperCase():"startsWith"===a.kind?e.data.startsWith(a.value)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{code:s.ZodIssueCode.invalid_string,validation:{startsWith:a.value},message:a.message}),t.dirty()):"endsWith"===a.kind?e.data.endsWith(a.value)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{code:s.ZodIssueCode.invalid_string,validation:{endsWith:a.value},message:a.message}),t.dirty()):"datetime"===a.kind?O(a).test(e.data)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{code:s.ZodIssueCode.invalid_string,validation:"datetime",message:a.message}),t.dirty()):"date"===a.kind?T.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{code:s.ZodIssueCode.invalid_string,validation:"date",message:a.message}),t.dirty()):"time"===a.kind?k(a).test(e.data)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{code:s.ZodIssueCode.invalid_string,validation:"time",message:a.message}),t.dirty()):"duration"===a.kind?y.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{validation:"duration",code:s.ZodIssueCode.invalid_string,message:a.message}),t.dirty()):"ip"===a.kind?z(e.data,a.version)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{validation:"ip",code:s.ZodIssueCode.invalid_string,message:a.message}),t.dirty()):"jwt"===a.kind?N(e.data,a.alg)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{validation:"jwt",code:s.ZodIssueCode.invalid_string,message:a.message}),t.dirty()):"cidr"===a.kind?j(e.data,a.version)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{validation:"cidr",code:s.ZodIssueCode.invalid_string,message:a.message}),t.dirty()):"base64"===a.kind?x.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{validation:"base64",code:s.ZodIssueCode.invalid_string,message:a.message}),t.dirty()):"base64url"===a.kind?R.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{validation:"base64url",code:s.ZodIssueCode.invalid_string,message:a.message}),t.dirty()):n.util.assertNever(a);return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:s.ZodIssueCode.invalid_string,...o.errorUtil.errToObj(r)})}_addCheck(e){return new A({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...o.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...o.errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...o.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...o.errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...o.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...o.errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...o.errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...o.errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...o.errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...o.errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...o.errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...o.errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...o.errorUtil.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...o.errorUtil.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...o.errorUtil.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...o.errorUtil.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...o.errorUtil.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...o.errorUtil.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...o.errorUtil.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...o.errorUtil.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...o.errorUtil.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...o.errorUtil.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...o.errorUtil.errToObj(t)})}nonempty(e){return this.min(1,o.errorUtil.errToObj(e))}trim(){return new A({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new A({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new A({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function D(e,t){const r=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,a=r>s?r:s;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}t.ZodString=A,A.create=e=>new A({checks:[],typeName:Ee.ZodString,coerce:e?.coerce??!1,...d(e)});class L extends u{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==n.ZodParsedType.number){const t=this._getOrReturnCtx(e);return(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.number,received:t.parsedType}),i.INVALID}let t;const r=new i.ParseStatus;for(const a of this._def.checks)"int"===a.kind?n.util.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"multipleOf"===a.kind?0!==D(e.data,a.value)&&(t=this._getOrReturnCtx(e,t),(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.not_finite,message:a.message}),r.dirty()):n.util.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,o.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,o.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,o.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,o.errorUtil.toString(t))}setLimit(e,t,r,s){return new L({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:o.errorUtil.toString(s)}]})}_addCheck(e){return new L({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:o.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:o.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:o.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:o.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:o.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:o.errorUtil.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:o.errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:o.errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:o.errorUtil.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&n.util.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}t.ZodNumber=L,L.create=e=>new L({checks:[],typeName:Ee.ZodNumber,coerce:e?.coerce||!1,...d(e)});class $ extends u{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==n.ZodParsedType.bigint)return this._getInvalidInput(e);let t;const r=new i.ParseStatus;for(const a of this._def.checks)"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):n.util.assertNever(a);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.bigint,received:t.parsedType}),i.INVALID}gte(e,t){return this.setLimit("min",e,!0,o.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,o.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,o.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,o.errorUtil.toString(t))}setLimit(e,t,r,s){return new $({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:o.errorUtil.toString(s)}]})}_addCheck(e){return new $({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:o.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:o.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:o.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:o.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:o.errorUtil.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}t.ZodBigInt=$,$.create=e=>new $({checks:[],typeName:Ee.ZodBigInt,coerce:e?.coerce??!1,...d(e)});class U extends u{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==n.ZodParsedType.boolean){const t=this._getOrReturnCtx(e);return(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.boolean,received:t.parsedType}),i.INVALID}return(0,i.OK)(e.data)}}t.ZodBoolean=U,U.create=e=>new U({typeName:Ee.ZodBoolean,coerce:e?.coerce||!1,...d(e)});class Z extends u{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==n.ZodParsedType.date){const t=this._getOrReturnCtx(e);return(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.date,received:t.parsedType}),i.INVALID}if(Number.isNaN(e.data.getTime())){const t=this._getOrReturnCtx(e);return(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_date}),i.INVALID}const t=new i.ParseStatus;let r;for(const a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{code:s.ZodIssueCode.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),t.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(r=this._getOrReturnCtx(e,r),(0,i.addIssueToContext)(r,{code:s.ZodIssueCode.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),t.dirty()):n.util.assertNever(a);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Z({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:o.errorUtil.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:o.errorUtil.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}t.ZodDate=Z,Z.create=e=>new Z({checks:[],coerce:e?.coerce||!1,typeName:Ee.ZodDate,...d(e)});class F extends u{_parse(e){if(this._getType(e)!==n.ZodParsedType.symbol){const t=this._getOrReturnCtx(e);return(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.symbol,received:t.parsedType}),i.INVALID}return(0,i.OK)(e.data)}}t.ZodSymbol=F,F.create=e=>new F({typeName:Ee.ZodSymbol,...d(e)});class M extends u{_parse(e){if(this._getType(e)!==n.ZodParsedType.undefined){const t=this._getOrReturnCtx(e);return(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.undefined,received:t.parsedType}),i.INVALID}return(0,i.OK)(e.data)}}t.ZodUndefined=M,M.create=e=>new M({typeName:Ee.ZodUndefined,...d(e)});class q extends u{_parse(e){if(this._getType(e)!==n.ZodParsedType.null){const t=this._getOrReturnCtx(e);return(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.null,received:t.parsedType}),i.INVALID}return(0,i.OK)(e.data)}}t.ZodNull=q,q.create=e=>new q({typeName:Ee.ZodNull,...d(e)});class V extends u{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,i.OK)(e.data)}}t.ZodAny=V,V.create=e=>new V({typeName:Ee.ZodAny,...d(e)});class B extends u{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,i.OK)(e.data)}}t.ZodUnknown=B,B.create=e=>new B({typeName:Ee.ZodUnknown,...d(e)});class H extends u{_parse(e){const t=this._getOrReturnCtx(e);return(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.never,received:t.parsedType}),i.INVALID}}t.ZodNever=H,H.create=e=>new H({typeName:Ee.ZodNever,...d(e)});class W extends u{_parse(e){if(this._getType(e)!==n.ZodParsedType.undefined){const t=this._getOrReturnCtx(e);return(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.void,received:t.parsedType}),i.INVALID}return(0,i.OK)(e.data)}}t.ZodVoid=W,W.create=e=>new W({typeName:Ee.ZodVoid,...d(e)});class K extends u{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),a=this._def;if(t.parsedType!==n.ZodParsedType.array)return(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.array,received:t.parsedType}),i.INVALID;if(null!==a.exactLength){const e=t.data.length>a.exactLength.value,o=t.data.length<a.exactLength.value;(e||o)&&((0,i.addIssueToContext)(t,{code:e?s.ZodIssueCode.too_big:s.ZodIssueCode.too_small,minimum:o?a.exactLength.value:void 0,maximum:e?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(null!==a.minLength&&t.data.length<a.minLength.value&&((0,i.addIssueToContext)(t,{code:s.ZodIssueCode.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),null!==a.maxLength&&t.data.length>a.maxLength.value&&((0,i.addIssueToContext)(t,{code:s.ZodIssueCode.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>a.type._parseAsync(new c(t,e,t.path,r)))).then(e=>i.ParseStatus.mergeArray(r,e));const o=[...t.data].map((e,r)=>a.type._parseSync(new c(t,e,t.path,r)));return i.ParseStatus.mergeArray(r,o)}get element(){return this._def.type}min(e,t){return new K({...this._def,minLength:{value:e,message:o.errorUtil.toString(t)}})}max(e,t){return new K({...this._def,maxLength:{value:e,message:o.errorUtil.toString(t)}})}length(e,t){return new K({...this._def,exactLength:{value:e,message:o.errorUtil.toString(t)}})}nonempty(e){return this.min(1,e)}}function Q(e){if(e instanceof J){const t={};for(const r in e.shape){const s=e.shape[r];t[r]=fe.create(Q(s))}return new J({...e._def,shape:()=>t})}return e instanceof K?new K({...e._def,type:Q(e.element)}):e instanceof fe?fe.create(Q(e.unwrap())):e instanceof me?me.create(Q(e.unwrap())):e instanceof re?re.create(e.items.map(e=>Q(e))):e}t.ZodArray=K,K.create=(e,t)=>new K({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ee.ZodArray,...d(t)});class J extends u{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=n.util.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==n.ZodParsedType.object){const t=this._getOrReturnCtx(e);return(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.object,received:t.parsedType}),i.INVALID}const{status:t,ctx:r}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof H&&"strip"===this._def.unknownKeys))for(const e in r.data)o.includes(e)||l.push(e);const d=[];for(const e of o){const t=a[e],s=r.data[e];d.push({key:{status:"valid",value:e},value:t._parse(new c(r,s,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof H){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of l)d.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)l.length>0&&((0,i.addIssueToContext)(r,{code:s.ZodIssueCode.unrecognized_keys,keys:l}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of l){const s=r.data[t];d.push({key:{status:"valid",value:t},value:e._parse(new c(r,s,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of d){const r=await t.key,s=await t.value;e.push({key:r,value:s,alwaysSet:t.alwaysSet})}return e}).then(e=>i.ParseStatus.mergeObjectSync(t,e)):i.ParseStatus.mergeObjectSync(t,d)}get shape(){return this._def.shape()}strict(e){return o.errorUtil.errToObj,new J({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{const s=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:o.errorUtil.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new J({...this._def,unknownKeys:"strip"})}passthrough(){return new J({...this._def,unknownKeys:"passthrough"})}extend(e){return new J({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new J({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ee.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new J({...this._def,catchall:e})}pick(e){const t={};for(const r of n.util.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new J({...this._def,shape:()=>t})}omit(e){const t={};for(const r of n.util.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new J({...this._def,shape:()=>t})}deepPartial(){return Q(this)}partial(e){const t={};for(const r of n.util.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}return new J({...this._def,shape:()=>t})}required(e){const t={};for(const r of n.util.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof fe;)e=e._def.innerType;t[r]=e}return new J({...this._def,shape:()=>t})}keyof(){return le(n.util.objectKeys(this.shape))}}t.ZodObject=J,J.create=(e,t)=>new J({shape:()=>e,unknownKeys:"strip",catchall:H.create(),typeName:Ee.ZodObject,...d(t)}),J.strictCreate=(e,t)=>new J({shape:()=>e,unknownKeys:"strict",catchall:H.create(),typeName:Ee.ZodObject,...d(t)}),J.lazycreate=(e,t)=>new J({shape:e,unknownKeys:"strip",catchall:H.create(),typeName:Ee.ZodObject,...d(t)});class G extends u{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map(e=>new s.ZodError(e.ctx.common.issues));return(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_union,unionErrors:r}),i.INVALID});{let e;const a=[];for(const s of r){const r={...t,common:{...t.common,issues:[]},parent:null},o=s._parseSync({data:t.data,path:t.path,parent:r});if("valid"===o.status)return o;"dirty"!==o.status||e||(e={result:o,ctx:r}),r.common.issues.length&&a.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const o=a.map(e=>new s.ZodError(e));return(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_union,unionErrors:o}),i.INVALID}}get options(){return this._def.options}}t.ZodUnion=G,G.create=(e,t)=>new G({options:e,typeName:Ee.ZodUnion,...d(t)});const Y=e=>e instanceof ne?Y(e.schema):e instanceof pe?Y(e.innerType()):e instanceof ce?[e.value]:e instanceof de?e.options:e instanceof ue?n.util.objectValues(e.enum):e instanceof ve?Y(e._def.innerType):e instanceof M?[void 0]:e instanceof q?[null]:e instanceof fe?[void 0,...Y(e.unwrap())]:e instanceof me?[null,...Y(e.unwrap())]:e instanceof _e||e instanceof Se?Y(e.unwrap()):e instanceof ge?Y(e._def.innerType):[];class X extends u{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==n.ZodParsedType.object)return(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.object,received:t.parsedType}),i.INVALID;const r=this.discriminator,a=t.data[r],o=this.optionsMap.get(a);return o?t.common.async?o._parseAsync({data:t.data,path:t.path,parent:t}):o._parseSync({data:t.data,path:t.path,parent:t}):((0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),i.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const s=new Map;for(const r of t){const t=Y(r.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of t){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,r)}}return new X({typeName:Ee.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...d(r)})}}function ee(e,t){const r=(0,n.getParsedType)(e),s=(0,n.getParsedType)(t);if(e===t)return{valid:!0,data:e};if(r===n.ZodParsedType.object&&s===n.ZodParsedType.object){const r=n.util.objectKeys(t),s=n.util.objectKeys(e).filter(e=>-1!==r.indexOf(e)),a={...e,...t};for(const r of s){const s=ee(e[r],t[r]);if(!s.valid)return{valid:!1};a[r]=s.data}return{valid:!0,data:a}}if(r===n.ZodParsedType.array&&s===n.ZodParsedType.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let s=0;s<e.length;s++){const a=ee(e[s],t[s]);if(!a.valid)return{valid:!1};r.push(a.data)}return{valid:!0,data:r}}return r===n.ZodParsedType.date&&s===n.ZodParsedType.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}t.ZodDiscriminatedUnion=X;class te extends u{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),a=(e,a)=>{if((0,i.isAborted)(e)||(0,i.isAborted)(a))return i.INVALID;const o=ee(e.value,a.value);return o.valid?(((0,i.isDirty)(e)||(0,i.isDirty)(a))&&t.dirty(),{status:t.value,value:o.data}):((0,i.addIssueToContext)(r,{code:s.ZodIssueCode.invalid_intersection_types}),i.INVALID)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>a(e,t)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}t.ZodIntersection=te,te.create=(e,t,r)=>new te({left:e,right:t,typeName:Ee.ZodIntersection,...d(r)});class re extends u{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==n.ZodParsedType.array)return(0,i.addIssueToContext)(r,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.array,received:r.parsedType}),i.INVALID;if(r.data.length<this._def.items.length)return(0,i.addIssueToContext)(r,{code:s.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),i.INVALID;!this._def.rest&&r.data.length>this._def.items.length&&((0,i.addIssueToContext)(r,{code:s.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...r.data].map((e,t)=>{const s=this._def.items[t]||this._def.rest;return s?s._parse(new c(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(a).then(e=>i.ParseStatus.mergeArray(t,e)):i.ParseStatus.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new re({...this._def,rest:e})}}t.ZodTuple=re,re.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new re({items:e,typeName:Ee.ZodTuple,rest:null,...d(t)})};class se extends u{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==n.ZodParsedType.object)return(0,i.addIssueToContext)(r,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.object,received:r.parsedType}),i.INVALID;const a=[],o=this._def.keyType,l=this._def.valueType;for(const e in r.data)a.push({key:o._parse(new c(r,e,r.path,e)),value:l._parse(new c(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?i.ParseStatus.mergeObjectAsync(t,a):i.ParseStatus.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,r){return new se(t instanceof u?{keyType:e,valueType:t,typeName:Ee.ZodRecord,...d(r)}:{keyType:A.create(),valueType:e,typeName:Ee.ZodRecord,...d(t)})}}t.ZodRecord=se;class ae extends u{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==n.ZodParsedType.map)return(0,i.addIssueToContext)(r,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.map,received:r.parsedType}),i.INVALID;const a=this._def.keyType,o=this._def.valueType,l=[...r.data.entries()].map(([e,t],s)=>({key:a._parse(new c(r,e,r.path,[s,"key"])),value:o._parse(new c(r,t,r.path,[s,"value"]))}));if(r.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const r of l){const s=await r.key,a=await r.value;if("aborted"===s.status||"aborted"===a.status)return i.INVALID;"dirty"!==s.status&&"dirty"!==a.status||t.dirty(),e.set(s.value,a.value)}return{status:t.value,value:e}})}{const e=new Map;for(const r of l){const s=r.key,a=r.value;if("aborted"===s.status||"aborted"===a.status)return i.INVALID;"dirty"!==s.status&&"dirty"!==a.status||t.dirty(),e.set(s.value,a.value)}return{status:t.value,value:e}}}}t.ZodMap=ae,ae.create=(e,t,r)=>new ae({valueType:t,keyType:e,typeName:Ee.ZodMap,...d(r)});class oe extends u{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==n.ZodParsedType.set)return(0,i.addIssueToContext)(r,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.set,received:r.parsedType}),i.INVALID;const a=this._def;null!==a.minSize&&r.data.size<a.minSize.value&&((0,i.addIssueToContext)(r,{code:s.ZodIssueCode.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),null!==a.maxSize&&r.data.size>a.maxSize.value&&((0,i.addIssueToContext)(r,{code:s.ZodIssueCode.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const o=this._def.valueType;function l(e){const r=new Set;for(const s of e){if("aborted"===s.status)return i.INVALID;"dirty"===s.status&&t.dirty(),r.add(s.value)}return{status:t.value,value:r}}const d=[...r.data.values()].map((e,t)=>o._parse(new c(r,e,r.path,t)));return r.common.async?Promise.all(d).then(e=>l(e)):l(d)}min(e,t){return new oe({...this._def,minSize:{value:e,message:o.errorUtil.toString(t)}})}max(e,t){return new oe({...this._def,maxSize:{value:e,message:o.errorUtil.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}t.ZodSet=oe,oe.create=(e,t)=>new oe({valueType:e,minSize:null,maxSize:null,typeName:Ee.ZodSet,...d(t)});class ie extends u{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==n.ZodParsedType.function)return(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.function,received:t.parsedType}),i.INVALID;function r(e,r){return(0,i.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,a.getErrorMap)(),a.defaultErrorMap].filter(e=>!!e),issueData:{code:s.ZodIssueCode.invalid_arguments,argumentsError:r}})}function o(e,r){return(0,i.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,a.getErrorMap)(),a.defaultErrorMap].filter(e=>!!e),issueData:{code:s.ZodIssueCode.invalid_return_type,returnTypeError:r}})}const c={errorMap:t.common.contextualErrorMap},l=t.data;if(this._def.returns instanceof he){const e=this;return(0,i.OK)(async function(...t){const a=new s.ZodError([]),i=await e._def.args.parseAsync(t,c).catch(e=>{throw a.addIssue(r(t,e)),a}),n=await Reflect.apply(l,this,i);return await e._def.returns._def.type.parseAsync(n,c).catch(e=>{throw a.addIssue(o(n,e)),a})})}{const e=this;return(0,i.OK)(function(...t){const a=e._def.args.safeParse(t,c);if(!a.success)throw new s.ZodError([r(t,a.error)]);const i=Reflect.apply(l,this,a.data),n=e._def.returns.safeParse(i,c);if(!n.success)throw new s.ZodError([o(i,n.error)]);return n.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ie({...this._def,args:re.create(e).rest(B.create())})}returns(e){return new ie({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new ie({args:e||re.create([]).rest(B.create()),returns:t||B.create(),typeName:Ee.ZodFunction,...d(r)})}}t.ZodFunction=ie;class ne extends u{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}t.ZodLazy=ne,ne.create=(e,t)=>new ne({getter:e,typeName:Ee.ZodLazy,...d(t)});class ce extends u{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return(0,i.addIssueToContext)(t,{received:t.data,code:s.ZodIssueCode.invalid_literal,expected:this._def.value}),i.INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}function le(e,t){return new de({values:e,typeName:Ee.ZodEnum,...d(t)})}t.ZodLiteral=ce,ce.create=(e,t)=>new ce({value:e,typeName:Ee.ZodLiteral,...d(t)});class de extends u{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return(0,i.addIssueToContext)(t,{expected:n.util.joinValues(r),received:t.parsedType,code:s.ZodIssueCode.invalid_type}),i.INVALID}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return(0,i.addIssueToContext)(t,{received:t.data,code:s.ZodIssueCode.invalid_enum_value,options:r}),i.INVALID}return(0,i.OK)(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return de.create(e,{...this._def,...t})}exclude(e,t=this._def){return de.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}t.ZodEnum=de,de.create=le;class ue extends u{_parse(e){const t=n.util.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==n.ZodParsedType.string&&r.parsedType!==n.ZodParsedType.number){const e=n.util.objectValues(t);return(0,i.addIssueToContext)(r,{expected:n.util.joinValues(e),received:r.parsedType,code:s.ZodIssueCode.invalid_type}),i.INVALID}if(this._cache||(this._cache=new Set(n.util.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=n.util.objectValues(t);return(0,i.addIssueToContext)(r,{received:r.data,code:s.ZodIssueCode.invalid_enum_value,options:e}),i.INVALID}return(0,i.OK)(e.data)}get enum(){return this._def.values}}t.ZodNativeEnum=ue,ue.create=(e,t)=>new ue({values:e,typeName:Ee.ZodNativeEnum,...d(t)});class he extends u{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==n.ZodParsedType.promise&&!1===t.common.async)return(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.promise,received:t.parsedType}),i.INVALID;const r=t.parsedType===n.ZodParsedType.promise?t.data:Promise.resolve(t.data);return(0,i.OK)(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}t.ZodPromise=he,he.create=(e,t)=>new he({type:e,typeName:Ee.ZodPromise,...d(t)});class pe extends u{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ee.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:e=>{(0,i.addIssueToContext)(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===s.type){const e=s.transform(r.data,a);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return i.INVALID;const s=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===s.status?i.INVALID:"dirty"===s.status||"dirty"===t.value?(0,i.DIRTY)(s.value):s});{if("aborted"===t.value)return i.INVALID;const s=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===s.status?i.INVALID:"dirty"===s.status||"dirty"===t.value?(0,i.DIRTY)(s.value):s}}if("refinement"===s.type){const e=e=>{const t=s.refinement(e,a);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===s.status?i.INVALID:("dirty"===s.status&&t.dirty(),e(s.value),{status:t.value,value:s.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?i.INVALID:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))))}if("transform"===s.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!(0,i.isValid)(e))return i.INVALID;const o=s.transform(e.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>(0,i.isValid)(e)?Promise.resolve(s.transform(e.value,a)).then(e=>({status:t.value,value:e})):i.INVALID)}n.util.assertNever(s)}}t.ZodEffects=pe,t.ZodTransformer=pe,pe.create=(e,t,r)=>new pe({schema:e,typeName:Ee.ZodEffects,effect:t,...d(r)}),pe.createWithPreprocess=(e,t,r)=>new pe({schema:t,effect:{type:"preprocess",transform:e},typeName:Ee.ZodEffects,...d(r)});class fe extends u{_parse(e){return this._getType(e)===n.ZodParsedType.undefined?(0,i.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t.ZodOptional=fe,fe.create=(e,t)=>new fe({innerType:e,typeName:Ee.ZodOptional,...d(t)});class me extends u{_parse(e){return this._getType(e)===n.ZodParsedType.null?(0,i.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t.ZodNullable=me,me.create=(e,t)=>new me({innerType:e,typeName:Ee.ZodNullable,...d(t)});class ve extends u{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===n.ZodParsedType.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}t.ZodDefault=ve,ve.create=(e,t)=>new ve({innerType:e,typeName:Ee.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...d(t)});class ge extends u{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return(0,i.isAsync)(a)?a.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new s.ZodError(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new s.ZodError(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}t.ZodCatch=ge,ge.create=(e,t)=>new ge({innerType:e,typeName:Ee.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...d(t)});class ye extends u{_parse(e){if(this._getType(e)!==n.ZodParsedType.nan){const t=this._getOrReturnCtx(e);return(0,i.addIssueToContext)(t,{code:s.ZodIssueCode.invalid_type,expected:n.ZodParsedType.nan,received:t.parsedType}),i.INVALID}return{status:"valid",value:e.data}}}t.ZodNaN=ye,ye.create=e=>new ye({typeName:Ee.ZodNaN,...d(e)}),t.BRAND=Symbol("zod_brand");class _e extends u{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}t.ZodBranded=_e;class be extends u{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?i.INVALID:"dirty"===e.status?(t.dirty(),(0,i.DIRTY)(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?i.INVALID:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new be({in:e,out:t,typeName:Ee.ZodPipeline})}}t.ZodPipeline=be;class Se extends u{_parse(e){const t=this._def.innerType._parse(e),r=e=>((0,i.isValid)(e)&&(e.value=Object.freeze(e.value)),e);return(0,i.isAsync)(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function we(e,t){const r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function Pe(e,t={},r){return e?V.create().superRefine((s,a)=>{const o=e(s);if(o instanceof Promise)return o.then(e=>{if(!e){const e=we(t,s),o=e.fatal??r??!0;a.addIssue({code:"custom",...e,fatal:o})}});if(!o){const e=we(t,s),o=e.fatal??r??!0;a.addIssue({code:"custom",...e,fatal:o})}}):V.create()}var Ee;t.ZodReadonly=Se,Se.create=(e,t)=>new Se({innerType:e,typeName:Ee.ZodReadonly,...d(t)}),t.late={object:J.lazycreate},function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Ee||(t.ZodFirstPartyTypeKind=Ee={})),t.instanceof=(e,t={message:`Input not instance of ${e.name}`})=>Pe(t=>t instanceof e,t);const xe=A.create;t.string=xe;const Re=L.create;t.number=Re;const Ce=ye.create;t.nan=Ce;const Te=$.create;t.bigint=Te;const Ie=U.create;t.boolean=Ie;const ke=Z.create;t.date=ke;const Oe=F.create;t.symbol=Oe;const ze=M.create;t.undefined=ze;const Ne=q.create;t.null=Ne;const je=V.create;t.any=je;const Ae=B.create;t.unknown=Ae;const De=H.create;t.never=De;const Le=W.create;t.void=Le;const $e=K.create;t.array=$e;const Ue=J.create;t.object=Ue;const Ze=J.strictCreate;t.strictObject=Ze;const Fe=G.create;t.union=Fe;const Me=X.create;t.discriminatedUnion=Me;const qe=te.create;t.intersection=qe;const Ve=re.create;t.tuple=Ve;const Be=se.create;t.record=Be;const He=ae.create;t.map=He;const We=oe.create;t.set=We;const Ke=ie.create;t.function=Ke;const Qe=ne.create;t.lazy=Qe;const Je=ce.create;t.literal=Je;const Ge=de.create;t.enum=Ge;const Ye=ue.create;t.nativeEnum=Ye;const Xe=he.create;t.promise=Xe;const et=pe.create;t.effect=et,t.transformer=et;const tt=fe.create;t.optional=tt;const rt=me.create;t.nullable=rt;const st=pe.createWithPreprocess;t.preprocess=st;const at=be.create;t.pipeline=at,t.ostring=()=>xe().optional(),t.onumber=()=>Re().optional(),t.oboolean=()=>Ie().optional(),t.coerce={string:e=>A.create({...e,coerce:!0}),number:e=>L.create({...e,coerce:!0}),boolean:e=>U.create({...e,coerce:!0}),bigint:e=>$.create({...e,coerce:!0}),date:e=>Z.create({...e,coerce:!0})},t.NEVER=i.INVALID},577:(e,t,r)=>{"use strict";let s;async function a(e){const t=await(await s).subtle.digest("SHA-256",(new TextEncoder).encode(e));return btoa(String.fromCharCode(...new Uint8Array(t))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}Object.defineProperty(t,"__esModule",{value:!0}),t.generateChallenge=a,t.default=async function(e){if(e||(e=43),e<43||e>128)throw`Expected a length between 43 and 128. Received ${e}.`;const t=await async function(e){return await async function(e){const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~";let r="";const a=await async function(e){return(await s).getRandomValues(new Uint8Array(e))}(e);for(let s=0;s<e;s++)r+=t[a[s]%66];return r}(e)}(e);return{code_verifier:t,code_challenge:await a(t)}},t.verifyChallenge=async function(e,t){return await a(e)===t},s=globalThis.crypto?.webcrypto??globalThis.crypto??Promise.resolve().then(r.t.bind(r,7598,23)).then(e=>e.webcrypto)},597:(e,t,r)=>{"use strict";const{kForOnEventAttribute:s,kListener:a}=r(2614),o=Symbol("kCode"),i=Symbol("kData"),n=Symbol("kError"),c=Symbol("kMessage"),l=Symbol("kReason"),d=Symbol("kTarget"),u=Symbol("kType"),h=Symbol("kWasClean");class p{constructor(e){this[d]=null,this[u]=e}get target(){return this[d]}get type(){return this[u]}}Object.defineProperty(p.prototype,"target",{enumerable:!0}),Object.defineProperty(p.prototype,"type",{enumerable:!0});class f extends p{constructor(e,t={}){super(e),this[o]=void 0===t.code?0:t.code,this[l]=void 0===t.reason?"":t.reason,this[h]=void 0!==t.wasClean&&t.wasClean}get code(){return this[o]}get reason(){return this[l]}get wasClean(){return this[h]}}Object.defineProperty(f.prototype,"code",{enumerable:!0}),Object.defineProperty(f.prototype,"reason",{enumerable:!0}),Object.defineProperty(f.prototype,"wasClean",{enumerable:!0});class m extends p{constructor(e,t={}){super(e),this[n]=void 0===t.error?null:t.error,this[c]=void 0===t.message?"":t.message}get error(){return this[n]}get message(){return this[c]}}Object.defineProperty(m.prototype,"error",{enumerable:!0}),Object.defineProperty(m.prototype,"message",{enumerable:!0});class v extends p{constructor(e,t={}){super(e),this[i]=void 0===t.data?null:t.data}get data(){return this[i]}}Object.defineProperty(v.prototype,"data",{enumerable:!0});const g={addEventListener(e,t,r={}){for(const o of this.listeners(e))if(!r[s]&&o[a]===t&&!o[s])return;let o;if("message"===e)o=function(e,r){const s=new v("message",{data:r?e:e.toString()});s[d]=this,y(t,this,s)};else if("close"===e)o=function(e,r){const s=new f("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});s[d]=this,y(t,this,s)};else if("error"===e)o=function(e){const r=new m("error",{error:e,message:e.message});r[d]=this,y(t,this,r)};else{if("open"!==e)return;o=function(){const e=new p("open");e[d]=this,y(t,this,e)}}o[s]=!!r[s],o[a]=t,r.once?this.once(e,o):this.on(e,o)},removeEventListener(e,t){for(const r of this.listeners(e))if(r[a]===t&&!r[s]){this.removeListener(e,r);break}}};function y(e,t,r){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,r):e.call(t,r)}e.exports={CloseEvent:f,ErrorEvent:m,Event:p,EventTarget:g,MessageEvent:v}},805:(e,t,r)=>{"use strict";var s=r(6579),a=r(2017),o=r(6489),i=r(2424),n=r(2775);function c(e,t,r){var s=this._refs[r];if("string"==typeof s){if(!this._refs[s])return c.call(this,e,t,s);s=this._refs[s]}if((s=s||this._schemas[r])instanceof i)return f(s.schema,this._opts.inlineRefs)?s.schema:s.validate||this._compile(s);var a,o,n,d=l.call(this,t,r);return d&&(a=d.schema,t=d.root,n=d.baseId),a instanceof i?o=a.validate||e.call(this,a.schema,t,void 0,n):void 0!==a&&(o=f(a,this._opts.inlineRefs)?a:e.call(this,a,t,void 0,n)),o}function l(e,t){var r=s.parse(t),a=y(r),o=g(this._getId(e.schema));if(0===Object.keys(e.schema).length||a!==o){var n=b(a),c=this._refs[n];if("string"==typeof c)return d.call(this,e,c,r);if(c instanceof i)c.validate||this._compile(c),e=c;else{if(!((c=this._schemas[n])instanceof i))return;if(c.validate||this._compile(c),n==b(t))return{schema:c,root:e,baseId:o};e=c}if(!e.schema)return;o=g(this._getId(e.schema))}return h.call(this,r,o,e.schema,e)}function d(e,t,r){var s=l.call(this,e,t);if(s){var a=s.schema,o=s.baseId;e=s.root;var i=this._getId(a);return i&&(o=S(o,i)),h.call(this,r,o,a,e)}}e.exports=c,c.normalizeId=b,c.fullPath=g,c.url=S,c.ids=function(e){var t=b(this._getId(e)),r={"":t},i={"":g(t,!1)},c={},l=this;return n(e,{allKeys:!0},function(e,t,n,d,u,h,p){if(""!==t){var f=l._getId(e),m=r[d],v=i[d]+"/"+u;if(void 0!==p&&(v+="/"+("number"==typeof p?p:o.escapeFragment(p))),"string"==typeof f){f=m=b(m?s.resolve(m,f):f);var g=l._refs[f];if("string"==typeof g&&(g=l._refs[g]),g&&g.schema){if(!a(e,g.schema))throw new Error('id "'+f+'" resolves to more than one schema')}else if(f!=b(v))if("#"==f[0]){if(c[f]&&!a(e,c[f]))throw new Error('id "'+f+'" resolves to more than one schema');c[f]=e}else l._refs[f]=v}r[t]=m,i[t]=v}}),c},c.inlineRef=f,c.schema=l;var u=o.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function h(e,t,r,s){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var a=e.fragment.split("/"),i=1;i<a.length;i++){var n=a[i];if(n){if(void 0===(r=r[n=o.unescapeFragment(n)]))break;var c;if(!u[n]&&((c=this._getId(r))&&(t=S(t,c)),r.$ref)){var d=S(t,r.$ref),h=l.call(this,s,d);h&&(r=h.schema,s=h.root,t=h.baseId)}}}return void 0!==r&&r!==s.schema?{schema:r,root:s,baseId:t}:void 0}}var p=o.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function f(e,t){return!1!==t&&(void 0===t||!0===t?m(e):t?v(e)<=t:void 0)}function m(e){var t;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==typeof(t=e[r])&&!m(t))return!1}else for(var s in e){if("$ref"==s)return!1;if("object"==typeof(t=e[s])&&!m(t))return!1}return!0}function v(e){var t,r=0;if(Array.isArray(e)){for(var s=0;s<e.length;s++)if("object"==typeof(t=e[s])&&(r+=v(t)),r==1/0)return 1/0}else for(var a in e){if("$ref"==a)return 1/0;if(p[a])r++;else if("object"==typeof(t=e[a])&&(r+=v(t)+1),r==1/0)return 1/0}return r}function g(e,t){return!1!==t&&(e=b(e)),y(s.parse(e))}function y(e){return s.serialize(e).split("#")[0]+"#"}var _=/#\/?$/;function b(e){return e?e.replace(_,""):""}function S(e,t){return t=b(t),s.resolve(e,t)}},819:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isAsync=t.isValid=t.isDirty=t.isAborted=t.OK=t.DIRTY=t.INVALID=t.ParseStatus=t.EMPTY_PATH=t.makeIssue=void 0,t.addIssueToContext=function(e,r){const s=(0,a.getErrorMap)(),i=(0,t.makeIssue)({issueData:r,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,s,s===o.default?void 0:o.default].filter(e=>!!e)});e.common.issues.push(i)};const a=r(9317),o=s(r(5653));t.makeIssue=e=>{const{data:t,path:r,errorMaps:s,issueData:a}=e,o=[...r,...a.path||[]],i={...a,path:o};if(void 0!==a.message)return{...a,path:o,message:a.message};let n="";const c=s.filter(e=>!!e).slice().reverse();for(const e of c)n=e(i,{data:t,defaultError:n}).message;return{...a,path:o,message:n}},t.EMPTY_PATH=[];class i{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,r){const s=[];for(const a of r){if("aborted"===a.status)return t.INVALID;"dirty"===a.status&&e.dirty(),s.push(a.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const r=[];for(const e of t){const t=await e.key,s=await e.value;r.push({key:t,value:s})}return i.mergeObjectSync(e,r)}static mergeObjectSync(e,r){const s={};for(const a of r){const{key:r,value:o}=a;if("aborted"===r.status)return t.INVALID;if("aborted"===o.status)return t.INVALID;"dirty"===r.status&&e.dirty(),"dirty"===o.status&&e.dirty(),"__proto__"===r.value||void 0===o.value&&!a.alwaysSet||(s[r.value]=o.value)}return{status:e.value,value:s}}}t.ParseStatus=i,t.INVALID=Object.freeze({status:"aborted"}),t.DIRTY=e=>({status:"dirty",value:e}),t.OK=e=>({status:"valid",value:e}),t.isAborted=e=>"aborted"===e.status,t.isDirty=e=>"dirty"===e.status,t.isValid=e=>"valid"===e.status,t.isAsync=e=>"undefined"!=typeof Promise&&e instanceof Promise},914:(e,t,r)=>{"use strict";const{Duplex:s}=r(2203),{randomFillSync:a}=r(6982),o=r(2971),{EMPTY_BUFFER:i,kWebSocket:n,NOOP:c}=r(2614),{isBlob:l,isValidStatusCode:d}=r(5880),{mask:u,toBuffer:h}=r(3338),p=Symbol("kByteLength"),f=Buffer.alloc(4),m=8192;let v,g=m;class y{constructor(e,t,r){this._extensions=t||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=c,this[n]=void 0}static frame(e,t){let r,s,o=!1,i=2,n=!1;t.mask&&(r=t.maskBuffer||f,t.generateMask?t.generateMask(r):(g===m&&(void 0===v&&(v=Buffer.alloc(m)),a(v,0,m),g=0),r[0]=v[g++],r[1]=v[g++],r[2]=v[g++],r[3]=v[g++]),n=0===(r[0]|r[1]|r[2]|r[3]),i=6),"string"==typeof e?s=t.mask&&!n||void 0===t[p]?(e=Buffer.from(e)).length:t[p]:(s=e.length,o=t.mask&&t.readOnly&&!n);let c=s;s>=65536?(i+=8,c=127):s>125&&(i+=2,c=126);const l=Buffer.allocUnsafe(o?s+i:i);return l[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(l[0]|=64),l[1]=c,126===c?l.writeUInt16BE(s,2):127===c&&(l[2]=l[3]=0,l.writeUIntBE(s,4,6)),t.mask?(l[1]|=128,l[i-4]=r[0],l[i-3]=r[1],l[i-2]=r[2],l[i-1]=r[3],n?[l,e]:o?(u(e,r,l,i,s),[l]):(u(e,r,e,0,s),[l,e])):[l,e]}close(e,t,r,s){let a;if(void 0===e)a=i;else{if("number"!=typeof e||!d(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const r=Buffer.byteLength(t);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");a=Buffer.allocUnsafe(2+r),a.writeUInt16BE(e,0),"string"==typeof t?a.write(t,2):a.set(t,2)}else a=Buffer.allocUnsafe(2),a.writeUInt16BE(e,0)}const o={[p]:a.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,a,!1,o,s]):this.sendFrame(y.frame(a,o),s)}ping(e,t,r){let s,a;if("string"==typeof e?(s=Buffer.byteLength(e),a=!1):l(e)?(s=e.size,a=!1):(s=(e=h(e)).length,a=h.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");const o={[p]:s,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:a,rsv1:!1};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,o,r]):this.getBlobData(e,!1,o,r):0!==this._state?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(y.frame(e,o),r)}pong(e,t,r){let s,a;if("string"==typeof e?(s=Buffer.byteLength(e),a=!1):l(e)?(s=e.size,a=!1):(s=(e=h(e)).length,a=h.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");const o={[p]:s,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:a,rsv1:!1};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,o,r]):this.getBlobData(e,!1,o,r):0!==this._state?this.enqueue([this.dispatch,e,!1,o,r]):this.sendFrame(y.frame(e,o),r)}send(e,t,r){const s=this._extensions[o.extensionName];let a,i,n=t.binary?2:1,c=t.compress;"string"==typeof e?(a=Buffer.byteLength(e),i=!1):l(e)?(a=e.size,i=!1):(a=(e=h(e)).length,i=h.readOnly),this._firstFragment?(this._firstFragment=!1,c&&s&&s.params[s._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(c=a>=s._threshold),this._compress=c):(c=!1,n=0),t.fin&&(this._firstFragment=!0);const d={[p]:a,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:n,readOnly:i,rsv1:c};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,this._compress,d,r]):this.getBlobData(e,this._compress,d,r):0!==this._state?this.enqueue([this.dispatch,e,this._compress,d,r]):this.dispatch(e,this._compress,d,r)}getBlobData(e,t,r,s){this._bufferedBytes+=r[p],this._state=2,e.arrayBuffer().then(e=>{if(this._socket.destroyed){const e=new Error("The socket was closed while the blob was being read");return void process.nextTick(_,this,e,s)}this._bufferedBytes-=r[p];const a=h(e);t?this.dispatch(a,t,r,s):(this._state=0,this.sendFrame(y.frame(a,r),s),this.dequeue())}).catch(e=>{process.nextTick(b,this,e,s)})}dispatch(e,t,r,s){if(!t)return void this.sendFrame(y.frame(e,r),s);const a=this._extensions[o.extensionName];this._bufferedBytes+=r[p],this._state=1,a.compress(e,r.fin,(e,t)=>{this._socket.destroyed?_(this,new Error("The socket was closed while data was being compressed"),s):(this._bufferedBytes-=r[p],this._state=0,r.readOnly=!1,this.sendFrame(y.frame(t,r),s),this.dequeue())})}dequeue(){for(;0===this._state&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[3][p],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][p],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}function _(e,t,r){"function"==typeof r&&r(t);for(let r=0;r<e._queue.length;r++){const s=e._queue[r],a=s[s.length-1];"function"==typeof a&&a(t)}}function b(e,t,r){_(e,t,r),e.onerror(t)}e.exports=y},1060:(e,t,r)=>{"use strict";const s=r(4434),a=r(5692),o=r(8611),i=r(9278),n=r(4756),{randomBytes:c,createHash:l}=r(6982),{Duplex:d,Readable:u}=r(2203),{URL:h}=r(7016),p=r(2971),f=r(6286),m=r(914),{isBlob:v}=r(5880),{BINARY_TYPES:g,EMPTY_BUFFER:y,GUID:_,kForOnEventAttribute:b,kListener:S,kStatusCode:w,kWebSocket:P,NOOP:E}=r(2614),{EventTarget:{addEventListener:x,removeEventListener:R}}=r(597),{format:C,parse:T}=r(5926),{toBuffer:I}=r(3338),k=Symbol("kAborted"),O=[8,13],z=["CONNECTING","OPEN","CLOSING","CLOSED"],N=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class j extends s{constructor(e,t,r){super(),this._binaryType=g[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=y,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=j.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),A(this,e,t,r)):(this._autoPong=r.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){g.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const s=new f({allowSynchronousEvents:r.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation}),a=new m(e,this._extensions,r.generateMask);this._receiver=s,this._sender=a,this._socket=e,s[P]=this,a[P]=this,e[P]=this,s.on("conclude",F),s.on("drain",M),s.on("error",q),s.on("message",B),s.on("ping",H),s.on("pong",W),a.onerror=Q,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",G),e.on("data",Y),e.on("end",X),e.on("error",ee),this._readyState=j.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=j.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[p.extensionName]&&this._extensions[p.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=j.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==j.CLOSED){if(this.readyState===j.CONNECTING){const e="WebSocket was closed before the connection was established";return void U(this,this._req,e)}this.readyState!==j.CLOSING?(this._readyState=j.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),J(this)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end()}}pause(){this.readyState!==j.CONNECTING&&this.readyState!==j.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,r){if(this.readyState===j.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===j.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||y,t,r)):Z(this,e,r)}pong(e,t,r){if(this.readyState===j.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===j.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||y,t,r)):Z(this,e,r)}resume(){this.readyState!==j.CONNECTING&&this.readyState!==j.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,r){if(this.readyState===j.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==j.OPEN)return void Z(this,e,r);const s={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[p.extensionName]||(s.compress=!1),this._sender.send(e||y,s,r)}terminate(){if(this.readyState!==j.CLOSED){if(this.readyState===j.CONNECTING){const e="WebSocket was closed before the connection was established";return void U(this,this._req,e)}this._socket&&(this._readyState=j.CLOSING,this._socket.destroy())}}}function A(e,t,r,s){const i={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:O[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...s,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(e._autoPong=i.autoPong,!O.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${O.join(", ")})`);let n;if(t instanceof h)n=t;else try{n=new h(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}"http:"===n.protocol?n.protocol="ws:":"https:"===n.protocol&&(n.protocol="wss:"),e._url=n.href;const d="wss:"===n.protocol,u="ws+unix:"===n.protocol;let f;if("ws:"===n.protocol||d||u?u&&!n.pathname?f="The URL's pathname is empty":n.hash&&(f="The URL contains a fragment identifier"):f='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"',f){const t=new SyntaxError(f);if(0===e._redirects)throw t;return void D(e,t)}const m=d?443:80,v=c(16).toString("base64"),g=d?a.request:o.request,y=new Set;let b,S;if(i.createConnection=i.createConnection||(d?$:L),i.defaultPort=i.defaultPort||m,i.port=n.port||m,i.host=n.hostname.startsWith("[")?n.hostname.slice(1,-1):n.hostname,i.headers={...i.headers,"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":v,Connection:"Upgrade",Upgrade:"websocket"},i.path=n.pathname+n.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(b=new p(!0!==i.perMessageDeflate?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=C({[p.extensionName]:b.offer()})),r.length){for(const e of r){if("string"!=typeof e||!N.test(e)||y.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");y.add(e)}i.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(n.username||n.password)&&(i.auth=`${n.username}:${n.password}`),u){const e=i.path.split(":");i.socketPath=e[0],i.path=e[1]}if(i.followRedirects){if(0===e._redirects){e._originalIpc=u,e._originalSecure=d,e._originalHostOrSocketPath=u?i.socketPath:n.host;const t=s&&s.headers;if(s={...s,headers:{}},t)for(const[e,r]of Object.entries(t))s.headers[e.toLowerCase()]=r}else if(0===e.listenerCount("redirect")){const t=u?!!e._originalIpc&&i.socketPath===e._originalHostOrSocketPath:!e._originalIpc&&n.host===e._originalHostOrSocketPath;(!t||e._originalSecure&&!d)&&(delete i.headers.authorization,delete i.headers.cookie,t||delete i.headers.host,i.auth=void 0)}i.auth&&!s.headers.authorization&&(s.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),S=e._req=g(i),e._redirects&&e.emit("redirect",e.url,S)}else S=e._req=g(i);i.timeout&&S.on("timeout",()=>{U(e,S,"Opening handshake has timed out")}),S.on("error",t=>{null===S||S[k]||(S=e._req=null,D(e,t))}),S.on("response",a=>{const o=a.headers.location,n=a.statusCode;if(o&&i.followRedirects&&n>=300&&n<400){if(++e._redirects>i.maxRedirects)return void U(e,S,"Maximum redirects exceeded");let a;S.abort();try{a=new h(o,t)}catch(t){const r=new SyntaxError(`Invalid URL: ${o}`);return void D(e,r)}A(e,a,r,s)}else e.emit("unexpected-response",S,a)||U(e,S,`Unexpected server response: ${a.statusCode}`)}),S.on("upgrade",(t,r,s)=>{if(e.emit("upgrade",t),e.readyState!==j.CONNECTING)return;S=e._req=null;const a=t.headers.upgrade;if(void 0===a||"websocket"!==a.toLowerCase())return void U(e,r,"Invalid Upgrade header");const o=l("sha1").update(v+_).digest("base64");if(t.headers["sec-websocket-accept"]!==o)return void U(e,r,"Invalid Sec-WebSocket-Accept header");const n=t.headers["sec-websocket-protocol"];let c;if(void 0!==n?y.size?y.has(n)||(c="Server sent an invalid subprotocol"):c="Server sent a subprotocol but none was requested":y.size&&(c="Server sent no subprotocol"),c)return void U(e,r,c);n&&(e._protocol=n);const d=t.headers["sec-websocket-extensions"];if(void 0!==d){if(!b)return void U(e,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");let t;try{t=T(d)}catch(t){return void U(e,r,"Invalid Sec-WebSocket-Extensions header")}const s=Object.keys(t);if(1!==s.length||s[0]!==p.extensionName)return void U(e,r,"Server indicated an extension that was not requested");try{b.accept(t[p.extensionName])}catch(t){return void U(e,r,"Invalid Sec-WebSocket-Extensions header")}e._extensions[p.extensionName]=b}e.setSocket(r,s,{allowSynchronousEvents:i.allowSynchronousEvents,generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})}),i.finishRequest?i.finishRequest(S,e):S.end()}function D(e,t){e._readyState=j.CLOSING,e._errorEmitted=!0,e.emit("error",t),e.emitClose()}function L(e){return e.path=e.socketPath,i.connect(e)}function $(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=i.isIP(e.host)?"":e.host),n.connect(e)}function U(e,t,r){e._readyState=j.CLOSING;const s=new Error(r);Error.captureStackTrace(s,U),t.setHeader?(t[k]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(D,e,s)):(t.destroy(s),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function Z(e,t,r){if(t){const r=v(t)?t.size:I(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){const t=new Error(`WebSocket is not open: readyState ${e.readyState} (${z[e.readyState]})`);process.nextTick(r,t)}}function F(e,t){const r=this[P];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[P]&&(r._socket.removeListener("data",Y),process.nextTick(K,r._socket),1005===e?r.close():r.close(e,t))}function M(){const e=this[P];e.isPaused||e._socket.resume()}function q(e){const t=this[P];void 0!==t._socket[P]&&(t._socket.removeListener("data",Y),process.nextTick(K,t._socket),t.close(e[w])),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e))}function V(){this[P].emitClose()}function B(e,t){this[P].emit("message",e,t)}function H(e){const t=this[P];t._autoPong&&t.pong(e,!this._isServer,E),t.emit("ping",e)}function W(e){this[P].emit("pong",e)}function K(e){e.resume()}function Q(e){const t=this[P];t.readyState!==j.CLOSED&&(t.readyState===j.OPEN&&(t._readyState=j.CLOSING,J(t)),this._socket.end(),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e)))}function J(e){e._closeTimer=setTimeout(e._socket.destroy.bind(e._socket),3e4)}function G(){const e=this[P];let t;this.removeListener("close",G),this.removeListener("data",Y),this.removeListener("end",X),e._readyState=j.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[P]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",V),e._receiver.on("finish",V))}function Y(e){this[P]._receiver.write(e)||this.pause()}function X(){const e=this[P];e._readyState=j.CLOSING,e._receiver.end(),this.end()}function ee(){const e=this[P];this.removeListener("error",ee),this.on("error",E),e&&(e._readyState=j.CLOSING,this.destroy())}Object.defineProperty(j,"CONNECTING",{enumerable:!0,value:z.indexOf("CONNECTING")}),Object.defineProperty(j.prototype,"CONNECTING",{enumerable:!0,value:z.indexOf("CONNECTING")}),Object.defineProperty(j,"OPEN",{enumerable:!0,value:z.indexOf("OPEN")}),Object.defineProperty(j.prototype,"OPEN",{enumerable:!0,value:z.indexOf("OPEN")}),Object.defineProperty(j,"CLOSING",{enumerable:!0,value:z.indexOf("CLOSING")}),Object.defineProperty(j.prototype,"CLOSING",{enumerable:!0,value:z.indexOf("CLOSING")}),Object.defineProperty(j,"CLOSED",{enumerable:!0,value:z.indexOf("CLOSED")}),Object.defineProperty(j.prototype,"CLOSED",{enumerable:!0,value:z.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(e=>{Object.defineProperty(j.prototype,e,{enumerable:!0})}),["open","error","close","message"].forEach(e=>{Object.defineProperty(j.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[b])return t[S];return null},set(t){for(const t of this.listeners(e))if(t[b]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[b]:!0})}})}),j.prototype.addEventListener=x,j.prototype.removeEventListener=R,e.exports=j},1147:(e,t,r)=>{var s;function a(e,t,r){if("function"==typeof t&&(r=t,t={}),!r){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise(function(r,s){a(e,t||{},function(e,t){e?s(e):r(t)})})}s(e,t||{},function(e,s){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,s=!1),r(e,s)})}r(9896),s="win32"===process.platform||global.TESTING_WINDOWS?r(438):r(96),e.exports=a,a.sync=function(e,t){try{return s.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}},1152:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(6982);t.default={randomUUID:s.randomUUID}},1175:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OAuthTokenRevocationRequestSchema=t.OAuthClientRegistrationErrorSchema=t.OAuthClientInformationFullSchema=t.OAuthClientInformationSchema=t.OAuthClientMetadataSchema=t.OAuthErrorResponseSchema=t.OAuthTokensSchema=t.OAuthMetadataSchema=t.OAuthProtectedResourceMetadataSchema=void 0;const s=r(7552);t.OAuthProtectedResourceMetadataSchema=s.z.object({resource:s.z.string().url(),authorization_servers:s.z.array(s.z.string().url()).optional(),jwks_uri:s.z.string().url().optional(),scopes_supported:s.z.array(s.z.string()).optional(),bearer_methods_supported:s.z.array(s.z.string()).optional(),resource_signing_alg_values_supported:s.z.array(s.z.string()).optional(),resource_name:s.z.string().optional(),resource_documentation:s.z.string().optional(),resource_policy_uri:s.z.string().url().optional(),resource_tos_uri:s.z.string().url().optional(),tls_client_certificate_bound_access_tokens:s.z.boolean().optional(),authorization_details_types_supported:s.z.array(s.z.string()).optional(),dpop_signing_alg_values_supported:s.z.array(s.z.string()).optional(),dpop_bound_access_tokens_required:s.z.boolean().optional()}).passthrough(),t.OAuthMetadataSchema=s.z.object({issuer:s.z.string(),authorization_endpoint:s.z.string(),token_endpoint:s.z.string(),registration_endpoint:s.z.string().optional(),scopes_supported:s.z.array(s.z.string()).optional(),response_types_supported:s.z.array(s.z.string()),response_modes_supported:s.z.array(s.z.string()).optional(),grant_types_supported:s.z.array(s.z.string()).optional(),token_endpoint_auth_methods_supported:s.z.array(s.z.string()).optional(),token_endpoint_auth_signing_alg_values_supported:s.z.array(s.z.string()).optional(),service_documentation:s.z.string().optional(),revocation_endpoint:s.z.string().optional(),revocation_endpoint_auth_methods_supported:s.z.array(s.z.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:s.z.array(s.z.string()).optional(),introspection_endpoint:s.z.string().optional(),introspection_endpoint_auth_methods_supported:s.z.array(s.z.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:s.z.array(s.z.string()).optional(),code_challenge_methods_supported:s.z.array(s.z.string()).optional()}).passthrough(),t.OAuthTokensSchema=s.z.object({access_token:s.z.string(),token_type:s.z.string(),expires_in:s.z.number().optional(),scope:s.z.string().optional(),refresh_token:s.z.string().optional()}).strip(),t.OAuthErrorResponseSchema=s.z.object({error:s.z.string(),error_description:s.z.string().optional(),error_uri:s.z.string().optional()}),t.OAuthClientMetadataSchema=s.z.object({redirect_uris:s.z.array(s.z.string()).refine(e=>e.every(e=>URL.canParse(e)),{message:"redirect_uris must contain valid URLs"}),token_endpoint_auth_method:s.z.string().optional(),grant_types:s.z.array(s.z.string()).optional(),response_types:s.z.array(s.z.string()).optional(),client_name:s.z.string().optional(),client_uri:s.z.string().optional(),logo_uri:s.z.string().optional(),scope:s.z.string().optional(),contacts:s.z.array(s.z.string()).optional(),tos_uri:s.z.string().optional(),policy_uri:s.z.string().optional(),jwks_uri:s.z.string().optional(),jwks:s.z.any().optional(),software_id:s.z.string().optional(),software_version:s.z.string().optional(),software_statement:s.z.string().optional()}).strip(),t.OAuthClientInformationSchema=s.z.object({client_id:s.z.string(),client_secret:s.z.string().optional(),client_id_issued_at:s.z.number().optional(),client_secret_expires_at:s.z.number().optional()}).strip(),t.OAuthClientInformationFullSchema=t.OAuthClientMetadataSchema.merge(t.OAuthClientInformationSchema),t.OAuthClientRegistrationErrorSchema=s.z.object({error:s.z.string(),error_description:s.z.string().optional()}).strip(),t.OAuthTokenRevocationRequestSchema=s.z.object({token:s.z.string(),token_type_hint:s.z.string().optional()}).strip()},1294:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnsubscribeRequestSchema=t.SubscribeRequestSchema=t.ResourceListChangedNotificationSchema=t.ReadResourceResultSchema=t.ReadResourceRequestSchema=t.ListResourceTemplatesResultSchema=t.ListResourceTemplatesRequestSchema=t.ListResourcesResultSchema=t.ListResourcesRequestSchema=t.ResourceTemplateSchema=t.ResourceSchema=t.BlobResourceContentsSchema=t.TextResourceContentsSchema=t.ResourceContentsSchema=t.PaginatedResultSchema=t.PaginatedRequestSchema=t.ProgressNotificationSchema=t.ProgressSchema=t.PingRequestSchema=t.isInitializedNotification=t.InitializedNotificationSchema=t.InitializeResultSchema=t.ServerCapabilitiesSchema=t.isInitializeRequest=t.InitializeRequestSchema=t.ClientCapabilitiesSchema=t.ImplementationSchema=t.BaseMetadataSchema=t.CancelledNotificationSchema=t.EmptyResultSchema=t.JSONRPCMessageSchema=t.isJSONRPCError=t.JSONRPCErrorSchema=t.ErrorCode=t.isJSONRPCResponse=t.JSONRPCResponseSchema=t.isJSONRPCNotification=t.JSONRPCNotificationSchema=t.isJSONRPCRequest=t.JSONRPCRequestSchema=t.RequestIdSchema=t.ResultSchema=t.NotificationSchema=t.RequestSchema=t.CursorSchema=t.ProgressTokenSchema=t.JSONRPC_VERSION=t.SUPPORTED_PROTOCOL_VERSIONS=t.DEFAULT_NEGOTIATED_PROTOCOL_VERSION=t.LATEST_PROTOCOL_VERSION=void 0,t.ClientResultSchema=t.ClientNotificationSchema=t.ClientRequestSchema=t.RootsListChangedNotificationSchema=t.ListRootsResultSchema=t.ListRootsRequestSchema=t.RootSchema=t.CompleteResultSchema=t.CompleteRequestSchema=t.PromptReferenceSchema=t.ResourceReferenceSchema=t.ResourceTemplateReferenceSchema=t.ElicitResultSchema=t.ElicitRequestSchema=t.PrimitiveSchemaDefinitionSchema=t.EnumSchemaSchema=t.NumberSchemaSchema=t.StringSchemaSchema=t.BooleanSchemaSchema=t.CreateMessageResultSchema=t.CreateMessageRequestSchema=t.SamplingMessageSchema=t.ModelPreferencesSchema=t.ModelHintSchema=t.LoggingMessageNotificationSchema=t.SetLevelRequestSchema=t.LoggingLevelSchema=t.ToolListChangedNotificationSchema=t.CallToolRequestSchema=t.CompatibilityCallToolResultSchema=t.CallToolResultSchema=t.ListToolsResultSchema=t.ListToolsRequestSchema=t.ToolSchema=t.ToolAnnotationsSchema=t.PromptListChangedNotificationSchema=t.GetPromptResultSchema=t.PromptMessageSchema=t.ContentBlockSchema=t.ResourceLinkSchema=t.EmbeddedResourceSchema=t.AudioContentSchema=t.ImageContentSchema=t.TextContentSchema=t.GetPromptRequestSchema=t.ListPromptsResultSchema=t.ListPromptsRequestSchema=t.PromptSchema=t.PromptArgumentSchema=t.ResourceUpdatedNotificationSchema=void 0,t.McpError=t.ServerResultSchema=t.ServerNotificationSchema=t.ServerRequestSchema=void 0;const s=r(7552);t.LATEST_PROTOCOL_VERSION="2025-06-18",t.DEFAULT_NEGOTIATED_PROTOCOL_VERSION="2025-03-26",t.SUPPORTED_PROTOCOL_VERSIONS=[t.LATEST_PROTOCOL_VERSION,"2025-03-26","2024-11-05","2024-10-07"],t.JSONRPC_VERSION="2.0",t.ProgressTokenSchema=s.z.union([s.z.string(),s.z.number().int()]),t.CursorSchema=s.z.string();const a=s.z.object({progressToken:s.z.optional(t.ProgressTokenSchema)}).passthrough(),o=s.z.object({_meta:s.z.optional(a)}).passthrough();t.RequestSchema=s.z.object({method:s.z.string(),params:s.z.optional(o)});const i=s.z.object({_meta:s.z.optional(s.z.object({}).passthrough())}).passthrough();var n;t.NotificationSchema=s.z.object({method:s.z.string(),params:s.z.optional(i)}),t.ResultSchema=s.z.object({_meta:s.z.optional(s.z.object({}).passthrough())}).passthrough(),t.RequestIdSchema=s.z.union([s.z.string(),s.z.number().int()]),t.JSONRPCRequestSchema=s.z.object({jsonrpc:s.z.literal(t.JSONRPC_VERSION),id:t.RequestIdSchema}).merge(t.RequestSchema).strict(),t.isJSONRPCRequest=e=>t.JSONRPCRequestSchema.safeParse(e).success,t.JSONRPCNotificationSchema=s.z.object({jsonrpc:s.z.literal(t.JSONRPC_VERSION)}).merge(t.NotificationSchema).strict(),t.isJSONRPCNotification=e=>t.JSONRPCNotificationSchema.safeParse(e).success,t.JSONRPCResponseSchema=s.z.object({jsonrpc:s.z.literal(t.JSONRPC_VERSION),id:t.RequestIdSchema,result:t.ResultSchema}).strict(),t.isJSONRPCResponse=e=>t.JSONRPCResponseSchema.safeParse(e).success,function(e){e[e.ConnectionClosed=-32e3]="ConnectionClosed",e[e.RequestTimeout=-32001]="RequestTimeout",e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError"}(n||(t.ErrorCode=n={})),t.JSONRPCErrorSchema=s.z.object({jsonrpc:s.z.literal(t.JSONRPC_VERSION),id:t.RequestIdSchema,error:s.z.object({code:s.z.number().int(),message:s.z.string(),data:s.z.optional(s.z.unknown())})}).strict(),t.isJSONRPCError=e=>t.JSONRPCErrorSchema.safeParse(e).success,t.JSONRPCMessageSchema=s.z.union([t.JSONRPCRequestSchema,t.JSONRPCNotificationSchema,t.JSONRPCResponseSchema,t.JSONRPCErrorSchema]),t.EmptyResultSchema=t.ResultSchema.strict(),t.CancelledNotificationSchema=t.NotificationSchema.extend({method:s.z.literal("notifications/cancelled"),params:i.extend({requestId:t.RequestIdSchema,reason:s.z.string().optional()})}),t.BaseMetadataSchema=s.z.object({name:s.z.string(),title:s.z.optional(s.z.string())}).passthrough(),t.ImplementationSchema=t.BaseMetadataSchema.extend({version:s.z.string()}),t.ClientCapabilitiesSchema=s.z.object({experimental:s.z.optional(s.z.object({}).passthrough()),sampling:s.z.optional(s.z.object({}).passthrough()),elicitation:s.z.optional(s.z.object({}).passthrough()),roots:s.z.optional(s.z.object({listChanged:s.z.optional(s.z.boolean())}).passthrough())}).passthrough(),t.InitializeRequestSchema=t.RequestSchema.extend({method:s.z.literal("initialize"),params:o.extend({protocolVersion:s.z.string(),capabilities:t.ClientCapabilitiesSchema,clientInfo:t.ImplementationSchema})}),t.isInitializeRequest=e=>t.InitializeRequestSchema.safeParse(e).success,t.ServerCapabilitiesSchema=s.z.object({experimental:s.z.optional(s.z.object({}).passthrough()),logging:s.z.optional(s.z.object({}).passthrough()),completions:s.z.optional(s.z.object({}).passthrough()),prompts:s.z.optional(s.z.object({listChanged:s.z.optional(s.z.boolean())}).passthrough()),resources:s.z.optional(s.z.object({subscribe:s.z.optional(s.z.boolean()),listChanged:s.z.optional(s.z.boolean())}).passthrough()),tools:s.z.optional(s.z.object({listChanged:s.z.optional(s.z.boolean())}).passthrough())}).passthrough(),t.InitializeResultSchema=t.ResultSchema.extend({protocolVersion:s.z.string(),capabilities:t.ServerCapabilitiesSchema,serverInfo:t.ImplementationSchema,instructions:s.z.optional(s.z.string())}),t.InitializedNotificationSchema=t.NotificationSchema.extend({method:s.z.literal("notifications/initialized")}),t.isInitializedNotification=e=>t.InitializedNotificationSchema.safeParse(e).success,t.PingRequestSchema=t.RequestSchema.extend({method:s.z.literal("ping")}),t.ProgressSchema=s.z.object({progress:s.z.number(),total:s.z.optional(s.z.number()),message:s.z.optional(s.z.string())}).passthrough(),t.ProgressNotificationSchema=t.NotificationSchema.extend({method:s.z.literal("notifications/progress"),params:i.merge(t.ProgressSchema).extend({progressToken:t.ProgressTokenSchema})}),t.PaginatedRequestSchema=t.RequestSchema.extend({params:o.extend({cursor:s.z.optional(t.CursorSchema)}).optional()}),t.PaginatedResultSchema=t.ResultSchema.extend({nextCursor:s.z.optional(t.CursorSchema)}),t.ResourceContentsSchema=s.z.object({uri:s.z.string(),mimeType:s.z.optional(s.z.string()),_meta:s.z.optional(s.z.object({}).passthrough())}).passthrough(),t.TextResourceContentsSchema=t.ResourceContentsSchema.extend({text:s.z.string()}),t.BlobResourceContentsSchema=t.ResourceContentsSchema.extend({blob:s.z.string().base64()}),t.ResourceSchema=t.BaseMetadataSchema.extend({uri:s.z.string(),description:s.z.optional(s.z.string()),mimeType:s.z.optional(s.z.string()),_meta:s.z.optional(s.z.object({}).passthrough())}),t.ResourceTemplateSchema=t.BaseMetadataSchema.extend({uriTemplate:s.z.string(),description:s.z.optional(s.z.string()),mimeType:s.z.optional(s.z.string()),_meta:s.z.optional(s.z.object({}).passthrough())}),t.ListResourcesRequestSchema=t.PaginatedRequestSchema.extend({method:s.z.literal("resources/list")}),t.ListResourcesResultSchema=t.PaginatedResultSchema.extend({resources:s.z.array(t.ResourceSchema)}),t.ListResourceTemplatesRequestSchema=t.PaginatedRequestSchema.extend({method:s.z.literal("resources/templates/list")}),t.ListResourceTemplatesResultSchema=t.PaginatedResultSchema.extend({resourceTemplates:s.z.array(t.ResourceTemplateSchema)}),t.ReadResourceRequestSchema=t.RequestSchema.extend({method:s.z.literal("resources/read"),params:o.extend({uri:s.z.string()})}),t.ReadResourceResultSchema=t.ResultSchema.extend({contents:s.z.array(s.z.union([t.TextResourceContentsSchema,t.BlobResourceContentsSchema]))}),t.ResourceListChangedNotificationSchema=t.NotificationSchema.extend({method:s.z.literal("notifications/resources/list_changed")}),t.SubscribeRequestSchema=t.RequestSchema.extend({method:s.z.literal("resources/subscribe"),params:o.extend({uri:s.z.string()})}),t.UnsubscribeRequestSchema=t.RequestSchema.extend({method:s.z.literal("resources/unsubscribe"),params:o.extend({uri:s.z.string()})}),t.ResourceUpdatedNotificationSchema=t.NotificationSchema.extend({method:s.z.literal("notifications/resources/updated"),params:i.extend({uri:s.z.string()})}),t.PromptArgumentSchema=s.z.object({name:s.z.string(),description:s.z.optional(s.z.string()),required:s.z.optional(s.z.boolean())}).passthrough(),t.PromptSchema=t.BaseMetadataSchema.extend({description:s.z.optional(s.z.string()),arguments:s.z.optional(s.z.array(t.PromptArgumentSchema)),_meta:s.z.optional(s.z.object({}).passthrough())}),t.ListPromptsRequestSchema=t.PaginatedRequestSchema.extend({method:s.z.literal("prompts/list")}),t.ListPromptsResultSchema=t.PaginatedResultSchema.extend({prompts:s.z.array(t.PromptSchema)}),t.GetPromptRequestSchema=t.RequestSchema.extend({method:s.z.literal("prompts/get"),params:o.extend({name:s.z.string(),arguments:s.z.optional(s.z.record(s.z.string()))})}),t.TextContentSchema=s.z.object({type:s.z.literal("text"),text:s.z.string(),_meta:s.z.optional(s.z.object({}).passthrough())}).passthrough(),t.ImageContentSchema=s.z.object({type:s.z.literal("image"),data:s.z.string().base64(),mimeType:s.z.string(),_meta:s.z.optional(s.z.object({}).passthrough())}).passthrough(),t.AudioContentSchema=s.z.object({type:s.z.literal("audio"),data:s.z.string().base64(),mimeType:s.z.string(),_meta:s.z.optional(s.z.object({}).passthrough())}).passthrough(),t.EmbeddedResourceSchema=s.z.object({type:s.z.literal("resource"),resource:s.z.union([t.TextResourceContentsSchema,t.BlobResourceContentsSchema]),_meta:s.z.optional(s.z.object({}).passthrough())}).passthrough(),t.ResourceLinkSchema=t.ResourceSchema.extend({type:s.z.literal("resource_link")}),t.ContentBlockSchema=s.z.union([t.TextContentSchema,t.ImageContentSchema,t.AudioContentSchema,t.ResourceLinkSchema,t.EmbeddedResourceSchema]),t.PromptMessageSchema=s.z.object({role:s.z.enum(["user","assistant"]),content:t.ContentBlockSchema}).passthrough(),t.GetPromptResultSchema=t.ResultSchema.extend({description:s.z.optional(s.z.string()),messages:s.z.array(t.PromptMessageSchema)}),t.PromptListChangedNotificationSchema=t.NotificationSchema.extend({method:s.z.literal("notifications/prompts/list_changed")}),t.ToolAnnotationsSchema=s.z.object({title:s.z.optional(s.z.string()),readOnlyHint:s.z.optional(s.z.boolean()),destructiveHint:s.z.optional(s.z.boolean()),idempotentHint:s.z.optional(s.z.boolean()),openWorldHint:s.z.optional(s.z.boolean())}).passthrough(),t.ToolSchema=t.BaseMetadataSchema.extend({description:s.z.optional(s.z.string()),inputSchema:s.z.object({type:s.z.literal("object"),properties:s.z.optional(s.z.object({}).passthrough()),required:s.z.optional(s.z.array(s.z.string()))}).passthrough(),outputSchema:s.z.optional(s.z.object({type:s.z.literal("object"),properties:s.z.optional(s.z.object({}).passthrough()),required:s.z.optional(s.z.array(s.z.string()))}).passthrough()),annotations:s.z.optional(t.ToolAnnotationsSchema),_meta:s.z.optional(s.z.object({}).passthrough())}),t.ListToolsRequestSchema=t.PaginatedRequestSchema.extend({method:s.z.literal("tools/list")}),t.ListToolsResultSchema=t.PaginatedResultSchema.extend({tools:s.z.array(t.ToolSchema)}),t.CallToolResultSchema=t.ResultSchema.extend({content:s.z.array(t.ContentBlockSchema).default([]),structuredContent:s.z.object({}).passthrough().optional(),isError:s.z.optional(s.z.boolean())}),t.CompatibilityCallToolResultSchema=t.CallToolResultSchema.or(t.ResultSchema.extend({toolResult:s.z.unknown()})),t.CallToolRequestSchema=t.RequestSchema.extend({method:s.z.literal("tools/call"),params:o.extend({name:s.z.string(),arguments:s.z.optional(s.z.record(s.z.unknown()))})}),t.ToolListChangedNotificationSchema=t.NotificationSchema.extend({method:s.z.literal("notifications/tools/list_changed")}),t.LoggingLevelSchema=s.z.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),t.SetLevelRequestSchema=t.RequestSchema.extend({method:s.z.literal("logging/setLevel"),params:o.extend({level:t.LoggingLevelSchema})}),t.LoggingMessageNotificationSchema=t.NotificationSchema.extend({method:s.z.literal("notifications/message"),params:i.extend({level:t.LoggingLevelSchema,logger:s.z.optional(s.z.string()),data:s.z.unknown()})}),t.ModelHintSchema=s.z.object({name:s.z.string().optional()}).passthrough(),t.ModelPreferencesSchema=s.z.object({hints:s.z.optional(s.z.array(t.ModelHintSchema)),costPriority:s.z.optional(s.z.number().min(0).max(1)),speedPriority:s.z.optional(s.z.number().min(0).max(1)),intelligencePriority:s.z.optional(s.z.number().min(0).max(1))}).passthrough(),t.SamplingMessageSchema=s.z.object({role:s.z.enum(["user","assistant"]),content:s.z.union([t.TextContentSchema,t.ImageContentSchema,t.AudioContentSchema])}).passthrough(),t.CreateMessageRequestSchema=t.RequestSchema.extend({method:s.z.literal("sampling/createMessage"),params:o.extend({messages:s.z.array(t.SamplingMessageSchema),systemPrompt:s.z.optional(s.z.string()),includeContext:s.z.optional(s.z.enum(["none","thisServer","allServers"])),temperature:s.z.optional(s.z.number()),maxTokens:s.z.number().int(),stopSequences:s.z.optional(s.z.array(s.z.string())),metadata:s.z.optional(s.z.object({}).passthrough()),modelPreferences:s.z.optional(t.ModelPreferencesSchema)})}),t.CreateMessageResultSchema=t.ResultSchema.extend({model:s.z.string(),stopReason:s.z.optional(s.z.enum(["endTurn","stopSequence","maxTokens"]).or(s.z.string())),role:s.z.enum(["user","assistant"]),content:s.z.discriminatedUnion("type",[t.TextContentSchema,t.ImageContentSchema,t.AudioContentSchema])}),t.BooleanSchemaSchema=s.z.object({type:s.z.literal("boolean"),title:s.z.optional(s.z.string()),description:s.z.optional(s.z.string()),default:s.z.optional(s.z.boolean())}).passthrough(),t.StringSchemaSchema=s.z.object({type:s.z.literal("string"),title:s.z.optional(s.z.string()),description:s.z.optional(s.z.string()),minLength:s.z.optional(s.z.number()),maxLength:s.z.optional(s.z.number()),format:s.z.optional(s.z.enum(["email","uri","date","date-time"]))}).passthrough(),t.NumberSchemaSchema=s.z.object({type:s.z.enum(["number","integer"]),title:s.z.optional(s.z.string()),description:s.z.optional(s.z.string()),minimum:s.z.optional(s.z.number()),maximum:s.z.optional(s.z.number())}).passthrough(),t.EnumSchemaSchema=s.z.object({type:s.z.literal("string"),title:s.z.optional(s.z.string()),description:s.z.optional(s.z.string()),enum:s.z.array(s.z.string()),enumNames:s.z.optional(s.z.array(s.z.string()))}).passthrough(),t.PrimitiveSchemaDefinitionSchema=s.z.union([t.BooleanSchemaSchema,t.StringSchemaSchema,t.NumberSchemaSchema,t.EnumSchemaSchema]),t.ElicitRequestSchema=t.RequestSchema.extend({method:s.z.literal("elicitation/create"),params:o.extend({message:s.z.string(),requestedSchema:s.z.object({type:s.z.literal("object"),properties:s.z.record(s.z.string(),t.PrimitiveSchemaDefinitionSchema),required:s.z.optional(s.z.array(s.z.string()))}).passthrough()})}),t.ElicitResultSchema=t.ResultSchema.extend({action:s.z.enum(["accept","decline","cancel"]),content:s.z.optional(s.z.record(s.z.string(),s.z.unknown()))}),t.ResourceTemplateReferenceSchema=s.z.object({type:s.z.literal("ref/resource"),uri:s.z.string()}).passthrough(),t.ResourceReferenceSchema=t.ResourceTemplateReferenceSchema,t.PromptReferenceSchema=s.z.object({type:s.z.literal("ref/prompt"),name:s.z.string()}).passthrough(),t.CompleteRequestSchema=t.RequestSchema.extend({method:s.z.literal("completion/complete"),params:o.extend({ref:s.z.union([t.PromptReferenceSchema,t.ResourceTemplateReferenceSchema]),argument:s.z.object({name:s.z.string(),value:s.z.string()}).passthrough(),context:s.z.optional(s.z.object({arguments:s.z.optional(s.z.record(s.z.string(),s.z.string()))}))})}),t.CompleteResultSchema=t.ResultSchema.extend({completion:s.z.object({values:s.z.array(s.z.string()).max(100),total:s.z.optional(s.z.number().int()),hasMore:s.z.optional(s.z.boolean())}).passthrough()}),t.RootSchema=s.z.object({uri:s.z.string().startsWith("file://"),name:s.z.optional(s.z.string()),_meta:s.z.optional(s.z.object({}).passthrough())}).passthrough(),t.ListRootsRequestSchema=t.RequestSchema.extend({method:s.z.literal("roots/list")}),t.ListRootsResultSchema=t.ResultSchema.extend({roots:s.z.array(t.RootSchema)}),t.RootsListChangedNotificationSchema=t.NotificationSchema.extend({method:s.z.literal("notifications/roots/list_changed")}),t.ClientRequestSchema=s.z.union([t.PingRequestSchema,t.InitializeRequestSchema,t.CompleteRequestSchema,t.SetLevelRequestSchema,t.GetPromptRequestSchema,t.ListPromptsRequestSchema,t.ListResourcesRequestSchema,t.ListResourceTemplatesRequestSchema,t.ReadResourceRequestSchema,t.SubscribeRequestSchema,t.UnsubscribeRequestSchema,t.CallToolRequestSchema,t.ListToolsRequestSchema]),t.ClientNotificationSchema=s.z.union([t.CancelledNotificationSchema,t.ProgressNotificationSchema,t.InitializedNotificationSchema,t.RootsListChangedNotificationSchema]),t.ClientResultSchema=s.z.union([t.EmptyResultSchema,t.CreateMessageResultSchema,t.ElicitResultSchema,t.ListRootsResultSchema]),t.ServerRequestSchema=s.z.union([t.PingRequestSchema,t.CreateMessageRequestSchema,t.ElicitRequestSchema,t.ListRootsRequestSchema]),t.ServerNotificationSchema=s.z.union([t.CancelledNotificationSchema,t.ProgressNotificationSchema,t.LoggingMessageNotificationSchema,t.ResourceUpdatedNotificationSchema,t.ResourceListChangedNotificationSchema,t.ToolListChangedNotificationSchema,t.PromptListChangedNotificationSchema]),t.ServerResultSchema=s.z.union([t.EmptyResultSchema,t.InitializeResultSchema,t.CompleteResultSchema,t.GetPromptResultSchema,t.ListPromptsResultSchema,t.ListResourcesResultSchema,t.ListResourceTemplatesResultSchema,t.ReadResourceResultSchema,t.CallToolResultSchema,t.ListToolsResultSchema]);class c extends Error{constructor(e,t,r){super(`MCP error ${e}: ${t}`),this.code=e,this.data=r,this.name="McpError"}}t.McpError=c},1296:(e,t,r)=>{"use strict";var s=r(805);function a(e,t,r){this.message=r||a.message(e,t),this.missingRef=s.url(e,t),this.missingSchema=s.normalizeId(s.fullPath(this.missingRef))}function o(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:o(function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}),MissingRef:o(a)},a.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},1377:(e,t,r)=>{"use strict";var s=r(1296).MissingRef;e.exports=function e(t,r,a){var o=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(a=r,r=void 0);var i=n(t).then(function(){var e=o._addSchema(t,void 0,r);return e.validate||c(e)});return a&&i.then(function(e){a(null,e)},a),i;function n(t){var r=t.$schema;return r&&!o.getSchema(r)?e.call(o,{$ref:r},!0):Promise.resolve()}function c(e){try{return o._compile(e)}catch(t){if(t instanceof s)return function(t){var s=t.missingSchema;if(l(s))throw new Error("Schema "+s+" is loaded but "+t.missingRef+" cannot be resolved");var a=o._loadingSchemas[s];return a||(a=o._loadingSchemas[s]=o._opts.loadSchema(s)).then(i,i),a.then(function(e){if(!l(s))return n(e).then(function(){l(s)||o.addSchema(e,s,void 0,r)})}).then(function(){return c(e)});function i(){delete o._loadingSchemas[s]}function l(e){return o._refs[e]||o._schemas[e]}}(t);throw t}}}},1395:(e,t,r)=>{"use strict";const s=r(7521);e.exports=(e="")=>{const t=e.match(s);if(!t)return null;const[r,a]=t[0].replace(/#! ?/,"").split(" "),o=r.split("/").pop();return"env"===o?a:a?`${o} ${a}`:o}},1708:e=>{"use strict";e.exports=require("node:process")},1722:(e,t,r)=>{"use strict";const s=r(4434),a=r(8611),{Duplex:o}=r(2203),{createHash:i}=r(6982),n=r(5926),c=r(2971),l=r(8237),d=r(1060),{GUID:u,kWebSocket:h}=r(2614),p=/^[+/0-9A-Za-z]{22}==$/;function f(e){e._state=2,e.emit("close")}function m(){this.destroy()}function v(e,t,r,s){r=r||a.STATUS_CODES[t],s={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...s},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${a.STATUS_CODES[t]}\r\n`+Object.keys(s).map(e=>`${e}: ${s[e]}`).join("\r\n")+"\r\n\r\n"+r)}function g(e,t,r,s,a,o){if(e.listenerCount("wsClientError")){const s=new Error(a);Error.captureStackTrace(s,g),e.emit("wsClientError",s,r,t)}else v(r,s,a,o)}e.exports=class extends s{constructor(e,t){if(super(),null==(e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:d,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=a.createServer((e,t)=>{const r=a.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,s)=>{this.handleUpgrade(t,r,s,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",()=>{e(new Error("The server is not running"))}),void process.nextTick(f,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(f,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close(()=>{f(this)})}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,s){t.on("error",m);const a=e.headers["sec-websocket-key"],o=e.headers.upgrade,i=+e.headers["sec-websocket-version"];if("GET"!==e.method)return void g(this,e,t,405,"Invalid HTTP method");if(void 0===o||"websocket"!==o.toLowerCase())return void g(this,e,t,400,"Invalid Upgrade header");if(void 0===a||!p.test(a))return void g(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");if(13!==i&&8!==i)return void g(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});if(!this.shouldHandle(e))return void v(t,400);const d=e.headers["sec-websocket-protocol"];let u=new Set;if(void 0!==d)try{u=l.parse(d)}catch(r){return void g(this,e,t,400,"Invalid Sec-WebSocket-Protocol header")}const h=e.headers["sec-websocket-extensions"],f={};if(this.options.perMessageDeflate&&void 0!==h){const r=new c(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=n.parse(h);e[c.extensionName]&&(r.accept(e[c.extensionName]),f[c.extensionName]=r)}catch(r){return void g(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header")}}if(this.options.verifyClient){const o={origin:e.headers[8===i?"sec-websocket-origin":"origin"],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(o,(o,i,n,c)=>{if(!o)return v(t,i||401,n,c);this.completeUpgrade(f,a,u,e,t,r,s)});if(!this.options.verifyClient(o))return v(t,401)}this.completeUpgrade(f,a,u,e,t,r,s)}completeUpgrade(e,t,r,s,a,o,l){if(!a.readable||!a.writable)return a.destroy();if(a[h])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return v(a,503);const d=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${i("sha1").update(t+u).digest("base64")}`],p=new this.options.WebSocket(null,void 0,this.options);if(r.size){const e=this.options.handleProtocols?this.options.handleProtocols(r,s):r.values().next().value;e&&(d.push(`Sec-WebSocket-Protocol: ${e}`),p._protocol=e)}if(e[c.extensionName]){const t=e[c.extensionName].params,r=n.format({[c.extensionName]:[t]});d.push(`Sec-WebSocket-Extensions: ${r}`),p._extensions=e}this.emit("headers",d,s),a.write(d.concat("\r\n").join("\r\n")),a.removeListener("error",m),p.setSocket(a,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(p),p.on("close",()=>{this.clients.delete(p),this._shouldEmitClose&&!this.clients.size&&process.nextTick(f,this)})),l(p,s)}}},2014:(e,t,r)=>{"use strict";const s=r(6928),a=r(9045),o=r(4483),i=r(9182),n="win32"===process.platform,c=/\.(?:com|exe)$/i,l=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;e.exports=function(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null);const d={command:e,args:t=t?t.slice(0):[],options:r=Object.assign({},r),file:void 0,original:{command:e,args:t}};return r.shell?d:function(e){if(!n)return e;const t=function(e){e.file=a(e);const t=e.file&&i(e.file);return t?(e.args.unshift(e.file),e.command=t,a(e)):e.file}(e),r=!c.test(t);if(e.options.forceShell||r){const r=l.test(t);e.command=s.normalize(e.command),e.command=o.command(e.command),e.args=e.args.map(e=>o.argument(e,r));const a=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${a}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}(d)}},2017:e=>{"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var s,a,o;if(Array.isArray(t)){if((s=t.length)!=r.length)return!1;for(a=s;0!==a--;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((s=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=s;0!==a--;)if(!Object.prototype.hasOwnProperty.call(r,o[a]))return!1;for(a=s;0!==a--;){var i=o[a];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r}},2019:e=>{"use strict";e.exports=function(e,t,r){var s=" ",a=e.level,o=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(o||""),u="valid"+a,h=e.opts.$data&&i&&i.$data;h&&(s+=" var schema"+a+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; "),h||(s+=" var schema"+a+" = validate.schema"+n+";"),s+="var "+u+" = equal("+d+", schema"+a+"); if (!"+u+") {   ";var p=p||[];p.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValue: schema"+a+" } ",!1!==e.opts.messages&&(s+=" , message: 'should be equal to constant' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var f=s;return s=p.pop(),!e.compositeRule&&l?e.async?s+=" throw new ValidationError(["+f+"]); ":s+=" validate.errors = ["+f+"]; return false; ":s+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" }",l&&(s+=" else { "),s}},2034:(e,t)=>{"use strict";var r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.getParsedType=t.ZodParsedType=t.objectUtil=t.util=void 0,function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),s={};for(const e of r)s[e]=t[e];return e.objectValues(s)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(r||(t.util=r={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(s||(t.objectUtil=s={})),t.ZodParsedType=r.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),t.getParsedType=e=>{switch(typeof e){case"undefined":return t.ZodParsedType.undefined;case"string":return t.ZodParsedType.string;case"number":return Number.isNaN(e)?t.ZodParsedType.nan:t.ZodParsedType.number;case"boolean":return t.ZodParsedType.boolean;case"function":return t.ZodParsedType.function;case"bigint":return t.ZodParsedType.bigint;case"symbol":return t.ZodParsedType.symbol;case"object":return Array.isArray(e)?t.ZodParsedType.array:null===e?t.ZodParsedType.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?t.ZodParsedType.promise:"undefined"!=typeof Map&&e instanceof Map?t.ZodParsedType.map:"undefined"!=typeof Set&&e instanceof Set?t.ZodParsedType.set:"undefined"!=typeof Date&&e instanceof Date?t.ZodParsedType.date:t.ZodParsedType.object;default:return t.ZodParsedType.unknown}}},2203:e=>{"use strict";e.exports=require("stream")},2305:(e,t,r)=>{"use strict";var s=r(805),a=r(6489),o=r(1296),i=r(2492),n=r(3248),c=a.ucs2length,l=r(2017),d=o.Validation;function u(e,t,r){var s=p.call(this,e,t,r);return s>=0?{index:s,compiling:!0}:(s=this._compilations.length,this._compilations[s]={schema:e,root:t,baseId:r},{index:s,compiling:!1})}function h(e,t,r){var s=p.call(this,e,t,r);s>=0&&this._compilations.splice(s,1)}function p(e,t,r){for(var s=0;s<this._compilations.length;s++){var a=this._compilations[s];if(a.schema==e&&a.root==t&&a.baseId==r)return s}return-1}function f(e,t){return"var pattern"+e+" = new RegExp("+a.toQuotedString(t[e])+");"}function m(e){return"var default"+e+" = defaults["+e+"];"}function v(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function g(e){return"var customRule"+e+" = customRules["+e+"];"}function y(e,t){if(!e.length)return"";for(var r="",s=0;s<e.length;s++)r+=t(s,e);return r}e.exports=function e(t,r,p,_){var b=this,S=this._opts,w=[void 0],P={},E=[],x={},R=[],C={},T=[];r=r||{schema:t,refVal:w,refs:P};var I=u.call(this,t,r,_),k=this._compilations[I.index];if(I.compiling)return k.callValidate=function e(){var t=k.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var O=this._formats,z=this.RULES;try{var N=A(t,r,p,_);k.validate=N;var j=k.callValidate;return j&&(j.schema=N.schema,j.errors=null,j.refs=N.refs,j.refVal=N.refVal,j.root=N.root,j.$async=N.$async,S.sourceCode&&(j.source=N.source)),N}finally{h.call(this,t,r,_)}function A(t,i,u,h){var p=!i||i&&i.schema==t;if(i.schema!=r.schema)return e.call(b,t,i,u,h);var _,x=!0===t.$async,C=n({isTop:!0,schema:t,isRoot:p,baseId:h,root:i,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:o.MissingRef,RULES:z,validate:n,util:a,resolve:s,resolveRef:D,usePattern:U,useDefault:Z,useCustomRule:F,opts:S,formats:O,logger:b.logger,self:b});C=y(w,v)+y(E,f)+y(R,m)+y(T,g)+C,S.processCode&&(C=S.processCode(C,t));try{_=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",C)(b,z,O,r,w,R,T,l,c,d),w[0]=_}catch(e){throw b.logger.error("Error compiling schema, function code:",C),e}return _.schema=t,_.errors=null,_.refs=P,_.refVal=w,_.root=p?_:i,x&&(_.$async=!0),!0===S.sourceCode&&(_.source={code:C,patterns:E,defaults:R}),_}function D(t,a,o){a=s.url(t,a);var i,n,c=P[a];if(void 0!==c)return $(i=w[c],n="refVal["+c+"]");if(!o&&r.refs){var l=r.refs[a];if(void 0!==l)return $(i=r.refVal[l],n=L(a,i))}n=L(a);var d=s.call(b,A,r,a);if(void 0===d){var u=p&&p[a];u&&(d=s.inlineRef(u,S.inlineRefs)?u:e.call(b,u,r,p,t))}if(void 0!==d)return function(e,t){var r=P[e];w[r]=t}(a,d),$(d,n);!function(e){delete P[e]}(a)}function L(e,t){var r=w.length;return w[r]=t,P[e]=r,"refVal"+r}function $(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function U(e){var t=x[e];return void 0===t&&(t=x[e]=E.length,E[t]=e),"pattern"+t}function Z(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return a.toQuotedString(e);case"object":if(null===e)return"null";var t=i(e),r=C[t];return void 0===r&&(r=C[t]=R.length,R[r]=e),"default"+r}}function F(e,t,r,s){if(!1!==b._opts.validateSchema){var a=e.definition.dependencies;if(a&&!a.every(function(e){return Object.prototype.hasOwnProperty.call(r,e)}))throw new Error("parent schema must have all required keywords: "+a.join(","));var o=e.definition.validateSchema;if(o&&!o(t)){var i="keyword schema is invalid: "+b.errorsText(o.errors);if("log"!=b._opts.validateSchema)throw new Error(i);b.logger.error(i)}}var n,c=e.definition.compile,l=e.definition.inline,d=e.definition.macro;if(c)n=c.call(b,t,r,s);else if(d)n=d.call(b,t,r,s),!1!==S.validateSchema&&b.validateSchema(n,!0);else if(l)n=l.call(b,s,e.keyword,t,r);else if(!(n=e.definition.validate))return;if(void 0===n)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var u=T.length;return T[u]=n,{code:"customRule"+u,validate:n}}}},2424:(e,t,r)=>{"use strict";var s=r(6489);e.exports=function(e){s.copy(e,this)}},2492:e=>{"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,s="boolean"==typeof t.cycles&&t.cycles,a=t.cmp&&(r=t.cmp,function(e){return function(t,s){var a={key:t,value:e[t]},o={key:s,value:e[s]};return r(a,o)}}),o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,i;if(Array.isArray(t)){for(i="[",r=0;r<t.length;r++)r&&(i+=","),i+=e(t[r])||"null";return i+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(s)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var n=o.push(t)-1,c=Object.keys(t).sort(a&&a(t));for(i="",r=0;r<c.length;r++){var l=c[r],d=e(t[l]);d&&(i&&(i+=","),i+=JSON.stringify(l)+":"+d)}return o.splice(n,1),"{"+i+"}"}}(e)}},2508:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateV7State=void 0;const s=r(9942),a=r(3202),o={};function i(e,t,r){return e.msecs??=-1/0,e.seq??=0,t>e.msecs?(e.seq=r[6]<<23|r[7]<<16|r[8]<<8|r[9],e.msecs=t):(e.seq=e.seq+1|0,0===e.seq&&e.msecs++),e}function n(e,t,r,s,a=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(s){if(a<0||a+16>s.length)throw new RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`)}else s=new Uint8Array(16),a=0;return t??=Date.now(),r??=127*e[6]<<24|e[7]<<16|e[8]<<8|e[9],s[a++]=t/1099511627776&255,s[a++]=t/4294967296&255,s[a++]=t/16777216&255,s[a++]=t/65536&255,s[a++]=t/256&255,s[a++]=255&t,s[a++]=112|r>>>28&15,s[a++]=r>>>20&255,s[a++]=128|r>>>14&63,s[a++]=r>>>6&255,s[a++]=r<<2&255|3&e[10],s[a++]=e[11],s[a++]=e[12],s[a++]=e[13],s[a++]=e[14],s[a++]=e[15],s}t.updateV7State=i,t.default=function(e,t,r){let c;if(e)c=n(e.random??e.rng?.()??(0,s.default)(),e.msecs,e.seq,t,r);else{const e=Date.now(),a=(0,s.default)();i(o,e,a),c=n(a,o.msecs,o.seq,t,r)}return t??(0,a.unsafeStringify)(c)}},2524:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(8873);t.default=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");let t;return Uint8Array.of((t=parseInt(e.slice(0,8),16))>>>24,t>>>16&255,t>>>8&255,255&t,(t=parseInt(e.slice(9,13),16))>>>8,255&t,(t=parseInt(e.slice(14,18),16))>>>8,255&t,(t=parseInt(e.slice(19,23),16))>>>8,255&t,(t=parseInt(e.slice(24,36),16))/1099511627776&255,t/4294967296&255,t>>>24&255,t>>>16&255,t>>>8&255,255&t)}},2578:e=>{"use strict";e.exports=function(e,t,r){var s,a=" ",o=e.level,i=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(i||""),h=e.opts.$data&&n&&n.$data;h?(a+=" var schema"+o+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",s="schema"+o):s=n,a+="if ( ",h&&(a+=" ("+s+" !== undefined && typeof "+s+" != 'string') || "),a+=" !"+(h?"(new RegExp("+s+"))":e.usePattern(n))+".test("+u+") ) {   ";var p=p||[];p.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { pattern:  ",a+=h?""+s:""+e.util.toQuotedString(n),a+="  } ",!1!==e.opts.messages&&(a+=" , message: 'should match pattern \"",a+=h?"' + "+s+" + '":""+e.util.escapeQuotes(n),a+="\"' "),e.opts.verbose&&(a+=" , schema:  ",a+=h?"validate.schema"+c:""+e.util.toQuotedString(n),a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var f=a;return a=p.pop(),!e.compositeRule&&d?e.async?a+=" throw new ValidationError(["+f+"]); ":a+=" validate.errors = ["+f+"]; return false; ":a+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",d&&(a+=" else { "),a}},2614:e=>{"use strict";const t=["nodebuffer","arraybuffer","fragments"],r="undefined"!=typeof Blob;r&&t.push("blob"),e.exports={BINARY_TYPES:t,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:r,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},2761:e=>{"use strict";var t=e.exports=function(){this._cache={}};t.prototype.put=function(e,t){this._cache[e]=t},t.prototype.get=function(e){return this._cache[e]},t.prototype.del=function(e){delete this._cache[e]},t.prototype.clear=function(){this._cache={}}},2775:e=>{"use strict";var t=e.exports=function(e,t,s){"function"==typeof t&&(s=t,t={}),r(t,"function"==typeof(s=t.cb||s)?s:s.pre||function(){},s.post||function(){},e,"",e)};function r(e,a,o,i,n,c,l,d,u,h){if(i&&"object"==typeof i&&!Array.isArray(i)){for(var p in a(i,n,c,l,d,u,h),i){var f=i[p];if(Array.isArray(f)){if(p in t.arrayKeywords)for(var m=0;m<f.length;m++)r(e,a,o,f[m],n+"/"+p+"/"+m,c,n,p,i,m)}else if(p in t.propsKeywords){if(f&&"object"==typeof f)for(var v in f)r(e,a,o,f[v],n+"/"+p+"/"+s(v),c,n,p,i,v)}else(p in t.keywords||e.allKeys&&!(p in t.skipKeywords))&&r(e,a,o,f,n+"/"+p,c,n,p,i)}o(i,n,c,l,d,u,h)}}function s(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},2971:(e,t,r)=>{"use strict";const s=r(3106),a=r(3338),o=r(4759),{kStatusCode:i}=r(2614),n=Buffer[Symbol.species],c=Buffer.from([0,0,255,255]),l=Symbol("permessage-deflate"),d=Symbol("total-length"),u=Symbol("callback"),h=Symbol("buffers"),p=Symbol("error");let f;function m(e){this[h].push(e),this[d]+=e.length}function v(e){this[d]+=e.length,this[l]._maxPayload<1||this[d]<=this[l]._maxPayload?this[h].push(e):(this[p]=new RangeError("Max payload size exceeded"),this[p].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[p][i]=1009,this.removeListener("data",v),this.reset())}function g(e){this[l]._inflate=null,this[p]?this[u](this[p]):(e[i]=1007,this[u](e))}e.exports=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!f){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;f=new o(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[u];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,r=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r})}),e}decompress(e,t,r){f.add(s=>{this._decompress(e,t,(e,t)=>{s(),r(e,t)})})}compress(e,t,r){f.add(s=>{this._compress(e,t,(e,t)=>{s(),r(e,t)})})}_decompress(e,t,r){const o=this._isServer?"client":"server";if(!this._inflate){const e=`${o}_max_window_bits`,t="number"!=typeof this.params[e]?s.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=s.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[l]=this,this._inflate[d]=0,this._inflate[h]=[],this._inflate.on("error",g),this._inflate.on("data",v)}this._inflate[u]=r,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush(()=>{const e=this._inflate[p];if(e)return this._inflate.close(),this._inflate=null,void r(e);const s=a.concat(this._inflate[h],this._inflate[d]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[d]=0,this._inflate[h]=[],t&&this.params[`${o}_no_context_takeover`]&&this._inflate.reset()),r(null,s)})}_compress(e,t,r){const o=this._isServer?"server":"client";if(!this._deflate){const e=`${o}_max_window_bits`,t="number"!=typeof this.params[e]?s.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=s.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[d]=0,this._deflate[h]=[],this._deflate.on("data",m)}this._deflate[u]=r,this._deflate.write(e),this._deflate.flush(s.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let e=a.concat(this._deflate[h],this._deflate[d]);t&&(e=new n(e.buffer,e.byteOffset,e.length-4)),this._deflate[u]=null,this._deflate[d]=0,this._deflate[h]=[],t&&this.params[`${o}_no_context_takeover`]&&this._deflate.reset(),r(null,e)})}}},3106:e=>{"use strict";e.exports=require("zlib")},3107:e=>{"use strict";e.exports=function(e,t,r){var s,a=" ",o=e.level,i=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(i||""),h=e.opts.$data&&n&&n.$data;if(h?(a+=" var schema"+o+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",s="schema"+o):s=n,!h&&"number"!=typeof n)throw new Error(t+" must be number");a+="if ( ",h&&(a+=" ("+s+" !== undefined && typeof "+s+" != 'number') || "),a+=" Object.keys("+u+").length "+("maxProperties"==t?">":"<")+" "+s+") { ";var p=t,f=f||[];f.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(p||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+s+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have ",a+="maxProperties"==t?"more":"fewer",a+=" than ",a+=h?"' + "+s+" + '":""+n,a+=" properties' "),e.opts.verbose&&(a+=" , schema:  ",a+=h?"validate.schema"+c:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var m=a;return a=f.pop(),!e.compositeRule&&d?e.async?a+=" throw new ValidationError(["+m+"]); ":a+=" validate.errors = ["+m+"]; return false; ":a+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",d&&(a+=" else { "),a}},3119:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}}function s(e){}t.ParseError=r,t.createParser=function(e){if("function"==typeof e)throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=s,onError:a=s,onRetry:o=s,onComment:i}=e;let n,c="",l=!0,d="",u="";function h(e){if(""===e)return d.length>0&&t({id:n,event:u||void 0,data:d.endsWith("\n")?d.slice(0,-1):d}),n=void 0,d="",void(u="");if(e.startsWith(":"))return void(i&&i(e.slice(e.startsWith(": ")?2:1)));const r=e.indexOf(":");if(-1!==r){const t=e.slice(0,r),s=" "===e[r+1]?2:1;return void p(t,e.slice(r+s),e)}p(e,"",e)}function p(e,t,s){switch(e){case"event":u=t;break;case"data":d=`${d}${t}\n`;break;case"id":n=t.includes("\0")?void 0:t;break;case"retry":/^\d+$/.test(t)?o(parseInt(t,10)):a(new r(`Invalid \`retry\` value: "${t}"`,{type:"invalid-retry",value:t,line:s}));break;default:a(new r(`Unknown field "${e.length>20?`${e.slice(0,20)}`:e}"`,{type:"unknown-field",field:e,value:t,line:s}))}}return{feed:function(e){const t=l?e.replace(/^\xEF\xBB\xBF/,""):e,[r,s]=function(e){const t=[];let r="",s=0;for(;s<e.length;){const a=e.indexOf("\r",s),o=e.indexOf("\n",s);let i=-1;if(-1!==a&&-1!==o?i=Math.min(a,o):-1!==a?i=a:-1!==o&&(i=o),-1===i){r=e.slice(s);break}{const r=e.slice(s,i);t.push(r),s=i+1,"\r"===e[s-1]&&"\n"===e[s]&&s++}}return[t,r]}(`${c}${t}`);for(const e of r)h(e);c=s,l=!1},reset:function(e={}){c&&e.consume&&h(c),l=!0,n=void 0,d="",u="",c=""}}}},3202:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unsafeStringify=void 0;const s=r(8873),a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).slice(1));function o(e,t=0){return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}t.unsafeStringify=o,t.default=function(e,t=0){const r=o(e,t);if(!(0,s.default)(r))throw TypeError("Stringified UUID is invalid");return r}},3205:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(3119);class a extends TransformStream{constructor({onError:e,onRetry:t,onComment:r}={}){let a;super({start(o){a=s.createParser({onEvent:e=>{o.enqueue(e)},onError(t){"terminate"===e?o.error(t):"function"==typeof e&&e(t)},onRetry:t,onComment:r})},transform(e){a.feed(e)}})}}t.ParseError=s.ParseError,t.EventSourceParserStream=a},3207:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;const a=r(7533),o=r(1294),i=s(r(8544));class n extends a.Protocol{constructor(e,t){var r;super(t),this._clientInfo=e,this._cachedToolOutputValidators=new Map,this._capabilities=null!==(r=null==t?void 0:t.capabilities)&&void 0!==r?r:{},this._ajv=new i.default}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=(0,a.mergeCapabilities)(this._capabilities,e)}assertCapability(e,t){var r;if(!(null===(r=this._serverCapabilities)||void 0===r?void 0:r[e]))throw new Error(`Server does not support ${e} (required for ${t})`)}async connect(e,t){if(await super.connect(e),void 0===e.sessionId)try{const r=await this.request({method:"initialize",params:{protocolVersion:o.LATEST_PROTOCOL_VERSION,capabilities:this._capabilities,clientInfo:this._clientInfo}},o.InitializeResultSchema,t);if(void 0===r)throw new Error(`Server sent invalid initialize result: ${r}`);if(!o.SUPPORTED_PROTOCOL_VERSIONS.includes(r.protocolVersion))throw new Error(`Server's protocol version is not supported: ${r.protocolVersion}`);this._serverCapabilities=r.capabilities,this._serverVersion=r.serverInfo,e.setProtocolVersion&&e.setProtocolVersion(r.protocolVersion),this._instructions=r.instructions,await this.notification({method:"notifications/initialized"})}catch(e){throw this.close(),e}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var t,r,s,a,o;switch(e){case"logging/setLevel":if(!(null===(t=this._serverCapabilities)||void 0===t?void 0:t.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(null===(r=this._serverCapabilities)||void 0===r?void 0:r.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(null===(s=this._serverCapabilities)||void 0===s?void 0:s.resources))throw new Error(`Server does not support resources (required for ${e})`);if("resources/subscribe"===e&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(null===(a=this._serverCapabilities)||void 0===a?void 0:a.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(null===(o=this._serverCapabilities)||void 0===o?void 0:o.completions))throw new Error(`Server does not support completions (required for ${e})`)}}assertNotificationCapability(e){var t;if("notifications/roots/list_changed"===e&&!(null===(t=this._capabilities.roots)||void 0===t?void 0:t.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`)}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`)}}async ping(e){return this.request({method:"ping"},o.EmptyResultSchema,e)}async complete(e,t){return this.request({method:"completion/complete",params:e},o.CompleteResultSchema,t)}async setLoggingLevel(e,t){return this.request({method:"logging/setLevel",params:{level:e}},o.EmptyResultSchema,t)}async getPrompt(e,t){return this.request({method:"prompts/get",params:e},o.GetPromptResultSchema,t)}async listPrompts(e,t){return this.request({method:"prompts/list",params:e},o.ListPromptsResultSchema,t)}async listResources(e,t){return this.request({method:"resources/list",params:e},o.ListResourcesResultSchema,t)}async listResourceTemplates(e,t){return this.request({method:"resources/templates/list",params:e},o.ListResourceTemplatesResultSchema,t)}async readResource(e,t){return this.request({method:"resources/read",params:e},o.ReadResourceResultSchema,t)}async subscribeResource(e,t){return this.request({method:"resources/subscribe",params:e},o.EmptyResultSchema,t)}async unsubscribeResource(e,t){return this.request({method:"resources/unsubscribe",params:e},o.EmptyResultSchema,t)}async callTool(e,t=o.CallToolResultSchema,r){const s=await this.request({method:"tools/call",params:e},t,r),a=this.getToolOutputValidator(e.name);if(a){if(!s.structuredContent&&!s.isError)throw new o.McpError(o.ErrorCode.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`);if(s.structuredContent)try{if(!a(s.structuredContent))throw new o.McpError(o.ErrorCode.InvalidParams,`Structured content does not match the tool's output schema: ${this._ajv.errorsText(a.errors)}`)}catch(e){if(e instanceof o.McpError)throw e;throw new o.McpError(o.ErrorCode.InvalidParams,`Failed to validate structured content: ${e instanceof Error?e.message:String(e)}`)}}return s}cacheToolOutputSchemas(e){this._cachedToolOutputValidators.clear();for(const t of e)if(t.outputSchema)try{const e=this._ajv.compile(t.outputSchema);this._cachedToolOutputValidators.set(t.name,e)}catch(e){}}getToolOutputValidator(e){return this._cachedToolOutputValidators.get(e)}async listTools(e,t){const r=await this.request({method:"tools/list",params:e},o.ListToolsResultSchema,t);return this.cacheToolOutputSchemas(r.tools),r}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}}t.Client=n},3248:e=>{"use strict";e.exports=function(e,t,r){var s="",a=!0===e.schema.$async,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),i=e.self._getId(e.schema);if(e.opts.strictKeywords){var n=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(n){var c="unknown keyword: "+n;if("log"!==e.opts.strictKeywords)throw new Error(c);e.logger.warn(c)}}if(e.isTop&&(s+=" var validate = ",a&&(e.async=!0,s+="async "),s+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",i&&(e.opts.sourceCode||e.opts.processCode)&&(s+=" /*# sourceURL="+i+" */ ")),"boolean"==typeof e.schema||!o&&!e.schema.$ref){t="false schema";var l=e.level,d=e.dataLevel,u=e.schema[t],h=e.schemaPath+e.util.getProperty(t),p=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,m="data"+(d||""),v="valid"+l;if(!1===e.schema){e.isTop?f=!0:s+=" var "+v+" = false; ",(B=B||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",!1!==e.opts.messages&&(s+=" , message: 'boolean schema is false' "),e.opts.verbose&&(s+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),s+=" } "):s+=" {} ";var g=s;s=B.pop(),!e.compositeRule&&f?e.async?s+=" throw new ValidationError(["+g+"]); ":s+=" validate.errors = ["+g+"]; return false; ":s+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?s+=a?" return data; ":" validate.errors = null; return true; ":s+=" var "+v+" = true; ";return e.isTop&&(s+=" }; return validate; "),s}if(e.isTop){var y=e.isTop;if(l=e.level=0,d=e.dataLevel=0,m="data",e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var _="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(_);e.logger.warn(_)}s+=" var vErrors = null; ",s+=" var errors = 0;     ",s+=" if (rootData === undefined) rootData = data; "}else{if(l=e.level,m="data"+((d=e.dataLevel)||""),i&&(e.baseId=e.resolve.url(e.baseId,i)),a&&!e.async)throw new Error("async schema in sync schema");s+=" var errs_"+l+" = errors;"}v="valid"+l,f=!e.opts.allErrors;var b="",S="",w=e.schema.type,P=Array.isArray(w);if(w&&e.opts.nullable&&!0===e.schema.nullable&&(P?-1==w.indexOf("null")&&(w=w.concat("null")):"null"!=w&&(w=[w,"null"],P=!0)),P&&1==w.length&&(w=w[0],P=!1),e.schema.$ref&&o){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(s+=" "+e.RULES.all.$comment.code(e,"$comment")),w){if(e.opts.coerceTypes)var E=e.util.coerceToTypes(e.opts.coerceTypes,w);var x=e.RULES.types[w];if(E||P||!0===x||x&&!G(x)){h=e.schemaPath+".type",p=e.errSchemaPath+"/type",h=e.schemaPath+".type",p=e.errSchemaPath+"/type";var R=P?"checkDataTypes":"checkDataType";if(s+=" if ("+e.util[R](w,m,e.opts.strictNumbers,!0)+") { ",E){var C="dataType"+l,T="coerced"+l;s+=" var "+C+" = typeof "+m+"; var "+T+" = undefined; ","array"==e.opts.coerceTypes&&(s+=" if ("+C+" == 'object' && Array.isArray("+m+") && "+m+".length == 1) { "+m+" = "+m+"[0]; "+C+" = typeof "+m+"; if ("+e.util.checkDataType(e.schema.type,m,e.opts.strictNumbers)+") "+T+" = "+m+"; } "),s+=" if ("+T+" !== undefined) ; ";var I=E;if(I)for(var k,O=-1,z=I.length-1;O<z;)"string"==(k=I[O+=1])?s+=" else if ("+C+" == 'number' || "+C+" == 'boolean') "+T+" = '' + "+m+"; else if ("+m+" === null) "+T+" = ''; ":"number"==k||"integer"==k?(s+=" else if ("+C+" == 'boolean' || "+m+" === null || ("+C+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==k&&(s+=" && !("+m+" % 1)"),s+=")) "+T+" = +"+m+"; "):"boolean"==k?s+=" else if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+T+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+T+" = true; ":"null"==k?s+=" else if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+T+" = null; ":"array"==e.opts.coerceTypes&&"array"==k&&(s+=" else if ("+C+" == 'string' || "+C+" == 'number' || "+C+" == 'boolean' || "+m+" == null) "+T+" = ["+m+"]; ");s+=" else {   ",(B=B||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",s+=P?""+w.join(","):""+w,s+="' } ",!1!==e.opts.messages&&(s+=" , message: 'should be ",s+=P?""+w.join(","):""+w,s+="' "),e.opts.verbose&&(s+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),s+=" } "):s+=" {} ",g=s,s=B.pop(),!e.compositeRule&&f?e.async?s+=" throw new ValidationError(["+g+"]); ":s+=" validate.errors = ["+g+"]; return false; ":s+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } if ("+T+" !== undefined) {  ";var N=d?"data"+(d-1||""):"parentData";s+=" "+m+" = "+T+"; ",d||(s+="if ("+N+" !== undefined)"),s+=" "+N+"["+(d?e.dataPathArr[d]:"parentDataProperty")+"] = "+T+"; } "}else(B=B||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",s+=P?""+w.join(","):""+w,s+="' } ",!1!==e.opts.messages&&(s+=" , message: 'should be ",s+=P?""+w.join(","):""+w,s+="' "),e.opts.verbose&&(s+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),s+=" } "):s+=" {} ",g=s,s=B.pop(),!e.compositeRule&&f?e.async?s+=" throw new ValidationError(["+g+"]); ":s+=" validate.errors = ["+g+"]; return false; ":s+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";s+=" } "}}if(e.schema.$ref&&!o)s+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",f&&(s+=" } if (errors === ",s+=y?"0":"errs_"+l,s+=") { ",S+="}");else{var j=e.RULES;if(j)for(var A=-1,D=j.length-1;A<D;)if(G(x=j[A+=1])){if(x.type&&(s+=" if ("+e.util.checkDataType(x.type,m,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==x.type&&e.schema.properties){u=e.schema.properties;var L=Object.keys(u);if(L)for(var $,U=-1,Z=L.length-1;U<Z;)if(void 0!==(q=u[$=L[U+=1]]).default){var F=m+e.util.getProperty($);if(e.compositeRule){if(e.opts.strictDefaults){if(_="default is ignored for: "+F,"log"!==e.opts.strictDefaults)throw new Error(_);e.logger.warn(_)}}else s+=" if ("+F+" === undefined ","empty"==e.opts.useDefaults&&(s+=" || "+F+" === null || "+F+" === '' "),s+=" ) "+F+" = ","shared"==e.opts.useDefaults?s+=" "+e.useDefault(q.default)+" ":s+=" "+JSON.stringify(q.default)+" ",s+="; "}}else if("array"==x.type&&Array.isArray(e.schema.items)){var M=e.schema.items;if(M){O=-1;for(var q,V=M.length-1;O<V;)if(void 0!==(q=M[O+=1]).default)if(F=m+"["+O+"]",e.compositeRule){if(e.opts.strictDefaults){if(_="default is ignored for: "+F,"log"!==e.opts.strictDefaults)throw new Error(_);e.logger.warn(_)}}else s+=" if ("+F+" === undefined ","empty"==e.opts.useDefaults&&(s+=" || "+F+" === null || "+F+" === '' "),s+=" ) "+F+" = ","shared"==e.opts.useDefaults?s+=" "+e.useDefault(q.default)+" ":s+=" "+JSON.stringify(q.default)+" ",s+="; "}}var B,H=x.rules;if(H)for(var W,K=-1,Q=H.length-1;K<Q;)if(Y(W=H[K+=1])){var J=W.code(e,W.keyword,x.type);J&&(s+=" "+J+" ",f&&(b+="}"))}if(f&&(s+=" "+b+" ",b=""),x.type&&(s+=" } ",w&&w===x.type&&!E))s+=" else { ",h=e.schemaPath+".type",p=e.errSchemaPath+"/type",(B=B||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",s+=P?""+w.join(","):""+w,s+="' } ",!1!==e.opts.messages&&(s+=" , message: 'should be ",s+=P?""+w.join(","):""+w,s+="' "),e.opts.verbose&&(s+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),s+=" } "):s+=" {} ",g=s,s=B.pop(),!e.compositeRule&&f?e.async?s+=" throw new ValidationError(["+g+"]); ":s+=" validate.errors = ["+g+"]; return false; ":s+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } ";f&&(s+=" if (errors === ",s+=y?"0":"errs_"+l,s+=") { ",S+="}")}}function G(e){for(var t=e.rules,r=0;r<t.length;r++)if(Y(t[r]))return!0}function Y(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,s=0;s<r.length;s++)if(void 0!==e.schema[r[s]])return!0}(t)}return f&&(s+=" "+S+" "),y?(a?(s+=" if (errors === 0) return data;           ",s+=" else throw new ValidationError(vErrors); "):(s+=" validate.errors = vErrors; ",s+=" return errors === 0;       "),s+=" }; return validate;"):s+=" var "+v+" = errors === errs_"+l+";",s}},3249:e=>{"use strict";e.exports=function(e,t,r){var s=" ",a=e.level,o=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(o||""),u="valid"+a,h="errs__"+a,p=e.util.copy(e);p.level++;var f="valid"+p.level,m=e.schema.then,v=e.schema.else,g=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0||!1===m:e.util.schemaHasRules(m,e.RULES.all)),y=void 0!==v&&(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0||!1===v:e.util.schemaHasRules(v,e.RULES.all)),_=p.baseId;if(g||y){var b;p.createErrors=!1,p.schema=i,p.schemaPath=n,p.errSchemaPath=c,s+=" var "+h+" = errors; var "+u+" = true;  ";var S=e.compositeRule;e.compositeRule=p.compositeRule=!0,s+="  "+e.validate(p)+" ",p.baseId=_,p.createErrors=!0,s+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=S,g?(s+=" if ("+f+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",s+="  "+e.validate(p)+" ",p.baseId=_,s+=" "+u+" = "+f+"; ",g&&y?s+=" var "+(b="ifClause"+a)+" = 'then'; ":b="'then'",s+=" } ",y&&(s+=" else { ")):s+=" if (!"+f+") { ",y&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",s+="  "+e.validate(p)+" ",p.baseId=_,s+=" "+u+" = "+f+"; ",g&&y?s+=" var "+(b="ifClause"+a)+" = 'else'; ":b="'else'",s+=" } "),s+=" if (!"+u+") {   var err =   ",!1!==e.createErrors?(s+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+b+" } ",!1!==e.opts.messages&&(s+=" , message: 'should match \"' + "+b+" + '\" schema' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; "),s+=" }   ",l&&(s+=" else { ")}else l&&(s+=" if (true) { ");return s}},3338:(e,t,r)=>{"use strict";const{EMPTY_BUFFER:s}=r(2614),a=Buffer[Symbol.species];function o(e,t,r,s,a){for(let o=0;o<a;o++)r[s+o]=e[o]^t[3&o]}function i(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}if(e.exports={concat:function(e,t){if(0===e.length)return s;if(1===e.length)return e[0];const r=Buffer.allocUnsafe(t);let o=0;for(let t=0;t<e.length;t++){const s=e[t];r.set(s,o),o+=s.length}return o<t?new a(r.buffer,r.byteOffset,o):r},mask:o,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:function e(t){if(e.readOnly=!0,Buffer.isBuffer(t))return t;let r;return t instanceof ArrayBuffer?r=new a(t):ArrayBuffer.isView(t)?r=new a(t.buffer,t.byteOffset,t.byteLength):(r=Buffer.from(t),e.readOnly=!1),r},unmask:i},!process.env.WS_NO_BUFFER_UTIL)try{const t=r(Object(function(){var e=new Error("Cannot find module 'bufferutil'");throw e.code="MODULE_NOT_FOUND",e}()));e.exports.mask=function(e,r,s,a,i){i<48?o(e,r,s,a,i):t.mask(e,r,s,a,i)},e.exports.unmask=function(e,r){e.length<32?i(e,r):t.unmask(e,r)}}catch(e){}},3368:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.errorUtil=void 0,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(r||(t.errorUtil=r={}))},3369:(e,t,r)=>{"use strict";var s=r(6489),a=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31],i=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,n=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,c=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,l=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,d=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,u=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,h=/^(?:\/(?:[^~/]|~0|~1)*)*$/,p=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,f=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function m(e){return e="full"==e?"full":"fast",s.copy(m[e])}function v(e){var t=e.match(a);if(!t)return!1;var r=+t[1],s=+t[2],i=+t[3];return s>=1&&s<=12&&i>=1&&i<=(2==s&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:o[s])}function g(e,t){var r=e.match(i);if(!r)return!1;var s=r[1],a=r[2],o=r[3],n=r[5];return(s<=23&&a<=59&&o<=59||23==s&&59==a&&60==o)&&(!t||n)}e.exports=m,m.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":l,url:d,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:n,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:S,uuid:u,"json-pointer":h,"json-pointer-uri-fragment":p,"relative-json-pointer":f},m.full={date:v,time:g,"date-time":function(e){var t=e.split(y);return 2==t.length&&v(t[0])&&g(t[1],!0)},uri:function(e){return _.test(e)&&c.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":l,url:d,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:n,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:S,uuid:u,"json-pointer":h,"json-pointer-uri-fragment":p,"relative-json-pointer":f};var y=/t|\s/i,_=/\/|:/,b=/[^\\]\\Z/;function S(e){if(b.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},3405:e=>{"use strict";e.exports=function(e,t,r){var s=" ",a=e.level,o=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(o||"");if(!1===e.opts.format)return l&&(s+=" if (true) { "),s;var u,h=e.opts.$data&&i&&i.$data;h?(s+=" var schema"+a+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ",u="schema"+a):u=i;var p=e.opts.unknownFormats,f=Array.isArray(p);if(h)s+=" var "+(m="format"+a)+" = formats["+u+"]; var "+(v="isObject"+a)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(g="formatType"+a)+" = "+v+" && "+m+".type || 'string'; if ("+v+") { ",e.async&&(s+=" var async"+a+" = "+m+".async; "),s+=" "+m+" = "+m+".validate; } if (  ",h&&(s+=" ("+u+" !== undefined && typeof "+u+" != 'string') || "),s+=" (","ignore"!=p&&(s+=" ("+u+" && !"+m+" ",f&&(s+=" && self._opts.unknownFormats.indexOf("+u+") == -1 "),s+=") || "),s+=" ("+m+" && "+g+" == '"+r+"' && !(typeof "+m+" == 'function' ? ",e.async?s+=" (async"+a+" ? await "+m+"("+d+") : "+m+"("+d+")) ":s+=" "+m+"("+d+") ",s+=" : "+m+".test("+d+"))))) {";else{var m;if(!(m=e.formats[i])){if("ignore"==p)return e.logger.warn('unknown format "'+i+'" ignored in schema at path "'+e.errSchemaPath+'"'),l&&(s+=" if (true) { "),s;if(f&&p.indexOf(i)>=0)return l&&(s+=" if (true) { "),s;throw new Error('unknown format "'+i+'" is used in schema at path "'+e.errSchemaPath+'"')}var v,g=(v="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(v){var y=!0===m.async;m=m.validate}if(g!=r)return l&&(s+=" if (true) { "),s;if(y){if(!e.async)throw new Error("async format in sync schema");s+=" if (!(await "+(_="formats"+e.util.getProperty(i)+".validate")+"("+d+"))) { "}else{s+=" if (! ";var _="formats"+e.util.getProperty(i);v&&(_+=".validate"),s+="function"==typeof m?" "+_+"("+d+") ":" "+_+".test("+d+") ",s+=") { "}}var b=b||[];b.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",s+=h?""+u:""+e.util.toQuotedString(i),s+="  } ",!1!==e.opts.messages&&(s+=" , message: 'should match format \"",s+=h?"' + "+u+" + '":""+e.util.escapeQuotes(i),s+="\"' "),e.opts.verbose&&(s+=" , schema:  ",s+=h?"validate.schema"+n:""+e.util.toQuotedString(i),s+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var S=s;return s=b.pop(),!e.compositeRule&&l?e.async?s+=" throw new ValidationError(["+S+"]); ":s+=" validate.errors = ["+S+"]; return false; ":s+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } ",l&&(s+=" else { "),s}},3436:e=>{"use strict";const t="win32"===process.platform;function r(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function s(e,s){return t&&1===e&&!s.file?r(s.original,"spawn"):null}e.exports={hookChildProcess:function(e,r){if(!t)return;const a=e.emit;e.emit=function(t,o){if("exit"===t){const t=s(o,r);if(t)return a.call(e,"error",t)}return a.apply(e,arguments)}},verifyENOENT:s,verifyENOENTSync:function(e,s){return t&&1===e&&!s.file?r(s.original,"spawnSync"):null},notFoundError:r}},3588:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="00000000-0000-0000-0000-000000000000"},3596:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},3661:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UnauthorizedError=void 0,t.auth=async function(e,{serverUrl:t,authorizationCode:r,scope:s,resourceMetadataUrl:a}){let o,i=t;try{o=await d(t,{resourceMetadataUrl:a}),o.authorization_servers&&o.authorization_servers.length>0&&(i=o.authorization_servers[0])}catch(e){}const n=await l(t,e,o),c=await p(i);let u=await Promise.resolve(e.clientInformation());if(!u){if(void 0!==r)throw new Error("Existing OAuth client information is required when exchanging an authorization code");if(!e.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");const t=await g(i,{metadata:c,clientMetadata:e.clientMetadata});await e.saveClientInformation(t),u=t}if(void 0!==r){const t=await e.codeVerifier(),s=await m(i,{metadata:c,clientInformation:u,authorizationCode:r,codeVerifier:t,redirectUri:e.redirectUrl,resource:n});return await e.saveTokens(s),"AUTHORIZED"}const h=await e.tokens();if(null==h?void 0:h.refresh_token)try{const t=await v(i,{metadata:c,clientInformation:u,refreshToken:h.refresh_token,resource:n});return await e.saveTokens(t),"AUTHORIZED"}catch(e){}const y=e.state?await e.state():void 0,{authorizationUrl:_,codeVerifier:b}=await f(i,{metadata:c,clientInformation:u,state:y,redirectUrl:e.redirectUrl,scope:s||e.clientMetadata.scope,resource:n});return await e.saveCodeVerifier(b),await e.redirectToAuthorization(_),"REDIRECT"},t.selectResourceURL=l,t.extractResourceMetadataUrl=function(e){const t=e.headers.get("WWW-Authenticate");if(!t)return;const[r,s]=t.split(" ");if("bearer"!==r.toLowerCase()||!s)return;const a=/resource_metadata="([^"]*)"/.exec(t);if(a)try{return new URL(a[1])}catch(e){return}},t.discoverOAuthProtectedResourceMetadata=d,t.discoverOAuthMetadata=p,t.startAuthorization=f,t.exchangeAuthorization=m,t.refreshAuthorization=v,t.registerClient=g;const a=s(r(577)),o=r(1294),i=r(1175),n=r(4295);class c extends Error{constructor(e){super(null!=e?e:"Unauthorized")}}async function l(e,t,r){const s=(0,n.resourceUrlFromServerUrl)(e);if(t.validateResourceURL)return await t.validateResourceURL(s,null==r?void 0:r.resource);if(r){if(!(0,n.checkResourceAllowed)({requestedResource:s,configuredResource:r.resource}))throw new Error(`Protected resource ${r.resource} does not match expected ${s} (or origin)`);return new URL(r.resource)}}async function d(e,t){var r;let s,a;s=(null==t?void 0:t.resourceMetadataUrl)?new URL(null==t?void 0:t.resourceMetadataUrl):new URL("/.well-known/oauth-protected-resource",e);try{a=await fetch(s,{headers:{"MCP-Protocol-Version":null!==(r=null==t?void 0:t.protocolVersion)&&void 0!==r?r:o.LATEST_PROTOCOL_VERSION}})}catch(e){if(!(e instanceof TypeError))throw e;a=await fetch(s)}if(404===a.status)throw new Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!a.ok)throw new Error(`HTTP ${a.status} trying to load well-known OAuth protected resource metadata.`);return i.OAuthProtectedResourceMetadataSchema.parse(await a.json())}async function u(e,t){try{return await fetch(e,{headers:t})}catch(r){if(r instanceof TypeError)return t?u(e):void 0;throw r}}async function h(e,t){const r={"MCP-Protocol-Version":t};return await u(e,r)}async function p(e,t){var r;const s=new URL(e),a=null!==(r=null==t?void 0:t.protocolVersion)&&void 0!==r?r:o.LATEST_PROTOCOL_VERSION,n=function(e){let t=`/.well-known/oauth-authorization-server${e}`;return e.endsWith("/")&&(t=t.slice(0,-1)),t}(s.pathname),c=new URL(n,s);let l=await h(c,a);if(function(e,t){return!e||404===e.status&&"/"!==t}(l,s.pathname)){const e=new URL("/.well-known/oauth-authorization-server",s);l=await h(e,a)}if(l&&404!==l.status){if(!l.ok)throw new Error(`HTTP ${l.status} trying to load well-known OAuth metadata`);return i.OAuthMetadataSchema.parse(await l.json())}}async function f(e,{metadata:t,clientInformation:r,redirectUrl:s,scope:o,state:i,resource:n}){const c="code",l="S256";let d;if(t){if(d=new URL(t.authorization_endpoint),!t.response_types_supported.includes(c))throw new Error(`Incompatible auth server: does not support response type ${c}`);if(!t.code_challenge_methods_supported||!t.code_challenge_methods_supported.includes(l))throw new Error(`Incompatible auth server: does not support code challenge method ${l}`)}else d=new URL("/authorize",e);const u=await(0,a.default)(),h=u.code_verifier,p=u.code_challenge;return d.searchParams.set("response_type",c),d.searchParams.set("client_id",r.client_id),d.searchParams.set("code_challenge",p),d.searchParams.set("code_challenge_method",l),d.searchParams.set("redirect_uri",String(s)),i&&d.searchParams.set("state",i),o&&d.searchParams.set("scope",o),n&&d.searchParams.set("resource",n.href),{authorizationUrl:d,codeVerifier:h}}async function m(e,{metadata:t,clientInformation:r,authorizationCode:s,codeVerifier:a,redirectUri:o,resource:n}){const c="authorization_code";let l;if(t){if(l=new URL(t.token_endpoint),t.grant_types_supported&&!t.grant_types_supported.includes(c))throw new Error(`Incompatible auth server: does not support grant type ${c}`)}else l=new URL("/token",e);const d=new URLSearchParams({grant_type:c,client_id:r.client_id,code:s,code_verifier:a,redirect_uri:String(o)});r.client_secret&&d.set("client_secret",r.client_secret),n&&d.set("resource",n.href);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:d});if(!u.ok)throw new Error(`Token exchange failed: HTTP ${u.status}`);return i.OAuthTokensSchema.parse(await u.json())}async function v(e,{metadata:t,clientInformation:r,refreshToken:s,resource:a}){const o="refresh_token";let n;if(t){if(n=new URL(t.token_endpoint),t.grant_types_supported&&!t.grant_types_supported.includes(o))throw new Error(`Incompatible auth server: does not support grant type ${o}`)}else n=new URL("/token",e);const c=new URLSearchParams({grant_type:o,client_id:r.client_id,refresh_token:s});r.client_secret&&c.set("client_secret",r.client_secret),a&&c.set("resource",a.href);const l=await fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c});if(!l.ok)throw new Error(`Token refresh failed: HTTP ${l.status}`);return i.OAuthTokensSchema.parse({refresh_token:s,...await l.json()})}async function g(e,{metadata:t,clientMetadata:r}){let s;if(t){if(!t.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");s=new URL(t.registration_endpoint)}else s=new URL("/register",e);const a=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok)throw new Error(`Dynamic client registration failed: HTTP ${a.status}`);return i.OAuthClientInformationFullSchema.parse(await a.json())}t.UnauthorizedError=c},3719:(e,t,r)=>{"use strict";r(1060);const{Duplex:s}=r(2203);function a(e){e.emit("close")}function o(){!this.destroyed&&this._writableState.finished&&this.destroy()}function i(e){this.removeListener("error",i),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let r=!0;const n=new s({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",function(t,r){const s=!r&&n._readableState.objectMode?t.toString():t;n.push(s)||e.pause()}),e.once("error",function(e){n.destroyed||(r=!1,n.destroy(e))}),e.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(t,s){if(e.readyState===e.CLOSED)return s(t),void process.nextTick(a,n);let o=!1;e.once("error",function(e){o=!0,s(e)}),e.once("close",function(){o||s(t),process.nextTick(a,n)}),r&&e.terminate()},n._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),n._readableState.endEmitted&&n.destroy()):(e._socket.once("finish",function(){t()}),e.close())):e.once("open",function(){n._final(t)})},n._read=function(){e.isPaused&&e.resume()},n._write=function(t,r,s){e.readyState!==e.CONNECTING?e.send(t,s):e.once("open",function(){n._write(t,r,s)})},n.on("end",o),n.on("error",i),n}},3873:e=>{"use strict";e.exports=function(e,t,r){var s,a,o=" ",i=e.level,n=e.dataLevel,c=e.schema[t],l=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,h="data"+(n||""),p="valid"+i,f="errs__"+i,m=e.opts.$data&&c&&c.$data;m?(o+=" var schema"+i+" = "+e.util.getData(c.$data,n,e.dataPathArr)+"; ",a="schema"+i):a=c;var v,g,y,_,b,S=this,w="definition"+i,P=S.definition,E="";if(m&&P.$data){b="keywordValidate"+i;var x=P.validateSchema;o+=" var "+w+" = RULES.custom['"+t+"'].definition; var "+b+" = "+w+".validate;"}else{if(!(_=e.useCustomRule(S,c,e.schema,e)))return;a="validate.schema"+l,b=_.code,v=P.compile,g=P.inline,y=P.macro}var R=b+".errors",C="i"+i,T="ruleErr"+i,I=P.async;if(I&&!e.async)throw new Error("async keyword in sync schema");if(g||y||(o+=R+" = null;"),o+="var "+f+" = errors;var "+p+";",m&&P.$data&&(E+="}",o+=" if ("+a+" === undefined) { "+p+" = true; } else { ",x&&(E+="}",o+=" "+p+" = "+w+".validateSchema("+a+"); if ("+p+") { ")),g)P.statements?o+=" "+_.validate+" ":o+=" "+p+" = "+_.validate+"; ";else if(y){var k=e.util.copy(e);E="",k.level++;var O="valid"+k.level;k.schema=_.validate,k.schemaPath="";var z=e.compositeRule;e.compositeRule=k.compositeRule=!0;var N=e.validate(k).replace(/validate\.schema/g,b);e.compositeRule=k.compositeRule=z,o+=" "+N}else{(L=L||[]).push(o),o="",o+="  "+b+".call( ",e.opts.passContext?o+="this":o+="self",v||!1===P.schema?o+=" , "+h+" ":o+=" , "+a+" , "+h+" , validate.schema"+e.schemaPath+" ",o+=" , (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var j=n?"data"+(n-1||""):"parentData",A=n?e.dataPathArr[n]:"parentDataProperty",D=o+=" , "+j+" , "+A+" , rootData )  ";o=L.pop(),!1===P.errors?(o+=" "+p+" = ",I&&(o+="await "),o+=D+"; "):o+=I?" var "+(R="customErrors"+i)+" = null; try { "+p+" = await "+D+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+R+" = e.errors; else throw e; } ":" "+R+" = null; "+p+" = "+D+"; "}if(P.modifying&&(o+=" if ("+j+") "+h+" = "+j+"["+A+"];"),o+=""+E,P.valid)u&&(o+=" if (true) { ");else{var L;o+=" if ( ",void 0===P.valid?(o+=" !",o+=y?""+O:""+p):o+=" "+!P.valid+" ",o+=") { ",s=S.keyword,(L=L||[]).push(o),o="",(L=L||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(s||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { keyword: '"+S.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+S.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),o+=" } "):o+=" {} ";var $=o;o=L.pop(),!e.compositeRule&&u?e.async?o+=" throw new ValidationError(["+$+"]); ":o+=" validate.errors = ["+$+"]; return false; ":o+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var U=o;o=L.pop(),g?P.errors?"full"!=P.errors&&(o+="  for (var "+C+"="+f+"; "+C+"<errors; "+C+"++) { var "+T+" = vErrors["+C+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+T+".schemaPath === undefined) { "+T+'.schemaPath = "'+d+'"; } ',e.opts.verbose&&(o+=" "+T+".schema = "+a+"; "+T+".data = "+h+"; "),o+=" } "):!1===P.errors?o+=" "+U+" ":(o+=" if ("+f+" == errors) { "+U+" } else {  for (var "+C+"="+f+"; "+C+"<errors; "+C+"++) { var "+T+" = vErrors["+C+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+T+".schemaPath === undefined) { "+T+'.schemaPath = "'+d+'"; } ',e.opts.verbose&&(o+=" "+T+".schema = "+a+"; "+T+".data = "+h+"; "),o+=" } } "):y?(o+="   var err =   ",!1!==e.createErrors?(o+=" { keyword: '"+(s||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { keyword: '"+S.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+S.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):!1===P.errors?o+=" "+U+" ":(o+=" if (Array.isArray("+R+")) { if (vErrors === null) vErrors = "+R+"; else vErrors = vErrors.concat("+R+"); errors = vErrors.length;  for (var "+C+"="+f+"; "+C+"<errors; "+C+"++) { var "+T+" = vErrors["+C+"]; if ("+T+".dataPath === undefined) "+T+".dataPath = (dataPath || '') + "+e.errorPath+";  "+T+'.schemaPath = "'+d+'";  ',e.opts.verbose&&(o+=" "+T+".schema = "+a+"; "+T+".data = "+h+"; "),o+=" } } else { "+U+" } "),o+=" } ",u&&(o+=" else { ")}return o}},3891:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(2524),a=r(3202);t.default=function(e){const t=(r="string"==typeof e?(0,s.default)(e):e,Uint8Array.of((15&r[6])<<4|r[7]>>4&15,(15&r[7])<<4|(240&r[4])>>4,(15&r[4])<<4|(240&r[5])>>4,(15&r[5])<<4|(240&r[0])>>4,(15&r[0])<<4|(240&r[1])>>4,(15&r[1])<<4|(240&r[2])>>4,96|15&r[2],r[3],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]));var r;return"string"==typeof e?(0,a.unsafeStringify)(t):t}},3906:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StdioClientTransport=t.DEFAULT_INHERITED_ENV_VARS=void 0,t.getDefaultEnvironment=c;const a=s(r(4993)),o=s(r(1708)),i=r(7075),n=r(9560);function c(){const e={};for(const r of t.DEFAULT_INHERITED_ENV_VARS){const t=o.default.env[r];void 0!==t&&(t.startsWith("()")||(e[r]=t))}return e}t.DEFAULT_INHERITED_ENV_VARS="win32"===o.default.platform?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE","PROGRAMFILES"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"],t.StdioClientTransport=class{constructor(e){this._abortController=new AbortController,this._readBuffer=new n.ReadBuffer,this._stderrStream=null,this._serverParams=e,"pipe"!==e.stderr&&"overlapped"!==e.stderr||(this._stderrStream=new i.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,t)=>{var r,s,i,n,l,d;this._process=(0,a.default)(this._serverParams.command,null!==(r=this._serverParams.args)&&void 0!==r?r:[],{env:null!==(s=this._serverParams.env)&&void 0!==s?s:c(),stdio:["pipe","pipe",null!==(i=this._serverParams.stderr)&&void 0!==i?i:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:"win32"===o.default.platform&&"type"in o.default,cwd:this._serverParams.cwd}),this._process.on("error",e=>{var r,s;"AbortError"!==e.name?(t(e),null===(s=this.onerror)||void 0===s||s.call(this,e)):null===(r=this.onclose)||void 0===r||r.call(this)}),this._process.on("spawn",()=>{e()}),this._process.on("close",e=>{var t;this._process=void 0,null===(t=this.onclose)||void 0===t||t.call(this)}),null===(n=this._process.stdin)||void 0===n||n.on("error",e=>{var t;null===(t=this.onerror)||void 0===t||t.call(this,e)}),null===(l=this._process.stdout)||void 0===l||l.on("data",e=>{this._readBuffer.append(e),this.processReadBuffer()}),null===(d=this._process.stdout)||void 0===d||d.on("error",e=>{var t;null===(t=this.onerror)||void 0===t||t.call(this,e)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,t;return this._stderrStream?this._stderrStream:null!==(t=null===(e=this._process)||void 0===e?void 0:e.stderr)&&void 0!==t?t:null}get pid(){var e,t;return null!==(t=null===(e=this._process)||void 0===e?void 0:e.pid)&&void 0!==t?t:null}processReadBuffer(){for(var e,t;;)try{const t=this._readBuffer.readMessage();if(null===t)break;null===(e=this.onmessage)||void 0===e||e.call(this,t)}catch(e){null===(t=this.onerror)||void 0===t||t.call(this,e)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(t=>{var r;if(!(null===(r=this._process)||void 0===r?void 0:r.stdin))throw new Error("Not connected");const s=(0,n.serializeMessage)(e);this._process.stdin.write(s)?t():this._process.stdin.once("drain",t)})}}},4276:e=>{"use strict";e.exports=function(e,t,r){var s=" ",a=e.level,o=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(o||""),u="valid"+a,h="errs__"+a,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level,v="i"+a,g=p.dataLevel=e.dataLevel+1,y="data"+g,_=e.baseId;if(s+="var "+h+" = errors;var "+u+";",Array.isArray(i)){var b=e.schema.additionalItems;if(!1===b){s+=" "+u+" = "+d+".length <= "+i.length+"; ";var S=c;c=e.errSchemaPath+"/additionalItems",s+="  if (!"+u+") {   ";var w=w||[];w.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+i.length+" } ",!1!==e.opts.messages&&(s+=" , message: 'should NOT have more than "+i.length+" items' "),e.opts.verbose&&(s+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var P=s;s=w.pop(),!e.compositeRule&&l?e.async?s+=" throw new ValidationError(["+P+"]); ":s+=" validate.errors = ["+P+"]; return false; ":s+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } ",c=S,l&&(f+="}",s+=" else { ")}var E=i;if(E)for(var x,R=-1,C=E.length-1;R<C;)if(x=E[R+=1],e.opts.strictKeywords?"object"==typeof x&&Object.keys(x).length>0||!1===x:e.util.schemaHasRules(x,e.RULES.all)){s+=" "+m+" = true; if ("+d+".length > "+R+") { ";var T=d+"["+R+"]";p.schema=x,p.schemaPath=n+"["+R+"]",p.errSchemaPath=c+"/"+R,p.errorPath=e.util.getPathExpr(e.errorPath,R,e.opts.jsonPointers,!0),p.dataPathArr[g]=R;var I=e.validate(p);p.baseId=_,e.util.varOccurences(I,y)<2?s+=" "+e.util.varReplace(I,y,T)+" ":s+=" var "+y+" = "+T+"; "+I+" ",s+=" }  ",l&&(s+=" if ("+m+") { ",f+="}")}"object"==typeof b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0||!1===b:e.util.schemaHasRules(b,e.RULES.all))&&(p.schema=b,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",s+=" "+m+" = true; if ("+d+".length > "+i.length+") {  for (var "+v+" = "+i.length+"; "+v+" < "+d+".length; "+v+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0),T=d+"["+v+"]",p.dataPathArr[g]=v,I=e.validate(p),p.baseId=_,e.util.varOccurences(I,y)<2?s+=" "+e.util.varReplace(I,y,T)+" ":s+=" var "+y+" = "+T+"; "+I+" ",l&&(s+=" if (!"+m+") break; "),s+=" } }  ",l&&(s+=" if ("+m+") { ",f+="}"))}else(e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0||!1===i:e.util.schemaHasRules(i,e.RULES.all))&&(p.schema=i,p.schemaPath=n,p.errSchemaPath=c,s+="  for (var "+v+" = 0; "+v+" < "+d+".length; "+v+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0),T=d+"["+v+"]",p.dataPathArr[g]=v,I=e.validate(p),p.baseId=_,e.util.varOccurences(I,y)<2?s+=" "+e.util.varReplace(I,y,T)+" ":s+=" var "+y+" = "+T+"; "+I+" ",l&&(s+=" if (!"+m+") break; "),s+=" }");return l&&(s+=" "+f+" if ("+h+" == errors) {"),s}},4295:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resourceUrlFromServerUrl=function(e){const t="string"==typeof e?new URL(e):new URL(e.href);return t.hash="",t},t.checkResourceAllowed=function({requestedResource:e,configuredResource:t}){const r="string"==typeof e?new URL(e):new URL(e.href),s="string"==typeof t?new URL(t):new URL(t.href);if(r.origin!==s.origin)return!1;if(r.pathname.length<s.pathname.length)return!1;const a=r.pathname.endsWith("/")?r.pathname:r.pathname+"/",o=s.pathname.endsWith("/")?s.pathname:s.pathname+"/";return a.startsWith(o)}},4422:e=>{"use strict";e.exports=function(e,t,r){var s=" ",a=e.schema[t],o=e.schemaPath+e.util.getProperty(t),i=e.errSchemaPath+"/"+t,n=!e.opts.allErrors,c=e.util.copy(e),l="";c.level++;var d="valid"+c.level,u=c.baseId,h=!0,p=a;if(p)for(var f,m=-1,v=p.length-1;m<v;)f=p[m+=1],(e.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0||!1===f:e.util.schemaHasRules(f,e.RULES.all))&&(h=!1,c.schema=f,c.schemaPath=o+"["+m+"]",c.errSchemaPath=i+"/"+m,s+="  "+e.validate(c)+" ",c.baseId=u,n&&(s+=" if ("+d+") { ",l+="}"));return n&&(s+=h?" if (true) { ":" "+l.slice(0,-1)+" "),s}},4434:e=>{"use strict";e.exports=require("events")},4483:e=>{"use strict";const t=/([()\][%!^"`<>&|;, *?])/g;e.exports.command=function(e){return e.replace(t,"^$1")},e.exports.argument=function(e,r){return e=(e=`"${e=(e=(e=`${e}`).replace(/(?=(\\+?)?)\1"/g,'$1$1\\"')).replace(/(?=(\\+?)?)\1$/,"$1$1")}"`).replace(t,"^$1"),r&&(e=e.replace(t,"^$1")),e}},4491:e=>{"use strict";e.exports=function(e,t,r){var s=" ",a=e.level,o=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(o||""),u="errs__"+a,h=e.util.copy(e),p="";h.level++;var f="valid"+h.level,m="key"+a,v="idx"+a,g=h.dataLevel=e.dataLevel+1,y="data"+g,_="dataProperties"+a,b=Object.keys(i||{}).filter(N),S=e.schema.patternProperties||{},w=Object.keys(S).filter(N),P=e.schema.additionalProperties,E=b.length||w.length,x=!1===P,R="object"==typeof P&&Object.keys(P).length,C=e.opts.removeAdditional,T=x||R||C,I=e.opts.ownProperties,k=e.baseId,O=e.schema.required;if(O&&(!e.opts.$data||!O.$data)&&O.length<e.opts.loopRequired)var z=e.util.toHash(O);function N(e){return"__proto__"!==e}if(s+="var "+u+" = errors;var "+f+" = true;",I&&(s+=" var "+_+" = undefined;"),T){if(s+=I?" "+_+" = "+_+" || Object.keys("+d+"); for (var "+v+"=0; "+v+"<"+_+".length; "+v+"++) { var "+m+" = "+_+"["+v+"]; ":" for (var "+m+" in "+d+") { ",E){if(s+=" var isAdditional"+a+" = !(false ",b.length)if(b.length>8)s+=" || validate.schema"+n+".hasOwnProperty("+m+") ";else{var j=b;if(j)for(var A=-1,D=j.length-1;A<D;)Q=j[A+=1],s+=" || "+m+" == "+e.util.toQuotedString(Q)+" "}if(w.length){var L=w;if(L)for(var $=-1,U=L.length-1;$<U;)oe=L[$+=1],s+=" || "+e.usePattern(oe)+".test("+m+") "}s+=" ); if (isAdditional"+a+") { "}if("all"==C)s+=" delete "+d+"["+m+"]; ";else{var Z=e.errorPath,F="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),x)if(C)s+=" delete "+d+"["+m+"]; ";else{s+=" "+f+" = false; ";var M=c;c=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+F+"' } ",!1!==e.opts.messages&&(s+=" , message: '",e.opts._errorDataPathProperty?s+="is an invalid additional property":s+="should NOT have additional properties",s+="' "),e.opts.verbose&&(s+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var q=s;s=re.pop(),!e.compositeRule&&l?e.async?s+=" throw new ValidationError(["+q+"]); ":s+=" validate.errors = ["+q+"]; return false; ":s+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=M,l&&(s+=" break; ")}else if(R)if("failing"==C){s+=" var "+u+" = errors;  ";var V=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=P,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var B=d+"["+m+"]";h.dataPathArr[g]=m;var H=e.validate(h);h.baseId=k,e.util.varOccurences(H,y)<2?s+=" "+e.util.varReplace(H,y,B)+" ":s+=" var "+y+" = "+B+"; "+H+" ",s+=" if (!"+f+") { errors = "+u+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+d+"["+m+"]; }  ",e.compositeRule=h.compositeRule=V}else h.schema=P,h.schemaPath=e.schemaPath+".additionalProperties",h.errSchemaPath=e.errSchemaPath+"/additionalProperties",h.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers),B=d+"["+m+"]",h.dataPathArr[g]=m,H=e.validate(h),h.baseId=k,e.util.varOccurences(H,y)<2?s+=" "+e.util.varReplace(H,y,B)+" ":s+=" var "+y+" = "+B+"; "+H+" ",l&&(s+=" if (!"+f+") break; ");e.errorPath=Z}E&&(s+=" } "),s+=" }  ",l&&(s+=" if ("+f+") { ",p+="}")}var W=e.opts.useDefaults&&!e.compositeRule;if(b.length){var K=b;if(K)for(var Q,J=-1,G=K.length-1;J<G;){var Y=i[Q=K[J+=1]];if(e.opts.strictKeywords?"object"==typeof Y&&Object.keys(Y).length>0||!1===Y:e.util.schemaHasRules(Y,e.RULES.all)){var X=e.util.getProperty(Q),ee=(B=d+X,W&&void 0!==Y.default);if(h.schema=Y,h.schemaPath=n+X,h.errSchemaPath=c+"/"+e.util.escapeFragment(Q),h.errorPath=e.util.getPath(e.errorPath,Q,e.opts.jsonPointers),h.dataPathArr[g]=e.util.toQuotedString(Q),H=e.validate(h),h.baseId=k,e.util.varOccurences(H,y)<2){H=e.util.varReplace(H,y,B);var te=B}else te=y,s+=" var "+y+" = "+B+"; ";if(ee)s+=" "+H+" ";else{if(z&&z[Q]){s+=" if ( "+te+" === undefined ",I&&(s+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(Q)+"') "),s+=") { "+f+" = false; ",Z=e.errorPath,M=c;var re,se=e.util.escapeQuotes(Q);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(Z,Q,e.opts.jsonPointers)),c=e.errSchemaPath+"/required",(re=re||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+se+"' } ",!1!==e.opts.messages&&(s+=" , message: '",e.opts._errorDataPathProperty?s+="is a required property":s+="should have required property \\'"+se+"\\'",s+="' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ",q=s,s=re.pop(),!e.compositeRule&&l?e.async?s+=" throw new ValidationError(["+q+"]); ":s+=" validate.errors = ["+q+"]; return false; ":s+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=M,e.errorPath=Z,s+=" } else { "}else l?(s+=" if ( "+te+" === undefined ",I&&(s+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(Q)+"') "),s+=") { "+f+" = true; } else { "):(s+=" if ("+te+" !== undefined ",I&&(s+=" &&   Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(Q)+"') "),s+=" ) { ");s+=" "+H+" } "}}l&&(s+=" if ("+f+") { ",p+="}")}}if(w.length){var ae=w;if(ae)for(var oe,ie=-1,ne=ae.length-1;ie<ne;)Y=S[oe=ae[ie+=1]],(e.opts.strictKeywords?"object"==typeof Y&&Object.keys(Y).length>0||!1===Y:e.util.schemaHasRules(Y,e.RULES.all))&&(h.schema=Y,h.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(oe),h.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(oe),s+=I?" "+_+" = "+_+" || Object.keys("+d+"); for (var "+v+"=0; "+v+"<"+_+".length; "+v+"++) { var "+m+" = "+_+"["+v+"]; ":" for (var "+m+" in "+d+") { ",s+=" if ("+e.usePattern(oe)+".test("+m+")) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers),B=d+"["+m+"]",h.dataPathArr[g]=m,H=e.validate(h),h.baseId=k,e.util.varOccurences(H,y)<2?s+=" "+e.util.varReplace(H,y,B)+" ":s+=" var "+y+" = "+B+"; "+H+" ",l&&(s+=" if (!"+f+") break; "),s+=" } ",l&&(s+=" else "+f+" = true; "),s+=" }  ",l&&(s+=" if ("+f+") { ",p+="}"))}return l&&(s+=" "+p+" if ("+u+" == errors) {"),s}},4502:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0;const s=r(7766),a=r(8157);var o=r(8157);function i(e,t,r,o){return(0,a.default)(80,s.default,e,t,r,o)}Object.defineProperty(t,"DNS",{enumerable:!0,get:function(){return o.DNS}}),Object.defineProperty(t,"URL",{enumerable:!0,get:function(){return o.URL}}),i.DNS=a.DNS,i.URL=a.URL,t.default=i},4756:e=>{"use strict";e.exports=require("tls")},4759:e=>{"use strict";const t=Symbol("kDone"),r=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},4993:(e,t,r)=>{"use strict";const s=r(5317),a=r(2014),o=r(3436);function i(e,t,r){const i=a(e,t,r),n=s.spawn(i.command,i.args,i.options);return o.hookChildProcess(n,i),n}e.exports=i,e.exports.spawn=i,e.exports.sync=function(e,t,r){const i=a(e,t,r),n=s.spawnSync(i.command,i.args,i.options);return n.error=n.error||o.verifyENOENTSync(n.status,i),n},e.exports._parse=a,e.exports._enoent=o},5049:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},5294:e=>{"use strict";e.exports=function(e,t,r){var s,a=" ",o=e.level,i=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(i||""),h=e.opts.$data&&n&&n.$data;if(h?(a+=" var schema"+o+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",s="schema"+o):s=n,!h&&"number"!=typeof n)throw new Error(t+" must be number");var p="maxLength"==t?">":"<";a+="if ( ",h&&(a+=" ("+s+" !== undefined && typeof "+s+" != 'number') || "),!1===e.opts.unicode?a+=" "+u+".length ":a+=" ucs2length("+u+") ",a+=" "+p+" "+s+") { ";var f=t,m=m||[];m.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(f||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+s+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be ",a+="maxLength"==t?"longer":"shorter",a+=" than ",a+=h?"' + "+s+" + '":""+n,a+=" characters' "),e.opts.verbose&&(a+=" , schema:  ",a+=h?"validate.schema"+c:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var v=a;return a=m.pop(),!e.compositeRule&&d?e.async?a+=" throw new ValidationError(["+v+"]); ":a+=" validate.errors = ["+v+"]; return false; ":a+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",d&&(a+=" else { "),a}},5317:e=>{"use strict";e.exports=require("child_process")},5609:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="ffffffff-ffff-ffff-ffff-ffffffffffff"},5653:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(8651),a=r(2034);t.default=(e,t)=>{let r;switch(e.code){case s.ZodIssueCode.invalid_type:r=e.received===a.ZodParsedType.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case s.ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,a.util.jsonStringifyReplacer)}`;break;case s.ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${a.util.joinValues(e.keys,", ")}`;break;case s.ZodIssueCode.invalid_union:r="Invalid input";break;case s.ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${a.util.joinValues(e.options)}`;break;case s.ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${a.util.joinValues(e.options)}, received '${e.received}'`;break;case s.ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case s.ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case s.ZodIssueCode.invalid_date:r="Invalid date";break;case s.ZodIssueCode.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:a.util.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case s.ZodIssueCode.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case s.ZodIssueCode.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case s.ZodIssueCode.custom:r="Invalid input";break;case s.ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case s.ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case s.ZodIssueCode.not_finite:r="Number must be finite";break;default:r=t.defaultError,a.util.assertNever(e)}return{message:r}}},5692:e=>{"use strict";e.exports=require("https")},5827:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.validate=t.v7=t.v6ToV1=t.v6=t.v5=t.v4=t.v3=t.v1ToV6=t.v1=t.stringify=t.parse=t.NIL=t.MAX=void 0;var s=r(5609);Object.defineProperty(t,"MAX",{enumerable:!0,get:function(){return s.default}});var a=r(3588);Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return a.default}});var o=r(2524);Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return o.default}});var i=r(3202);Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return i.default}});var n=r(458);Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return n.default}});var c=r(3891);Object.defineProperty(t,"v1ToV6",{enumerable:!0,get:function(){return c.default}});var l=r(32);Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return l.default}});var d=r(8597);Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return d.default}});var u=r(4502);Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return u.default}});var h=r(7971);Object.defineProperty(t,"v6",{enumerable:!0,get:function(){return h.default}});var p=r(8959);Object.defineProperty(t,"v6ToV1",{enumerable:!0,get:function(){return p.default}});var f=r(2508);Object.defineProperty(t,"v7",{enumerable:!0,get:function(){return f.default}});var m=r(8873);Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return m.default}});var v=r(9547);Object.defineProperty(t,"version",{enumerable:!0,get:function(){return v.default}})},5880:(e,t,r)=>{"use strict";const{isUtf8:s}=r(181),{hasBlob:a}=r(2614);function o(e){const t=e.length;let r=0;for(;r<t;)if(128&e[r])if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}else r++;return!0}if(e.exports={isBlob:function(e){return a&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&("Blob"===e[Symbol.toStringTag]||"File"===e[Symbol.toStringTag])},isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:o,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},s)e.exports.isValidUTF8=function(e){return e.length<24?o(e):s(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{const t=r(Object(function(){var e=new Error("Cannot find module 'utf-8-validate'");throw e.code="MODULE_NOT_FOUND",e}()));e.exports.isValidUTF8=function(e){return e.length<32?o(e):t(e)}}catch(e){}},5926:(e,t,r)=>{"use strict";const{tokenChars:s}=r(5880);function a(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function(e){return Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>[t].concat(Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){const t=Object.create(null);let r,o,i=Object.create(null),n=!1,c=!1,l=!1,d=-1,u=-1,h=-1,p=0;for(;p<e.length;p++)if(u=e.charCodeAt(p),void 0===r)if(-1===h&&1===s[u])-1===d&&(d=p);else if(0===p||32!==u&&9!==u){if(59!==u&&44!==u)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===d)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p);const s=e.slice(d,h);44===u?(a(t,s,i),i=Object.create(null)):r=s,d=h=-1}}else-1===h&&-1!==d&&(h=p);else if(void 0===o)if(-1===h&&1===s[u])-1===d&&(d=p);else if(32===u||9===u)-1===h&&-1!==d&&(h=p);else if(59===u||44===u){if(-1===d)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p),a(i,e.slice(d,h),!0),44===u&&(a(t,r,i),i=Object.create(null),r=void 0),d=h=-1}else{if(61!==u||-1===d||-1!==h)throw new SyntaxError(`Unexpected character at index ${p}`);o=e.slice(d,p),d=h=-1}else if(c){if(1!==s[u])throw new SyntaxError(`Unexpected character at index ${p}`);-1===d?d=p:n||(n=!0),c=!1}else if(l)if(1===s[u])-1===d&&(d=p);else if(34===u&&-1!==d)l=!1,h=p;else{if(92!==u)throw new SyntaxError(`Unexpected character at index ${p}`);c=!0}else if(34===u&&61===e.charCodeAt(p-1))l=!0;else if(-1===h&&1===s[u])-1===d&&(d=p);else if(-1===d||32!==u&&9!==u){if(59!==u&&44!==u)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===d)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p);let s=e.slice(d,h);n&&(s=s.replace(/\\/g,""),n=!1),a(i,o,s),44===u&&(a(t,r,i),i=Object.create(null),r=void 0),o=void 0,d=h=-1}}else-1===h&&(h=p);if(-1===d||l||32===u||9===u)throw new SyntaxError("Unexpected end of input");-1===h&&(h=p);const f=e.slice(d,h);return void 0===r?a(t,f,i):(void 0===o?a(i,f,!0):a(i,o,n?f.replace(/\\/g,""):f),a(t,r,i)),t}}},5936:e=>{"use strict";e.exports=function(e){for(var t,r=0,s=e.length,a=0;a<s;)r++,(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<s&&56320==(64512&(t=e.charCodeAt(a)))&&a++;return r}},6199:e=>{"use strict";e.exports=function(e,t,r){var s=" ",a=e.level,o=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(o||""),u="valid"+a,h="errs__"+a,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level,v=i.every(function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0||!1===t:e.util.schemaHasRules(t,e.RULES.all)});if(v){var g=p.baseId;s+=" var "+h+" = errors; var "+u+" = false;  ";var y=e.compositeRule;e.compositeRule=p.compositeRule=!0;var _=i;if(_)for(var b,S=-1,w=_.length-1;S<w;)b=_[S+=1],p.schema=b,p.schemaPath=n+"["+S+"]",p.errSchemaPath=c+"/"+S,s+="  "+e.validate(p)+" ",p.baseId=g,s+=" "+u+" = "+u+" || "+m+"; if (!"+u+") { ",f+="}";e.compositeRule=p.compositeRule=y,s+=" "+f+" if (!"+u+") {   var err =   ",!1!==e.createErrors?(s+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(s+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; "),s+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(s+=" } ")}else l&&(s+=" if (true) { ");return s}},6286:(e,t,r)=>{"use strict";const{Writable:s}=r(2203),a=r(2971),{BINARY_TYPES:o,EMPTY_BUFFER:i,kStatusCode:n,kWebSocket:c}=r(2614),{concat:l,toArrayBuffer:d,unmask:u}=r(3338),{isValidStatusCode:h,isValidUTF8:p}=r(5880),f=Buffer[Symbol.species];e.exports=class extends s{constructor(e={}){super(),this._allowSynchronousEvents=void 0===e.allowSynchronousEvents||e.allowSynchronousEvents,this._binaryType=e.binaryType||o[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[c]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=new f(t.buffer,t.byteOffset+e,t.length-e),new f(t.buffer,t.byteOffset,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0],s=t.length-e;e>=r.length?t.set(this._buffers.shift(),s):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),s),this._buffers[0]=new f(r.buffer,r.byteOffset+e,r.length-e)),e-=r.length}while(e>0);return t}startLoop(e){this._loop=!0;do{switch(this._state){case 0:this.getInfo(e);break;case 1:this.getPayloadLength16(e);break;case 2:this.getPayloadLength64(e);break;case 3:this.getMask();break;case 4:this.getData(e);break;case 5:case 6:return void(this._loop=!1)}}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2)return void(this._loop=!1);const t=this.consume(2);if(48&t[0])return void e(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));const r=!(64&~t[0]);if(!r||this._extensions[a.extensionName]){if(this._fin=!(128&~t[0]),this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(r)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void e(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=r}else{if(!(this._opcode>7&&this._opcode<11))return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void e(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(r)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void e(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=!(128&~t[1]),this._isServer){if(!this._masked)return void e(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void e(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(e)}else e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}getPayloadLength16(e){this._bufferedBytes<2?this._loop=!1:(this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e))}getPayloadLength64(e){if(this._bufferedBytes<8)return void(this._loop=!1);const t=this.consume(8),r=t.readUInt32BE(0);r>Math.pow(2,21)-1?e(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=r*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength(e))}haveLength(e){this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)?e(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH")):this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=i;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&0!==(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])&&u(t,this._mask)}if(this._opcode>7)this.controlMessage(t,e);else{if(this._compressed)return this._state=5,void this.decompress(t,e);t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}}decompress(e,t){this._extensions[a.extensionName].decompress(e,this._fin,(e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0){const e=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");return void t(e)}this._fragments.push(r)}this.dataMessage(t),0===this._state&&this.startLoop(t)})}dataMessage(e){if(!this._fin)return void(this._state=0);const t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let s;s="nodebuffer"===this._binaryType?l(r,t):"arraybuffer"===this._binaryType?d(l(r,t)):"blob"===this._binaryType?new Blob(r):r,this._allowSynchronousEvents?(this.emit("message",s,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",s,!0),this._state=0,this.startLoop(e)}))}else{const s=l(r,t);if(!this._skipUTF8Validation&&!p(s)){const t=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void e(t)}5===this._state||this._allowSynchronousEvents?(this.emit("message",s,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",s,!1),this._state=0,this.startLoop(e)}))}}controlMessage(e,t){if(8!==this._opcode)this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",e),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",e),this._state=0,this.startLoop(t)}));else{if(0===e.length)this._loop=!1,this.emit("conclude",1005,i),this.end();else{const r=e.readUInt16BE(0);if(!h(r)){const e=this.createError(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");return void t(e)}const s=new f(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!p(s)){const e=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void t(e)}this._loop=!1,this.emit("conclude",r,s),this.end()}this._state=0}}createError(e,t,r,s,a){this._loop=!1,this._errored=!0;const o=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(o,this.createError),o.code=a,o[n]=s,o}}},6370:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6489:(e,t,r)=>{"use strict";function s(e,t,r,s){var a=s?" !== ":" === ",o=s?" || ":" && ",i=s?"!":"",n=s?"":"!";switch(e){case"null":return t+a+"null";case"array":return i+"Array.isArray("+t+")";case"object":return"("+i+t+o+"typeof "+t+a+'"object"'+o+n+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+a+'"number"'+o+n+"("+t+" % 1)"+o+t+a+t+(r?o+i+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+a+'"'+e+'"'+(r?o+i+"isFinite("+t+")":"")+")";default:return"typeof "+t+a+'"'+e+'"'}}e.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:s,checkDataTypes:function(e,t,r){if(1===e.length)return s(e[0],t,r,!0);var a="",i=o(e);for(var n in i.array&&i.object&&(a=i.null?"(":"(!"+t+" || ",a+="typeof "+t+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer,i)a+=(a?" && ":"")+s(n,t,r,!0);return a},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],s=0;s<t.length;s++){var o=t[s];(a[o]||"array"===e&&"array"===o)&&(r[r.length]=o)}if(r.length)return r}else{if(a[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:o,getProperty:c,escapeQuotes:l,equal:r(2017),ucs2length:r(5936),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var s in e)if(s!=r&&t[s])return!0},schemaUnknownRules:function(e,t){if("boolean"!=typeof e)for(var r in e)if(!t[r])return r},toQuotedString:d,getPathExpr:function(e,t,r,s){return p(e,r?"'/' + "+t+(s?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):s?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){return p(e,d(r?"/"+f(t):c(t)))},getData:function(e,t,r){var s,a,o,i;if(""===e)return"rootData";if("/"==e[0]){if(!u.test(e))throw new Error("Invalid JSON-pointer: "+e);a=e,o="rootData"}else{if(!(i=e.match(h)))throw new Error("Invalid JSON-pointer: "+e);if(s=+i[1],"#"==(a=i[2])){if(s>=t)throw new Error("Cannot access property/index "+s+" levels up, current level is "+t);return r[t-s]}if(s>t)throw new Error("Cannot access data "+s+" levels up, current level is "+t);if(o="data"+(t-s||""),!a)return o}for(var n=o,l=a.split("/"),d=0;d<l.length;d++){var p=l[d];p&&(n+=" && "+(o+=c(m(p))))}return n},unescapeFragment:function(e){return m(decodeURIComponent(e))},unescapeJsonPointer:m,escapeFragment:function(e){return encodeURIComponent(f(e))},escapeJsonPointer:f};var a=o(["string","number","integer","boolean","null"]);function o(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var i=/^[a-z$_][a-z$_0-9]*$/i,n=/'|\\/g;function c(e){return"number"==typeof e?"["+e+"]":i.test(e)?"."+e:"['"+l(e)+"']"}function l(e){return e.replace(n,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function d(e){return"'"+l(e)+"'"}var u=/^\/(?:[^~]|~0|~1)*$/,h=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function p(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function f(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function m(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},6579:function(e,t){!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var s=t.length-1,a=1;a<s;++a)t[a]=t[a].slice(1,-1);return t[s]=t[s].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function s(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function a(e){return e.toUpperCase()}function o(e){var s="[A-Za-z]",a="[0-9]",o=t(a,"[A-Fa-f]"),i=r(r("%[EFef]"+o+"%"+o+o+"%"+o+o)+"|"+r("%[89A-Fa-f]"+o+"%"+o+o)+"|"+r("%"+o+o)),n="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",c=t("[\\:\\/\\?\\#\\[\\]\\@]",n),l=e?"[\\uE000-\\uF8FF]":"[]",d=t(s,a,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),u=r(s+t(s,a,"[\\+\\-\\.]")+"*"),h=r(r(i+"|"+t(d,n,"[\\:]"))+"*"),p=(r(r("25[0-5]")+"|"+r("2[0-4]"+a)+"|"+r("1"+a+a)+"|"+r("[1-9]"+a)+"|"+a),r(r("25[0-5]")+"|"+r("2[0-4]"+a)+"|"+r("1"+a+a)+"|"+r("0?[1-9]"+a)+"|0?0?"+a)),f=r(p+"\\."+p+"\\."+p+"\\."+p),m=r(o+"{1,4}"),v=r(r(m+"\\:"+m)+"|"+f),g=r(r(m+"\\:")+"{6}"+v),y=r("\\:\\:"+r(m+"\\:")+"{5}"+v),_=r(r(m)+"?\\:\\:"+r(m+"\\:")+"{4}"+v),b=r(r(r(m+"\\:")+"{0,1}"+m)+"?\\:\\:"+r(m+"\\:")+"{3}"+v),S=r(r(r(m+"\\:")+"{0,2}"+m)+"?\\:\\:"+r(m+"\\:")+"{2}"+v),w=r(r(r(m+"\\:")+"{0,3}"+m)+"?\\:\\:"+m+"\\:"+v),P=r(r(r(m+"\\:")+"{0,4}"+m)+"?\\:\\:"+v),E=r(r(r(m+"\\:")+"{0,5}"+m)+"?\\:\\:"+m),x=r(r(r(m+"\\:")+"{0,6}"+m)+"?\\:\\:"),R=r([g,y,_,b,S,w,P,E,x].join("|")),C=r(r(d+"|"+i)+"+"),T=(r(R+"\\%25"+C),r(R+r("\\%25|\\%(?!"+o+"{2})")+C)),I=r("[vV]"+o+"+\\."+t(d,n,"[\\:]")+"+"),k=r("\\["+r(T+"|"+R+"|"+I)+"\\]"),O=r(r(i+"|"+t(d,n))+"*"),z=r(k+"|"+f+"(?!"+O+")|"+O),N=r(a+"*"),j=r(r(h+"@")+"?"+z+r("\\:"+N)+"?"),A=r(i+"|"+t(d,n,"[\\:\\@]")),D=r(A+"*"),L=r(A+"+"),$=r(r(i+"|"+t(d,n,"[\\@]"))+"+"),U=r(r("\\/"+D)+"*"),Z=r("\\/"+r(L+U)+"?"),F=r($+U),M=r(L+U),q="(?!"+A+")",V=(r(U+"|"+Z+"|"+F+"|"+M+"|"+q),r(r(A+"|"+t("[\\/\\?]",l))+"*")),B=r(r(A+"|[\\/\\?]")+"*"),H=r(r("\\/\\/"+j+U)+"|"+Z+"|"+M+"|"+q),W=r(u+"\\:"+H+r("\\?"+V)+"?"+r("\\#"+B)+"?"),K=r(r("\\/\\/"+j+U)+"|"+Z+"|"+F+"|"+q),Q=r(K+r("\\?"+V)+"?"+r("\\#"+B)+"?");return r(W+"|"+Q),r(u+"\\:"+H+r("\\?"+V)+"?"),r(r("\\/\\/("+r("("+h+")@")+"?("+z+")"+r("\\:("+N+")")+"?)")+"?("+U+"|"+Z+"|"+M+"|"+q+")"),r("\\?("+V+")"),r("\\#("+B+")"),r(r("\\/\\/("+r("("+h+")@")+"?("+z+")"+r("\\:("+N+")")+"?)")+"?("+U+"|"+Z+"|"+F+"|"+q+")"),r("\\?("+V+")"),r("\\#("+B+")"),r(r("\\/\\/("+r("("+h+")@")+"?("+z+")"+r("\\:("+N+")")+"?)")+"?("+U+"|"+Z+"|"+M+"|"+q+")"),r("\\?("+V+")"),r("\\#("+B+")"),r("("+h+")@"),r("\\:("+N+")"),{NOT_SCHEME:new RegExp(t("[^]",s,a,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",d,n),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",d,n),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",d,n),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",d,n),"g"),NOT_QUERY:new RegExp(t("[^\\%]",d,n,"[\\:\\@\\/\\?]",l),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",d,n,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",d,n),"g"),UNRESERVED:new RegExp(d,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",d,c),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+R+")"+r(r("\\%25|\\%(?!"+o+"{2})")+"("+C+")")+"?\\]?$")}}var i=o(!1),n=o(!0),c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],s=!0,a=!1,o=void 0;try{for(var i,n=e[Symbol.iterator]();!(s=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);s=!0);}catch(e){a=!0,o=e}finally{try{!s&&n.return&&n.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=2147483647,d=36,u=/^xn--/,h=/[^\0-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,v=String.fromCharCode;function g(e){throw new RangeError(f[e])}function y(e,t){var r=e.split("@"),s="";return r.length>1&&(s=r[0]+"@",e=r[1]),s+function(e,t){for(var r=[],s=e.length;s--;)r[s]=t(e[s]);return r}((e=e.replace(p,".")).split("."),t).join(".")}function _(e){for(var t=[],r=0,s=e.length;r<s;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<s){var o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&a)<<10)+(1023&o)+65536):(t.push(a),r--)}else t.push(a)}return t}var b=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:d},S=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},w=function(e,t,r){var s=0;for(e=r?m(e/700):e>>1,e+=m(e/t);e>455;s+=d)e=m(e/35);return m(s+36*e/(e+38))},P=function(e){var t=[],r=e.length,s=0,a=128,o=72,i=e.lastIndexOf("-");i<0&&(i=0);for(var n=0;n<i;++n)e.charCodeAt(n)>=128&&g("not-basic"),t.push(e.charCodeAt(n));for(var c=i>0?i+1:0;c<r;){for(var u=s,h=1,p=d;;p+=d){c>=r&&g("invalid-input");var f=b(e.charCodeAt(c++));(f>=d||f>m((l-s)/h))&&g("overflow"),s+=f*h;var v=p<=o?1:p>=o+26?26:p-o;if(f<v)break;var y=d-v;h>m(l/y)&&g("overflow"),h*=y}var _=t.length+1;o=w(s-u,_,0==u),m(s/_)>l-a&&g("overflow"),a+=m(s/_),s%=_,t.splice(s++,0,a)}return String.fromCodePoint.apply(String,t)},E=function(e){var t=[],r=(e=_(e)).length,s=128,a=0,o=72,i=!0,n=!1,c=void 0;try{for(var u,h=e[Symbol.iterator]();!(i=(u=h.next()).done);i=!0){var p=u.value;p<128&&t.push(v(p))}}catch(e){n=!0,c=e}finally{try{!i&&h.return&&h.return()}finally{if(n)throw c}}var f=t.length,y=f;for(f&&t.push("-");y<r;){var b=l,P=!0,E=!1,x=void 0;try{for(var R,C=e[Symbol.iterator]();!(P=(R=C.next()).done);P=!0){var T=R.value;T>=s&&T<b&&(b=T)}}catch(e){E=!0,x=e}finally{try{!P&&C.return&&C.return()}finally{if(E)throw x}}var I=y+1;b-s>m((l-a)/I)&&g("overflow"),a+=(b-s)*I,s=b;var k=!0,O=!1,z=void 0;try{for(var N,j=e[Symbol.iterator]();!(k=(N=j.next()).done);k=!0){var A=N.value;if(A<s&&++a>l&&g("overflow"),A==s){for(var D=a,L=d;;L+=d){var $=L<=o?1:L>=o+26?26:L-o;if(D<$)break;var U=D-$,Z=d-$;t.push(v(S($+U%Z,0))),D=m(U/Z)}t.push(v(S(D,0))),o=w(a,I,y==f),a=0,++y}}}catch(e){O=!0,z=e}finally{try{!k&&j.return&&j.return()}finally{if(O)throw z}}++a,++s}return t.join("")},x=function(e){return y(e,function(e){return h.test(e)?"xn--"+E(e):e})},R=function(e){return y(e,function(e){return u.test(e)?P(e.slice(4).toLowerCase()):e})},C={};function T(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function I(e){for(var t="",r=0,s=e.length;r<s;){var a=parseInt(e.substr(r+1,2),16);if(a<128)t+=String.fromCharCode(a),r+=3;else if(a>=194&&a<224){if(s-r>=6){var o=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&a)<<6|63&o)}else t+=e.substr(r,6);r+=6}else if(a>=224){if(s-r>=9){var i=parseInt(e.substr(r+4,2),16),n=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&a)<<12|(63&i)<<6|63&n)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function k(e,t){function r(e){var r=I(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,T).replace(t.PCT_ENCODED,a)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,T).replace(t.PCT_ENCODED,a)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,T).replace(t.PCT_ENCODED,a)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,T).replace(t.PCT_ENCODED,a)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,T).replace(t.PCT_ENCODED,a)),e}function O(e){return e.replace(/^0*(.*)/,"$1")||"0"}function z(e,t){var r=e.match(t.IPV4ADDRESS)||[],s=c(r,2)[1];return s?s.split(".").map(O).join("."):e}function N(e,t){var r=e.match(t.IPV6ADDRESS)||[],s=c(r,3),a=s[1],o=s[2];if(a){for(var i=a.toLowerCase().split("::").reverse(),n=c(i,2),l=n[0],d=n[1],u=d?d.split(":").map(O):[],h=l.split(":").map(O),p=t.IPV4ADDRESS.test(h[h.length-1]),f=p?7:8,m=h.length-f,v=Array(f),g=0;g<f;++g)v[g]=u[g]||h[m+g]||"";p&&(v[f-1]=z(v[f-1],t));var y=v.reduce(function(e,t,r){if(!t||"0"===t){var s=e[e.length-1];s&&s.index+s.length===r?s.length++:e.push({index:r,length:1})}return e},[]).sort(function(e,t){return t.length-e.length})[0],_=void 0;if(y&&y.length>1){var b=v.slice(0,y.index),S=v.slice(y.index+y.length);_=b.join(":")+"::"+S.join(":")}else _=v.join(":");return o&&(_+="%"+o),_}return e}var j=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,A=void 0==="".match(/(){0}/)[1];function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},s=!1!==t.iri?n:i;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var a=e.match(j);if(a){A?(r.scheme=a[1],r.userinfo=a[3],r.host=a[4],r.port=parseInt(a[5],10),r.path=a[6]||"",r.query=a[7],r.fragment=a[8],isNaN(r.port)&&(r.port=a[5])):(r.scheme=a[1]||void 0,r.userinfo=-1!==e.indexOf("@")?a[3]:void 0,r.host=-1!==e.indexOf("//")?a[4]:void 0,r.port=parseInt(a[5],10),r.path=a[6]||"",r.query=-1!==e.indexOf("?")?a[7]:void 0,r.fragment=-1!==e.indexOf("#")?a[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?a[4]:void 0)),r.host&&(r.host=N(z(r.host,s),s)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var o=C[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)k(r,s);else{if(r.host&&(t.domainHost||o&&o.domainHost))try{r.host=x(r.host.replace(s.PCT_ENCODED,I).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}k(r,i)}o&&o.parse&&o.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}var L=/^\.\.?\//,$=/^\/\.(\/|$)/,U=/^\/\.\.(\/|$)/,Z=/^\/?(?:.|\n)*?(?=\/|$)/;function F(e){for(var t=[];e.length;)if(e.match(L))e=e.replace(L,"");else if(e.match($))e=e.replace($,"/");else if(e.match(U))e=e.replace(U,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(Z);if(!r)throw new Error("Unexpected dot segment condition");var s=r[0];e=e.slice(s.length),t.push(s)}return t.join("")}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?n:i,s=[],a=C[(t.scheme||e.scheme||"").toLowerCase()];if(a&&a.serialize&&a.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||a&&a.domainHost)try{e.host=t.iri?R(e.host):x(e.host.replace(r.PCT_ENCODED,I).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}k(e,r),"suffix"!==t.reference&&e.scheme&&(s.push(e.scheme),s.push(":"));var o=function(e,t){var r=!1!==t.iri?n:i,s=[];return void 0!==e.userinfo&&(s.push(e.userinfo),s.push("@")),void 0!==e.host&&s.push(N(z(String(e.host),r),r).replace(r.IPV6ADDRESS,function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"})),"number"!=typeof e.port&&"string"!=typeof e.port||(s.push(":"),s.push(String(e.port))),s.length?s.join(""):void 0}(e,t);if(void 0!==o&&("suffix"!==t.reference&&s.push("//"),s.push(o),e.path&&"/"!==e.path.charAt(0)&&s.push("/")),void 0!==e.path){var c=e.path;t.absolutePath||a&&a.absolutePath||(c=F(c)),void 0===o&&(c=c.replace(/^\/\//,"/%2F")),s.push(c)}return void 0!==e.query&&(s.push("?"),s.push(e.query)),void 0!==e.fragment&&(s.push("#"),s.push(e.fragment)),s.join("")}function q(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s={};return arguments[3]||(e=D(M(e,r),r),t=D(M(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=F(t.path||""),s.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=F(t.path||""),s.query=t.query):(t.path?("/"===t.path.charAt(0)?s.path=F(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path:s.path="/"+t.path,s.path=F(s.path)),s.query=t.query):(s.path=e.path,void 0!==t.query?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function V(e,t){return e&&e.toString().replace(t&&t.iri?n.PCT_ENCODED:i.PCT_ENCODED,I)}var B={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},H={scheme:"https",domainHost:B.domainHost,parse:B.parse,serialize:B.serialize};function W(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var K={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=W(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(W(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),s=c(r,2),a=s[0],o=s[1];e.path=a&&"/"!==a?a:void 0,e.query=o,e.resourceName=void 0}return e.fragment=void 0,e}},Q={scheme:"wss",domainHost:K.domainHost,parse:K.parse,serialize:K.serialize},J={},G="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Y="[0-9A-Fa-f]",X=r(r("%[EFef]"+Y+"%"+Y+Y+"%"+Y+Y)+"|"+r("%[89A-Fa-f]"+Y+"%"+Y+Y)+"|"+r("%"+Y+Y)),ee=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),te=new RegExp(G,"g"),re=new RegExp(X,"g"),se=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',ee),"g"),ae=new RegExp(t("[^]",G,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),oe=ae;function ie(e){var t=I(e);return t.match(te)?t:e}var ne={scheme:"mailto",parse:function(e,t){var r=e,s=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var a=!1,o={},i=r.query.split("&"),n=0,c=i.length;n<c;++n){var l=i[n].split("=");switch(l[0]){case"to":for(var d=l[1].split(","),u=0,h=d.length;u<h;++u)s.push(d[u]);break;case"subject":r.subject=V(l[1],t);break;case"body":r.body=V(l[1],t);break;default:a=!0,o[V(l[0],t)]=V(l[1],t)}}a&&(r.headers=o)}r.query=void 0;for(var p=0,f=s.length;p<f;++p){var m=s[p].split("@");if(m[0]=V(m[0]),t.unicodeSupport)m[1]=V(m[1],t).toLowerCase();else try{m[1]=x(V(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}s[p]=m.join("@")}return r},serialize:function(e,t){var r,s=e,o=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(o){for(var i=0,n=o.length;i<n;++i){var c=String(o[i]),l=c.lastIndexOf("@"),d=c.slice(0,l).replace(re,ie).replace(re,a).replace(se,T),u=c.slice(l+1);try{u=t.iri?R(u):x(V(u,t).toLowerCase())}catch(e){s.error=s.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}o[i]=d+"@"+u}s.path=o.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var p=[];for(var f in h)h[f]!==J[f]&&p.push(f.replace(re,ie).replace(re,a).replace(ae,T)+"="+h[f].replace(re,ie).replace(re,a).replace(oe,T));return p.length&&(s.query=p.join("&")),s}},ce=/^([^\:]+)\:(.*)/,le={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(ce),s=e;if(r){var a=t.scheme||s.scheme||"urn",o=r[1].toLowerCase(),i=r[2],n=a+":"+(t.nid||o),c=C[n];s.nid=o,s.nss=i,s.path=void 0,c&&(s=c.parse(s,t))}else s.error=s.error||"URN can not be parsed.";return s},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",s=e.nid,a=r+":"+(t.nid||s),o=C[a];o&&(e=o.serialize(e,t));var i=e,n=e.nss;return i.path=(s||t.nid)+":"+n,i}},de=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ue={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(de)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};C[B.scheme]=B,C[H.scheme]=H,C[K.scheme]=K,C[Q.scheme]=Q,C[ne.scheme]=ne,C[le.scheme]=le,C[ue.scheme]=ue,e.SCHEMES=C,e.pctEncChar=T,e.pctDecChars=I,e.parse=D,e.removeDotSegments=F,e.serialize=M,e.resolveComponents=q,e.resolve=function(e,t,r){var s=function(e,t){var r=e;if(t)for(var s in t)r[s]=t[s];return r}({scheme:"null"},r);return M(q(D(e,s),D(t,s),s,!0),s)},e.normalize=function(e,t){return"string"==typeof e?e=M(D(e,t),t):"object"===s(e)&&(e=D(M(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=M(D(e,r),r):"object"===s(e)&&(e=M(e,r)),"string"==typeof t?t=M(D(t,r),r):"object"===s(t)&&(t=M(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?n.ESCAPE:i.ESCAPE,T)},e.unescapeComponent=V,Object.defineProperty(e,"__esModule",{value:!0})}(t)},6677:e=>{"use strict";e.exports=function(e,t,r){var s=" ",a=e.level,o=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(o||""),u="errs__"+a,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0||!1===i:e.util.schemaHasRules(i,e.RULES.all)){h.schema=i,h.schemaPath=n,h.errSchemaPath=c,s+=" var "+u+" = errors;  ";var f,m=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1,h.opts.allErrors&&(f=h.opts.allErrors,h.opts.allErrors=!1),s+=" "+e.validate(h)+" ",h.createErrors=!0,f&&(h.opts.allErrors=f),e.compositeRule=h.compositeRule=m,s+=" if ("+p+") {   ";var v=v||[];v.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(s+=" , message: 'should NOT be valid' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var g=s;s=v.pop(),!e.compositeRule&&l?e.async?s+=" throw new ValidationError(["+g+"]); ":s+=" validate.errors = ["+g+"]; return false; ":s+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; } ",e.opts.allErrors&&(s+=" } ")}else s+="  var err =   ",!1!==e.createErrors?(s+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(s+=" , message: 'should NOT be valid' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(s+=" if (false) { ");return s}},6728:(e,t,r)=>{"use strict";e.exports={$ref:r(9973),allOf:r(4422),anyOf:r(6199),$comment:r(393),const:r(2019),contains:r(8463),dependencies:r(9415),enum:r(9943),format:r(3405),if:r(3249),items:r(4276),maximum:r(246),minimum:r(246),maxItems:r(6924),minItems:r(6924),maxLength:r(5294),minLength:r(5294),maxProperties:r(3107),minProperties:r(3107),multipleOf:r(7187),not:r(6677),oneOf:r(7437),pattern:r(2578),properties:r(4491),propertyNames:r(8007),required:r(8375),uniqueItems:r(8621),validate:r(3248)}},6790:(e,t,r)=>{"use strict";var s=r(6728),a=r(6489).toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=a(t),e.types=a(["number","integer","string","array","object","boolean","null"]),e.forEach(function(r){r.rules=r.rules.map(function(r){var a;if("object"==typeof r){var o=Object.keys(r)[0];a=r[o],r=o,a.forEach(function(r){t.push(r),e.all[r]=!0})}return t.push(r),e.all[r]={keyword:r,code:s[r],implements:a}}),e.all.$comment={keyword:"$comment",code:s.$comment},r.type&&(e.types[r.type]=r)}),e.keywords=a(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},6911:(e,t,r)=>{const s="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,a=r(6928),o=s?";":":",i=r(1147),n=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),c=(e,t)=>{const r=t.colon||o,a=e.match(/\//)||s&&e.match(/\\/)?[""]:[...s?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],i=s?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",n=s?i.split(r):[""];return s&&-1!==e.indexOf(".")&&""!==n[0]&&n.unshift(""),{pathEnv:a,pathExt:n,pathExtExe:i}},l=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),t||(t={});const{pathEnv:s,pathExt:o,pathExtExe:l}=c(e,t),d=[],u=r=>new Promise((o,i)=>{if(r===s.length)return t.all&&d.length?o(d):i(n(e));const c=s[r],l=/^".*"$/.test(c)?c.slice(1,-1):c,u=a.join(l,e),p=!l&&/^\.[\\\/]/.test(e)?e.slice(0,2)+u:u;o(h(p,r,0))}),h=(e,r,s)=>new Promise((a,n)=>{if(s===o.length)return a(u(r+1));const c=o[s];i(e+c,{pathExt:l},(o,i)=>{if(!o&&i){if(!t.all)return a(e+c);d.push(e+c)}return a(h(e,r,s+1))})});return r?u(0).then(e=>r(null,e),r):u(0)};e.exports=l,l.sync=(e,t)=>{t=t||{};const{pathEnv:r,pathExt:s,pathExtExe:o}=c(e,t),l=[];for(let n=0;n<r.length;n++){const c=r[n],d=/^".*"$/.test(c)?c.slice(1,-1):c,u=a.join(d,e),h=!d&&/^\.[\\\/]/.test(e)?e.slice(0,2)+u:u;for(let e=0;e<s.length;e++){const r=h+s[e];try{if(i.sync(r,{pathExt:o})){if(!t.all)return r;l.push(r)}}catch(e){}}}if(t.all&&l.length)return l;if(t.nothrow)return null;throw n(e)}},6924:e=>{"use strict";e.exports=function(e,t,r){var s,a=" ",o=e.level,i=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(i||""),h=e.opts.$data&&n&&n.$data;if(h?(a+=" var schema"+o+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",s="schema"+o):s=n,!h&&"number"!=typeof n)throw new Error(t+" must be number");a+="if ( ",h&&(a+=" ("+s+" !== undefined && typeof "+s+" != 'number') || "),a+=" "+u+".length "+("maxItems"==t?">":"<")+" "+s+") { ";var p=t,f=f||[];f.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(p||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+s+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have ",a+="maxItems"==t?"more":"fewer",a+=" than ",a+=h?"' + "+s+" + '":""+n,a+=" items' "),e.opts.verbose&&(a+=" , schema:  ",a+=h?"validate.schema"+c:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var m=a;return a=f.pop(),!e.compositeRule&&d?e.async?a+=" throw new ValidationError(["+m+"]); ":a+=" validate.errors = ["+m+"]; return false; ":a+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",d&&(a+=" else { "),a}},6928:e=>{"use strict";e.exports=require("path")},6982:e=>{"use strict";e.exports=require("crypto")},7016:e=>{"use strict";e.exports=require("url")},7027:e=>{"use strict";var t=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,r){for(var s=0;s<r.length;s++){e=JSON.parse(JSON.stringify(e));var a,o=r[s].split("/"),i=e;for(a=1;a<o.length;a++)i=i[o[a]];for(a=0;a<t.length;a++){var n=t[a],c=i[n];c&&(i[n]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e}},7075:e=>{"use strict";e.exports=require("node:stream")},7187:e=>{"use strict";e.exports=function(e,t,r){var s,a=" ",o=e.level,i=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(i||""),h=e.opts.$data&&n&&n.$data;if(h?(a+=" var schema"+o+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",s="schema"+o):s=n,!h&&"number"!=typeof n)throw new Error(t+" must be number");a+="var division"+o+";if (",h&&(a+=" "+s+" !== undefined && ( typeof "+s+" != 'number' || "),a+=" (division"+o+" = "+u+" / "+s+", ",e.opts.multipleOfPrecision?a+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":a+=" division"+o+" !== parseInt(division"+o+") ",a+=" ) ",h&&(a+="  )  "),a+=" ) {   ";var p=p||[];p.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { multipleOf: "+s+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be multiple of ",a+=h?"' + "+s:s+"'"),e.opts.verbose&&(a+=" , schema:  ",a+=h?"validate.schema"+c:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var f=a;return a=p.pop(),!e.compositeRule&&d?e.async?a+=" throw new ValidationError(["+f+"]); ":a+=" validate.errors = ["+f+"]; return false; ":a+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",d&&(a+=" else { "),a}},7355:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(6982);t.default=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),(0,s.createHash)("md5").update(e).digest()}},7380:(e,t,r)=>{"use strict";var s=/^[a-z_$][a-z0-9_$-]*$/i,a=r(3873),o=r(7922);e.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!s.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var o=t.type;if(Array.isArray(o))for(var i=0;i<o.length;i++)c(e,o[i],t);else c(e,o,t);var n=t.metaSchema;n&&(t.$data&&this._opts.$data&&(n={anyOf:[n,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(n,!0))}function c(e,t,s){for(var o,i=0;i<r.length;i++){var n=r[i];if(n.type==t){o=n;break}}o||(o={type:t,rules:[]},r.push(o));var c={keyword:e,definition:s,custom:!0,code:a,implements:s.implements};o.rules.push(c),r.custom[e]=c}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var s=t[r].rules,a=0;a<s.length;a++)if(s[a].keyword==e){s.splice(a,1);break}return this},validate:function e(t,r){e.errors=null;var s=this._validateKeyword=this._validateKeyword||this.compile(o,!0);if(s(t))return!0;if(e.errors=s.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(s.errors));return!1}}},7437:e=>{"use strict";e.exports=function(e,t,r){var s=" ",a=e.level,o=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(o||""),u="valid"+a,h="errs__"+a,p=e.util.copy(e),f="";p.level++;var m="valid"+p.level,v=p.baseId,g="prevValid"+a,y="passingSchemas"+a;s+="var "+h+" = errors , "+g+" = false , "+u+" = false , "+y+" = null; ";var _=e.compositeRule;e.compositeRule=p.compositeRule=!0;var b=i;if(b)for(var S,w=-1,P=b.length-1;w<P;)S=b[w+=1],(e.opts.strictKeywords?"object"==typeof S&&Object.keys(S).length>0||!1===S:e.util.schemaHasRules(S,e.RULES.all))?(p.schema=S,p.schemaPath=n+"["+w+"]",p.errSchemaPath=c+"/"+w,s+="  "+e.validate(p)+" ",p.baseId=v):s+=" var "+m+" = true; ",w&&(s+=" if ("+m+" && "+g+") { "+u+" = false; "+y+" = ["+y+", "+w+"]; } else { ",f+="}"),s+=" if ("+m+") { "+u+" = "+g+" = true; "+y+" = "+w+"; }";return e.compositeRule=p.compositeRule=_,s+=f+"if (!"+u+") {   var err =   ",!1!==e.createErrors?(s+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+y+" } ",!1!==e.opts.messages&&(s+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; "),s+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(s+=" } "),s}},7521:e=>{"use strict";e.exports=/^#!(.*)/},7533:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Protocol=t.DEFAULT_REQUEST_TIMEOUT_MSEC=void 0,t.mergeCapabilities=function(e,t){return Object.entries(t).reduce((e,[t,r])=>(e[t]=r&&"object"==typeof r&&e[t]?{...e[t],...r}:r,e),{...e})};const s=r(1294);t.DEFAULT_REQUEST_TIMEOUT_MSEC=6e4,t.Protocol=class{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this.setNotificationHandler(s.CancelledNotificationSchema,e=>{const t=this._requestHandlerAbortControllers.get(e.params.requestId);null==t||t.abort(e.params.reason)}),this.setNotificationHandler(s.ProgressNotificationSchema,e=>{this._onprogress(e)}),this.setRequestHandler(s.PingRequestSchema,e=>({}))}_setupTimeout(e,t,r,s,a=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(s,t),startTime:Date.now(),timeout:t,maxTotalTimeout:r,resetTimeoutOnProgress:a,onTimeout:s})}_resetTimeout(e){const t=this._timeoutInfo.get(e);if(!t)return!1;const r=Date.now()-t.startTime;if(t.maxTotalTimeout&&r>=t.maxTotalTimeout)throw this._timeoutInfo.delete(e),new s.McpError(s.ErrorCode.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:t.maxTotalTimeout,totalElapsed:r});return clearTimeout(t.timeoutId),t.timeoutId=setTimeout(t.onTimeout,t.timeout),!0}_cleanupTimeout(e){const t=this._timeoutInfo.get(e);t&&(clearTimeout(t.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var t,r,a;this._transport=e;const o=null===(t=this.transport)||void 0===t?void 0:t.onclose;this._transport.onclose=()=>{null==o||o(),this._onclose()};const i=null===(r=this.transport)||void 0===r?void 0:r.onerror;this._transport.onerror=e=>{null==i||i(e),this._onerror(e)};const n=null===(a=this._transport)||void 0===a?void 0:a.onmessage;this._transport.onmessage=(e,t)=>{null==n||n(e,t),(0,s.isJSONRPCResponse)(e)||(0,s.isJSONRPCError)(e)?this._onresponse(e):(0,s.isJSONRPCRequest)(e)?this._onrequest(e,t):(0,s.isJSONRPCNotification)(e)?this._onnotification(e):this._onerror(new Error(`Unknown message type: ${JSON.stringify(e)}`))},await this._transport.start()}_onclose(){var e;const t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._transport=void 0,null===(e=this.onclose)||void 0===e||e.call(this);const r=new s.McpError(s.ErrorCode.ConnectionClosed,"Connection closed");for(const e of t.values())e(r)}_onerror(e){var t;null===(t=this.onerror)||void 0===t||t.call(this,e)}_onnotification(e){var t;const r=null!==(t=this._notificationHandlers.get(e.method))&&void 0!==t?t:this.fallbackNotificationHandler;void 0!==r&&Promise.resolve().then(()=>r(e)).catch(e=>this._onerror(new Error(`Uncaught error in notification handler: ${e}`)))}_onrequest(e,t){var r,a,o,i;const n=null!==(r=this._requestHandlers.get(e.method))&&void 0!==r?r:this.fallbackRequestHandler;if(void 0===n)return void(null===(a=this._transport)||void 0===a||a.send({jsonrpc:"2.0",id:e.id,error:{code:s.ErrorCode.MethodNotFound,message:"Method not found"}}).catch(e=>this._onerror(new Error(`Failed to send an error response: ${e}`))));const c=new AbortController;this._requestHandlerAbortControllers.set(e.id,c);const l={signal:c.signal,sessionId:null===(o=this._transport)||void 0===o?void 0:o.sessionId,_meta:null===(i=e.params)||void 0===i?void 0:i._meta,sendNotification:t=>this.notification(t,{relatedRequestId:e.id}),sendRequest:(t,r,s)=>this.request(t,r,{...s,relatedRequestId:e.id}),authInfo:null==t?void 0:t.authInfo,requestId:e.id,requestInfo:null==t?void 0:t.requestInfo};Promise.resolve().then(()=>n(e,l)).then(t=>{var r;if(!c.signal.aborted)return null===(r=this._transport)||void 0===r?void 0:r.send({result:t,jsonrpc:"2.0",id:e.id})},t=>{var r,a;if(!c.signal.aborted)return null===(r=this._transport)||void 0===r?void 0:r.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(t.code)?t.code:s.ErrorCode.InternalError,message:null!==(a=t.message)&&void 0!==a?a:"Internal error"}})}).catch(e=>this._onerror(new Error(`Failed to send response: ${e}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){const{progressToken:t,...r}=e.params,s=Number(t),a=this._progressHandlers.get(s);if(!a)return void this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));const o=this._responseHandlers.get(s),i=this._timeoutInfo.get(s);if(i&&o&&i.resetTimeoutOnProgress)try{this._resetTimeout(s)}catch(e){return void o(e)}a(r)}_onresponse(e){const t=Number(e.id),r=this._responseHandlers.get(t);void 0!==r?(this._responseHandlers.delete(t),this._progressHandlers.delete(t),this._cleanupTimeout(t),(0,s.isJSONRPCResponse)(e)?r(e):r(new s.McpError(e.error.code,e.error.message,e.error.data))):this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`))}get transport(){return this._transport}async close(){var e;await(null===(e=this._transport)||void 0===e?void 0:e.close())}request(e,r,a){const{relatedRequestId:o,resumptionToken:i,onresumptiontoken:n}=null!=a?a:{};return new Promise((c,l)=>{var d,u,h,p,f,m;if(!this._transport)return void l(new Error("Not connected"));!0===(null===(d=this._options)||void 0===d?void 0:d.enforceStrictCapabilities)&&this.assertCapabilityForMethod(e.method),null===(u=null==a?void 0:a.signal)||void 0===u||u.throwIfAborted();const v=this._requestMessageId++,g={...e,jsonrpc:"2.0",id:v};(null==a?void 0:a.onprogress)&&(this._progressHandlers.set(v,a.onprogress),g.params={...e.params,_meta:{...(null===(h=e.params)||void 0===h?void 0:h._meta)||{},progressToken:v}});const y=e=>{var t;this._responseHandlers.delete(v),this._progressHandlers.delete(v),this._cleanupTimeout(v),null===(t=this._transport)||void 0===t||t.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:v,reason:String(e)}},{relatedRequestId:o,resumptionToken:i,onresumptiontoken:n}).catch(e=>this._onerror(new Error(`Failed to send cancellation: ${e}`))),l(e)};this._responseHandlers.set(v,e=>{var t;if(!(null===(t=null==a?void 0:a.signal)||void 0===t?void 0:t.aborted)){if(e instanceof Error)return l(e);try{const t=r.parse(e.result);c(t)}catch(e){l(e)}}}),null===(p=null==a?void 0:a.signal)||void 0===p||p.addEventListener("abort",()=>{var e;y(null===(e=null==a?void 0:a.signal)||void 0===e?void 0:e.reason)});const _=null!==(f=null==a?void 0:a.timeout)&&void 0!==f?f:t.DEFAULT_REQUEST_TIMEOUT_MSEC;this._setupTimeout(v,_,null==a?void 0:a.maxTotalTimeout,()=>y(new s.McpError(s.ErrorCode.RequestTimeout,"Request timed out",{timeout:_})),null!==(m=null==a?void 0:a.resetTimeoutOnProgress)&&void 0!==m&&m),this._transport.send(g,{relatedRequestId:o,resumptionToken:i,onresumptiontoken:n}).catch(e=>{this._cleanupTimeout(v),l(e)})})}async notification(e,t){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);const r={...e,jsonrpc:"2.0"};await this._transport.send(r,t)}setRequestHandler(e,t){const r=e.shape.method.value;this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(r,s)=>Promise.resolve(t(e.parse(r),s)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,t){this._notificationHandlers.set(e.shape.method.value,r=>Promise.resolve(t(e.parse(r))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}}},7552:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,a)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return a(t,e),t},i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.z=void 0;const n=o(r(9164));t.z=n,i(r(9164),t),t.default=n},7598:e=>{"use strict";e.exports=require("node:crypto")},7699:(e,t,r)=>{"use strict";const s=r(1060);s.createWebSocketStream=r(3719),s.Server=r(1722),s.Receiver=r(6286),s.Sender=r(914),s.WebSocket=s,s.WebSocketServer=s.Server,e.exports=s},7766:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(6982);t.default=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),(0,s.createHash)("sha1").update(e).digest()}},7922:(e,t,r)=>{"use strict";var s=r(5049);e.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:s.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:s.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},7971:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(3202),a=r(458),o=r(3891);t.default=function(e,t,r){e??={},r??=0;let i=(0,a.default)({...e,_v6:!0},new Uint8Array(16));if(i=(0,o.default)(i),t){for(let e=0;e<16;e++)t[r+e]=i[e];return t}return(0,s.unsafeStringify)(i)}},8007:e=>{"use strict";e.exports=function(e,t,r){var s=" ",a=e.level,o=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(o||""),u="errs__"+a,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(s+="var "+u+" = errors;",e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0||!1===i:e.util.schemaHasRules(i,e.RULES.all)){h.schema=i,h.schemaPath=n,h.errSchemaPath=c;var f="key"+a,m="idx"+a,v="i"+a,g="' + "+f+" + '",y="data"+(h.dataLevel=e.dataLevel+1),_="dataProperties"+a,b=e.opts.ownProperties,S=e.baseId;b&&(s+=" var "+_+" = undefined; "),s+=b?" "+_+" = "+_+" || Object.keys("+d+"); for (var "+m+"=0; "+m+"<"+_+".length; "+m+"++) { var "+f+" = "+_+"["+m+"]; ":" for (var "+f+" in "+d+") { ",s+=" var startErrs"+a+" = errors; ";var w=f,P=e.compositeRule;e.compositeRule=h.compositeRule=!0;var E=e.validate(h);h.baseId=S,e.util.varOccurences(E,y)<2?s+=" "+e.util.varReplace(E,y,w)+" ":s+=" var "+y+" = "+w+"; "+E+" ",e.compositeRule=h.compositeRule=P,s+=" if (!"+p+") { for (var "+v+"=startErrs"+a+"; "+v+"<errors; "+v+"++) { vErrors["+v+"].propertyName = "+f+"; }   var err =   ",!1!==e.createErrors?(s+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+g+"' } ",!1!==e.opts.messages&&(s+=" , message: 'property name \\'"+g+"\\' is invalid' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; "),l&&(s+=" break; "),s+=" } }"}return l&&(s+="  if ("+u+" == errors) {"),s}},8156:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(7699),a=r(3207),o=r(3906),i=r(443),n=r(5827);class c{connections=new Map;async connect(e){if(this.connections.has(e.id))throw new Error(`Server with id ${e.id} is already connected.`);const t=new a.Client({name:"mcp-intermediary-client",version:"1.0.0"});let r;console.log(`[MCP Intermediary] Attempting to connect to ${e.name} via ${e.type}`);try{if("stdio"===e.type)r=new o.StdioClientTransport({command:e.command,args:e.args,cwd:e.cwd,env:e.env});else{if("http"!==e.type)throw new Error(`Unsupported transport type: ${e.type}`);r=new i.StreamableHTTPClientTransport(new URL(e.url))}await t.connect(r);const{tools:s}=await t.listTools(),a={id:e.id,client:t,transport:r,config:e,tools:s};return this.connections.set(e.id,a),console.log(`[MCP Intermediary] Successfully connected to ${e.name} with ${s.length} tools.`),a}catch(t){throw console.error(`[MCP Intermediary] Failed to connect to ${e.name}:`,t),t}}async disconnect(e){const t=this.connections.get(e);if(!t)throw new Error(`No active connection found with id ${e}.`);try{await t.client.close(),this.connections.delete(e),console.log(`[MCP Intermediary] Successfully disconnected from ${t.config.name}.`)}catch(r){throw console.error(`[MCP Intermediary] Error while disconnecting from ${t.config.name}:`,r),this.connections.delete(e),r}}getConnection(e){return this.connections.get(e)}listConnections(){return Array.from(this.connections.values()).map(e=>e.config)}}e.exports={info:{name:"MCP Intermediary",id:"mcp-intermediary",description:"Manages and intermediates MCP tool calls.",version:"1.0.0"},init:async e=>{console.log("[MCP Intermediary] Backend plugin initializing...");const t=new c,r=new s.WebSocketServer({port:8081});r.on("listening",()=>{console.log("[MCP Intermediary] WebSocket server listening on port 8081.")}),r.on("connection",e=>{console.log("[MCP Intermediary] Frontend client connected via WebSocket."),e.on("message",async r=>{try{const s=JSON.parse(r.toString()),{action:a,payload:o,requestId:i}=s,c=t=>e.send(JSON.stringify(t));switch(a){case"connect":try{const e={...o,id:o.id||(0,n.v4)()},r=await t.connect(e);c({status:"success",action:"connect",requestId:i,data:{id:e.id,tools:r.tools}})}catch(e){c({status:"error",action:a,requestId:i,message:e.message})}break;case"disconnect":try{await t.disconnect(o.id),c({status:"success",action:a,requestId:i,data:{id:o.id}})}catch(e){c({status:"error",action:a,requestId:i,message:e.message})}break;case"listConnections":c({status:"success",action:a,requestId:i,data:t.listConnections()});break;case"callTool":try{const{serverId:e,toolName:r,args:s}=o,n=t.getConnection(e);if(!n)throw new Error(`Server with id ${e} not found or not connected.`);c({status:"success",action:a,requestId:i,data:await n.client.callTool({name:r,arguments:s})})}catch(e){c({status:"error",action:a,requestId:i,message:e.message})}break;default:c({status:"error",action:a,requestId:i,message:`Unknown action: ${a}`})}}catch(t){console.error("[MCP Intermediary] Error processing WebSocket message:",t),e.send(JSON.stringify({status:"error",message:"Invalid message format."}))}}),e.on("close",()=>{console.log("[MCP Intermediary] Frontend client disconnected.")})}),r.on("error",e=>{console.error("[MCP Intermediary] WebSocket server error:",e)}),console.log("[MCP Intermediary] Backend plugin initialized successfully.")}}},8157:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=t.stringToBytes=void 0;const s=r(2524),a=r(3202);function o(e){e=unescape(encodeURIComponent(e));const t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r);return t}t.stringToBytes=o,t.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",t.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",t.default=function(e,t,r,i,n,c){const l="string"==typeof r?o(r):r,d="string"==typeof i?(0,s.default)(i):i;if("string"==typeof i&&(i=(0,s.default)(i)),16!==i?.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+l.length);if(u.set(d),u.set(l,d.length),u=t(u),u[6]=15&u[6]|e,u[8]=63&u[8]|128,n){c=c||0;for(let e=0;e<16;++e)n[c+e]=u[e];return n}return(0,a.unsafeStringify)(u)}},8237:(e,t,r)=>{"use strict";const{tokenChars:s}=r(5880);e.exports={parse:function(e){const t=new Set;let r=-1,a=-1,o=0;for(;o<e.length;o++){const i=e.charCodeAt(o);if(-1===a&&1===s[i])-1===r&&(r=o);else if(0===o||32!==i&&9!==i){if(44!==i)throw new SyntaxError(`Unexpected character at index ${o}`);{if(-1===r)throw new SyntaxError(`Unexpected character at index ${o}`);-1===a&&(a=o);const s=e.slice(r,a);if(t.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);t.add(s),r=a=-1}}else-1===a&&-1!==r&&(a=o)}if(-1===r||-1!==a)throw new SyntaxError("Unexpected end of input");const i=e.slice(r,o);if(t.has(i))throw new SyntaxError(`The "${i}" subprotocol is duplicated`);return t.add(i),t}}},8375:e=>{"use strict";e.exports=function(e,t,r){var s=" ",a=e.level,o=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(o||""),u="valid"+a,h=e.opts.$data&&i&&i.$data;h&&(s+=" var schema"+a+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ");var p="schema"+a;if(!h)if(i.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var f=[],m=i;if(m)for(var v,g=-1,y=m.length-1;g<y;){v=m[g+=1];var _=e.schema.properties[v];_&&(e.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0||!1===_:e.util.schemaHasRules(_,e.RULES.all))||(f[f.length]=v)}}else f=i;if(h||f.length){var b=e.errorPath,S=h||f.length>=e.opts.loopRequired,w=e.opts.ownProperties;if(l)if(s+=" var missing"+a+"; ",S){h||(s+=" var "+p+" = validate.schema"+n+"; ");var P="' + "+(I="schema"+a+"["+(C="i"+a)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,I,e.opts.jsonPointers)),s+=" var "+u+" = true; ",h&&(s+=" if (schema"+a+" === undefined) "+u+" = true; else if (!Array.isArray(schema"+a+")) "+u+" = false; else {"),s+=" for (var "+C+" = 0; "+C+" < "+p+".length; "+C+"++) { "+u+" = "+d+"["+p+"["+C+"]] !== undefined ",w&&(s+=" &&   Object.prototype.hasOwnProperty.call("+d+", "+p+"["+C+"]) "),s+="; if (!"+u+") break; } ",h&&(s+="  }  "),s+="  if (!"+u+") {   ",(x=x||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",!1!==e.opts.messages&&(s+=" , message: '",e.opts._errorDataPathProperty?s+="is a required property":s+="should have required property \\'"+P+"\\'",s+="' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var E=s;s=x.pop(),!e.compositeRule&&l?e.async?s+=" throw new ValidationError(["+E+"]); ":s+=" validate.errors = ["+E+"]; return false; ":s+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } else { "}else{s+=" if ( ";var x,R=f;if(R)for(var C=-1,T=R.length-1;C<T;)O=R[C+=1],C&&(s+=" || "),s+=" ( ( "+(A=d+(j=e.util.getProperty(O)))+" === undefined ",w&&(s+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(O)+"') "),s+=") && (missing"+a+" = "+e.util.toQuotedString(e.opts.jsonPointers?O:j)+") ) ";s+=") {  ",P="' + "+(I="missing"+a)+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,I,!0):b+" + "+I),(x=x||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",!1!==e.opts.messages&&(s+=" , message: '",e.opts._errorDataPathProperty?s+="is a required property":s+="should have required property \\'"+P+"\\'",s+="' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ",E=s,s=x.pop(),!e.compositeRule&&l?e.async?s+=" throw new ValidationError(["+E+"]); ":s+=" validate.errors = ["+E+"]; return false; ":s+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } else { "}else if(S){var I;h||(s+=" var "+p+" = validate.schema"+n+"; "),P="' + "+(I="schema"+a+"["+(C="i"+a)+"]")+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,I,e.opts.jsonPointers)),h&&(s+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",!1!==e.createErrors?(s+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",!1!==e.opts.messages&&(s+=" , message: '",e.opts._errorDataPathProperty?s+="is a required property":s+="should have required property \\'"+P+"\\'",s+="' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),s+=" for (var "+C+" = 0; "+C+" < "+p+".length; "+C+"++) { if ("+d+"["+p+"["+C+"]] === undefined ",w&&(s+=" || ! Object.prototype.hasOwnProperty.call("+d+", "+p+"["+C+"]) "),s+=") {  var err =   ",!1!==e.createErrors?(s+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",!1!==e.opts.messages&&(s+=" , message: '",e.opts._errorDataPathProperty?s+="is a required property":s+="should have required property \\'"+P+"\\'",s+="' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(s+="  }  ")}else{var k=f;if(k)for(var O,z=-1,N=k.length-1;z<N;){O=k[z+=1];var j=e.util.getProperty(O),A=(P=e.util.escapeQuotes(O),d+j);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,O,e.opts.jsonPointers)),s+=" if ( "+A+" === undefined ",w&&(s+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(O)+"') "),s+=") {  var err =   ",!1!==e.createErrors?(s+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+P+"' } ",!1!==e.opts.messages&&(s+=" , message: '",e.opts._errorDataPathProperty?s+="is a required property":s+="should have required property \\'"+P+"\\'",s+="' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=b}else l&&(s+=" if (true) {");return s}},8463:e=>{"use strict";e.exports=function(e,t,r){var s=" ",a=e.level,o=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(o||""),u="valid"+a,h="errs__"+a,p=e.util.copy(e);p.level++;var f="valid"+p.level,m="i"+a,v=p.dataLevel=e.dataLevel+1,g="data"+v,y=e.baseId,_=e.opts.strictKeywords?"object"==typeof i&&Object.keys(i).length>0||!1===i:e.util.schemaHasRules(i,e.RULES.all);if(s+="var "+h+" = errors;var "+u+";",_){var b=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=i,p.schemaPath=n,p.errSchemaPath=c,s+=" var "+f+" = false; for (var "+m+" = 0; "+m+" < "+d+".length; "+m+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var S=d+"["+m+"]";p.dataPathArr[v]=m;var w=e.validate(p);p.baseId=y,e.util.varOccurences(w,g)<2?s+=" "+e.util.varReplace(w,g,S)+" ":s+=" var "+g+" = "+S+"; "+w+" ",s+=" if ("+f+") break; }  ",e.compositeRule=p.compositeRule=b,s+="  if (!"+f+") {"}else s+=" if ("+d+".length == 0) {";var P=P||[];P.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(s+=" , message: 'should contain a valid item' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var E=s;return s=P.pop(),!e.compositeRule&&l?e.async?s+=" throw new ValidationError(["+E+"]); ":s+=" validate.errors = ["+E+"]; return false; ":s+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" } else { ",_&&(s+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(s+=" } "),s}},8544:(e,t,r)=>{"use strict";var s=r(2305),a=r(805),o=r(2761),i=r(2424),n=r(2492),c=r(3369),l=r(6790),d=r(7027),u=r(6489);e.exports=g,g.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var s=this._addSchema(e);r=s.validate||this._compile(s)}var a=r(t);return!0!==r.$async&&(this.errors=r.errors),a},g.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},g.prototype.addSchema=function(e,t,r,s){if(Array.isArray(e)){for(var o=0;o<e.length;o++)this.addSchema(e[o],void 0,r,s);return this}var i=this._getId(e);if(void 0!==i&&"string"!=typeof i)throw new Error("schema id must be string");return P(this,t=a.normalizeId(t||i)),this._schemas[t]=this._addSchema(e,r,s,!0),this},g.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},g.prototype.validateSchema=function(e,t){var r,s,a=e.$schema;if(void 0!==a&&"string"!=typeof a)throw new Error("$schema must be a string");if(!(a=a||this._opts.defaultMeta||(r=this,s=r._opts.meta,r._opts.defaultMeta="object"==typeof s?r._getId(s)||s:r.getSchema(f)?f:void 0,r._opts.defaultMeta)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var o=this.validate(a,e);if(!o&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return o},g.prototype.getSchema=function(e){var t=y(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=a.schema.call(e,{schema:{}},t);if(r){var o=r.schema,n=r.root,c=r.baseId,l=s.call(e,o,n,void 0,c);return e._fragments[t]=new i({ref:t,fragment:!0,schema:o,root:n,baseId:c,validate:l}),l}}(this,e)}},g.prototype.removeSchema=function(e){if(e instanceof RegExp)return _(this,this._schemas,e),_(this,this._refs,e),this;switch(typeof e){case"undefined":return _(this,this._schemas),_(this,this._refs),this._cache.clear(),this;case"string":var t=y(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,s=r?r(e):e;this._cache.del(s);var o=this._getId(e);o&&(o=a.normalizeId(o),delete this._schemas[o],delete this._refs[o])}return this},g.prototype.addFormat=function(e,t){return"string"==typeof t&&(t=new RegExp(t)),this._formats[e]=t,this},g.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,s=void 0===t.dataVar?"data":t.dataVar,a="",o=0;o<e.length;o++){var i=e[o];i&&(a+=s+i.dataPath+" "+i.message+r)}return a.slice(0,-r.length)},g.prototype._addSchema=function(e,t,r,s){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var o=this._opts.serialize,n=o?o(e):e,c=this._cache.get(n);if(c)return c;s=s||!1!==this._opts.addUsedSchema;var l=a.normalizeId(this._getId(e));l&&s&&P(this,l);var d,u=!1!==this._opts.validateSchema&&!t;u&&!(d=l&&l==a.normalizeId(e.$schema))&&this.validateSchema(e,!0);var h=a.ids.call(this,e),p=new i({id:l,schema:e,localRefs:h,cacheKey:n,meta:r});return"#"!=l[0]&&s&&(this._refs[l]=p),this._cache.put(n,p),u&&d&&this.validateSchema(e,!0),p},g.prototype._compile=function(e,t){if(e.compiling)return e.validate=o,o.schema=e.schema,o.errors=null,o.root=t||o,!0===e.schema.$async&&(o.$async=!0),o;var r,a;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{a=s.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=a,e.refs=a.refs,e.refVal=a.refVal,e.root=a.root,a;function o(){var t=e.validate,r=t.apply(this,arguments);return o.errors=t.errors,r}},g.prototype.compileAsync=r(1377);var h=r(7380);g.prototype.addKeyword=h.add,g.prototype.getKeyword=h.get,g.prototype.removeKeyword=h.remove,g.prototype.validateKeyword=h.validate;var p=r(1296);g.ValidationError=p.Validation,g.MissingRefError=p.MissingRef,g.$dataMetaSchema=d;var f="http://json-schema.org/draft-07/schema",m=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],v=["/properties"];function g(e){if(!(this instanceof g))return new g(e);e=this._opts=u.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:E,warn:E,error:E};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=c(e.format),this._cache=e.cache||new o,this._loadingSchemas={},this._compilations=[],this.RULES=l(),this._getId=function(e){switch(e.schemaId){case"auto":return w;case"id":return b;default:return S}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=n),this._metaOpts=function(e){for(var t=u.copy(e._opts),r=0;r<m.length;r++)delete t[m[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;if(e._opts.$data&&(t=r(8595),e.addMetaSchema(t,t.$id,!0)),!1!==e._opts.meta){var s=r(5049);e._opts.$data&&(s=d(s,v)),e.addMetaSchema(s,f,!0),e._refs["http://json-schema.org/schema"]=f}}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function y(e,t){return t=a.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function _(e,t,r){for(var s in t){var a=t[s];a.meta||r&&!r.test(s)||(e._cache.del(a.cacheKey),delete t[s])}}function b(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function S(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function w(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function P(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function E(){}},8595:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},8597:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(1152),a=r(9942),o=r(3202);t.default=function(e,t,r){if(s.default.randomUUID&&!t&&!e)return s.default.randomUUID();const i=(e=e||{}).random??e.rng?.()??(0,a.default)();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){if((r=r||0)<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=i[e];return t}return(0,o.unsafeStringify)(i)}},8611:e=>{"use strict";e.exports=require("http")},8621:e=>{"use strict";e.exports=function(e,t,r){var s,a=" ",o=e.level,i=e.dataLevel,n=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(i||""),h="valid"+o,p=e.opts.$data&&n&&n.$data;if(p?(a+=" var schema"+o+" = "+e.util.getData(n.$data,i,e.dataPathArr)+"; ",s="schema"+o):s=n,(n||p)&&!1!==e.opts.uniqueItems){p&&(a+=" var "+h+"; if ("+s+" === false || "+s+" === undefined) "+h+" = true; else if (typeof "+s+" != 'boolean') "+h+" = false; else { "),a+=" var i = "+u+".length , "+h+" = true , j; if (i > 1) { ";var f=e.schema.items&&e.schema.items.type,m=Array.isArray(f);if(!f||"object"==f||"array"==f||m&&(f.indexOf("object")>=0||f.indexOf("array")>=0))a+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+u+"[i], "+u+"[j])) { "+h+" = false; break outer; } } } ";else{a+=" var itemIndices = {}, item; for (;i--;) { var item = "+u+"[i]; ";var v="checkDataType"+(m?"s":"");a+=" if ("+e.util[v](f,"item",e.opts.strictNumbers,!0)+") continue; ",m&&(a+=" if (typeof item == 'string') item = '\"' + item; "),a+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}a+=" } ",p&&(a+="  }  "),a+=" if (!"+h+") {   ";var g=g||[];g.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(a+=" , schema:  ",a+=p?"validate.schema"+c:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),a+=" } "):a+=" {} ";var y=a;a=g.pop(),!e.compositeRule&&d?e.async?a+=" throw new ValidationError(["+y+"]); ":a+=" validate.errors = ["+y+"]; return false; ":a+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",d&&(a+=" else { ")}else d&&(a+=" if (true) { ");return a}},8651:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZodError=t.quotelessJson=t.ZodIssueCode=void 0;const s=r(2034);t.ZodIssueCode=s.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),t.quotelessJson=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class a extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},r={_errors:[]},s=e=>{for(const a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(s);else if("invalid_return_type"===a.code)s(a.returnTypeError);else if("invalid_arguments"===a.code)s(a.argumentsError);else if(0===a.path.length)r._errors.push(t(a));else{let e=r,s=0;for(;s<a.path.length;){const r=a.path[s];s===a.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(a))):e[r]=e[r]||{_errors:[]},e=e[r],s++}}};return s(this),r}static assert(e){if(!(e instanceof a))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,s.util.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},r=[];for(const s of this.issues)if(s.path.length>0){const r=s.path[0];t[r]=t[r]||[],t[r].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}t.ZodError=a,a.create=e=>new a(e)},8873:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(3596);t.default=function(e){return"string"==typeof e&&s.default.test(e)}},8959:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(2524),a=r(3202);t.default=function(e){const t=(r="string"==typeof e?(0,s.default)(e):e,Uint8Array.of((15&r[3])<<4|r[4]>>4&15,(15&r[4])<<4|(240&r[5])>>4,(15&r[5])<<4|15&r[6],r[7],(15&r[1])<<4|(240&r[2])>>4,(15&r[2])<<4|(240&r[3])>>4,16|(240&r[0])>>4,(15&r[0])<<4|(240&r[1])>>4,r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]));var r;return"string"==typeof e?(0,a.unsafeStringify)(t):t}},9045:(e,t,r)=>{"use strict";const s=r(6928),a=r(6911),o=r(9376);function i(e,t){const r=e.options.env||process.env,i=process.cwd(),n=null!=e.options.cwd,c=n&&void 0!==process.chdir&&!process.chdir.disabled;if(c)try{process.chdir(e.options.cwd)}catch(e){}let l;try{l=a.sync(e.command,{path:r[o({env:r})],pathExt:t?s.delimiter:void 0})}catch(e){}finally{c&&process.chdir(i)}return l&&(l=s.resolve(n?e.options.cwd:"",l)),l}e.exports=function(e){return i(e)||i(e,!0)}},9164:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,a)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return a(t,e),t},i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.z=void 0;const n=o(r(9325));t.z=n,i(r(9325),t),t.default=n},9182:(e,t,r)=>{"use strict";const s=r(9896),a=r(1395);e.exports=function(e){const t=Buffer.alloc(150);let r;try{r=s.openSync(e,"r"),s.readSync(r,t,0,150,0),s.closeSync(r)}catch(e){}return a(t.toString())}},9278:e=>{"use strict";e.exports=require("net")},9317:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultErrorMap=void 0,t.setErrorMap=function(e){o=e},t.getErrorMap=function(){return o};const a=s(r(5653));t.defaultErrorMap=a.default;let o=a.default},9325:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,a)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(9317),t),a(r(819),t),a(r(6370),t),a(r(2034),t),a(r(491),t),a(r(8651),t)},9376:e=>{"use strict";const t=(e={})=>{const t=e.env||process.env;return"win32"!==(e.platform||process.platform)?"PATH":Object.keys(t).reverse().find(e=>"PATH"===e.toUpperCase())||"Path"};e.exports=t,e.exports.default=t},9415:e=>{"use strict";e.exports=function(e,t,r){var s=" ",a=e.level,o=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(o||""),u="errs__"+a,h=e.util.copy(e),p="";h.level++;var f="valid"+h.level,m={},v={},g=e.opts.ownProperties;for(S in i)if("__proto__"!=S){var y=i[S],_=Array.isArray(y)?v:m;_[S]=y}s+="var "+u+" = errors;";var b=e.errorPath;for(var S in s+="var missing"+a+";",v)if((_=v[S]).length){if(s+=" if ( "+d+e.util.getProperty(S)+" !== undefined ",g&&(s+=" && Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(S)+"') "),l){s+=" && ( ";var w=_;if(w)for(var P=-1,E=w.length-1;P<E;)k=w[P+=1],P&&(s+=" || "),s+=" ( ( "+(j=d+(N=e.util.getProperty(k)))+" === undefined ",g&&(s+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(k)+"') "),s+=") && (missing"+a+" = "+e.util.toQuotedString(e.opts.jsonPointers?k:N)+") ) ";s+=")) {  ";var x="missing"+a,R="' + "+x+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,x,!0):b+" + "+x);var C=C||[];C.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(S)+"', missingProperty: '"+R+"', depsCount: "+_.length+", deps: '"+e.util.escapeQuotes(1==_.length?_[0]:_.join(", "))+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should have ",1==_.length?s+="property "+e.util.escapeQuotes(_[0]):s+="properties "+e.util.escapeQuotes(_.join(", ")),s+=" when property "+e.util.escapeQuotes(S)+" is present' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var T=s;s=C.pop(),!e.compositeRule&&l?e.async?s+=" throw new ValidationError(["+T+"]); ":s+=" validate.errors = ["+T+"]; return false; ":s+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{s+=" ) { ";var I=_;if(I)for(var k,O=-1,z=I.length-1;O<z;){k=I[O+=1];var N=e.util.getProperty(k),j=(R=e.util.escapeQuotes(k),d+N);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,k,e.opts.jsonPointers)),s+=" if ( "+j+" === undefined ",g&&(s+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(k)+"') "),s+=") {  var err =   ",!1!==e.createErrors?(s+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(S)+"', missingProperty: '"+R+"', depsCount: "+_.length+", deps: '"+e.util.escapeQuotes(1==_.length?_[0]:_.join(", "))+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should have ",1==_.length?s+="property "+e.util.escapeQuotes(_[0]):s+="properties "+e.util.escapeQuotes(_.join(", ")),s+=" when property "+e.util.escapeQuotes(S)+" is present' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}s+=" }   ",l&&(p+="}",s+=" else { ")}e.errorPath=b;var A=h.baseId;for(var S in m)y=m[S],(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0||!1===y:e.util.schemaHasRules(y,e.RULES.all))&&(s+=" "+f+" = true; if ( "+d+e.util.getProperty(S)+" !== undefined ",g&&(s+=" && Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(S)+"') "),s+=") { ",h.schema=y,h.schemaPath=n+e.util.getProperty(S),h.errSchemaPath=c+"/"+e.util.escapeFragment(S),s+="  "+e.validate(h)+" ",h.baseId=A,s+=" }  ",l&&(s+=" if ("+f+") { ",p+="}"));return l&&(s+="   "+p+" if ("+u+" == errors) {"),s}},9547:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(8873);t.default=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},9560:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadBuffer=void 0,t.deserializeMessage=a,t.serializeMessage=function(e){return JSON.stringify(e)+"\n"};const s=r(1294);function a(e){return s.JSONRPCMessageSchema.parse(JSON.parse(e))}t.ReadBuffer=class{append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;const e=this._buffer.indexOf("\n");if(-1===e)return null;const t=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),a(t)}clear(){this._buffer=void 0}}},9896:e=>{"use strict";e.exports=require("fs")},9942:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(6982),a=new Uint8Array(256);let o=a.length;t.default=function(){return o>a.length-16&&((0,s.randomFillSync)(a),o=0),a.slice(o,o+=16)}},9943:e=>{"use strict";e.exports=function(e,t,r){var s=" ",a=e.level,o=e.dataLevel,i=e.schema[t],n=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,d="data"+(o||""),u="valid"+a,h=e.opts.$data&&i&&i.$data;h&&(s+=" var schema"+a+" = "+e.util.getData(i.$data,o,e.dataPathArr)+"; ");var p="i"+a,f="schema"+a;h||(s+=" var "+f+" = validate.schema"+n+";"),s+="var "+u+";",h&&(s+=" if (schema"+a+" === undefined) "+u+" = true; else if (!Array.isArray(schema"+a+")) "+u+" = false; else {"),s+=u+" = false;for (var "+p+"=0; "+p+"<"+f+".length; "+p+"++) if (equal("+d+", "+f+"["+p+"])) { "+u+" = true; break; }",h&&(s+="  }  "),s+=" if (!"+u+") {   ";var m=m||[];m.push(s),s="",!1!==e.createErrors?(s+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+a+" } ",!1!==e.opts.messages&&(s+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(s+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var v=s;return s=m.pop(),!e.compositeRule&&l?e.async?s+=" throw new ValidationError(["+v+"]); ":s+=" validate.errors = ["+v+"]; return false; ":s+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s+=" }",l&&(s+=" else { "),s}},9973:e=>{"use strict";e.exports=function(e,t,r){var s,a,o=" ",i=e.level,n=e.dataLevel,c=e.schema[t],l=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,u="data"+(n||""),h="valid"+i;if("#"==c||"#/"==c)e.isRoot?(s=e.async,a="validate"):(s=!0===e.root.schema.$async,a="root.refVal[0]");else{var p=e.resolveRef(e.baseId,c,e.isRoot);if(void 0===p){var f=e.MissingRefError.message(e.baseId,c);if("fail"==e.opts.missingRefs){e.logger.error(f),(y=y||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",!1!==e.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(o+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var m=o;o=y.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d&&(o+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,c,f);e.logger.warn(f),d&&(o+=" if (true) { ")}}else if(p.inline){var v=e.util.copy(e);v.level++;var g="valid"+v.level;v.schema=p.schema,v.schemaPath="",v.errSchemaPath=c,o+=" "+e.validate(v).replace(/validate\.schema/g,p.code)+" ",d&&(o+=" if ("+g+") { ")}else s=!0===p.$async||e.async&&!1!==p.$async,a=p.code}if(a){var y;(y=y||[]).push(o),o="",e.opts.passContext?o+=" "+a+".call(this, ":o+=" "+a+"( ",o+=" "+u+", (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var _=o+=" , "+(n?"data"+(n-1||""):"parentData")+" , "+(n?e.dataPathArr[n]:"parentDataProperty")+", rootData)  ";if(o=y.pop(),s){if(!e.async)throw new Error("async schema referenced by sync schema");d&&(o+=" var "+h+"; "),o+=" try { await "+_+"; ",d&&(o+=" "+h+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",d&&(o+=" "+h+" = false; "),o+=" } ",d&&(o+=" if ("+h+") { ")}else o+=" if (!"+_+") { if (vErrors === null) vErrors = "+a+".errors; else vErrors = vErrors.concat("+a+".errors); errors = vErrors.length; } ",d&&(o+=" else { ")}return o}}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var o=s[e]={exports:{}};return r[e].call(o.exports,o,o.exports,a),o.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"==typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"==typeof r.then)return r}var o=Object.create(null);a.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var n=2&s&&r;"object"==typeof n&&!~e.indexOf(n);n=t(n))Object.getOwnPropertyNames(n).forEach(e=>i[e]=()=>r[e]);return i.default=()=>r,a.d(o,i),o},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o=a(8156);module.exports=o})();